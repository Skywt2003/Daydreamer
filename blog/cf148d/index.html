<!DOCTYPE html><html> <head><meta charset="UTF-8"><meta name="description" content="Astro description"><meta name="viewport" content="width=device-width"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><meta name="generator" content="Astro v4.1.1"><title>CodeFoces 148D Bag of mice é¢˜è§£ï¼šæ¦‚ç‡DP</title><link rel="stylesheet" href="https://fonts.loli.net/css2?family=Noto+Serif+SC:wght@200;300;400;500;600;700;900&display=swap"><script>
      function addMatomo() {
        var _paq = (window._paq = window._paq || []);
        _paq.push(["trackPageView"]);
        _paq.push(["enableLinkTracking"]);
        (function () {
          var u = "//analytics.skywt.cn/";
          _paq.push(["setTrackerUrl", u + "matomo.php"]);
          _paq.push(["setSiteId", "1"]);
          var d = document,
            g = d.createElement("script"),
            s = d.getElementsByTagName("script")[0];
          g.async = true;
          g.src = u + "matomo.js";
          s.parentNode.insertBefore(g, s);
        })();
      }

      document.addEventListener(
        "astro:page-load",
        () => {
          addMatomo();
        },
        { once: false },
      );
    </script><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><link rel="stylesheet" href="/_astro/about.7BsCWRhj.css" />
<style>img[data-astro-cid-4sn4zg3r]{border-radius:.25rem;--tw-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}
</style>
<link rel="stylesheet" href="/_astro/friends.S8xh7Zkr.css" /><script type="module" src="/_astro/hoisted.-OpaiJNX.js"></script></head> <body> <header class="mt-12 wide-container" data-astro-cid-3ef6ksr2> <h5 class="mt-4 mx-4 secondary-color sm:hidden text-center" data-astro-cid-3ef6ksr2> <a href="/" class="link">SkyWT</a> <span>
/
<a href="/blog" class="link"> åšå®¢</a> </span><span>
/
CodeFoces 148D Bag of mice é¢˜è§£ï¼šæ¦‚ç‡DP </span> </h5> </header> <nav class="py-2 font-thin sticky top-0 backdrop-blur-md z-10 transition-all" id="navbar-wrapper" data-astro-cid-3ef6ksr2> <div class="wide-container flex justify-center sm:justify-between flex-wrap" data-astro-cid-3ef6ksr2> <h5 class="m-2 hidden sm:block secondary-color" data-astro-cid-3ef6ksr2> <a href="/" class="link">SkyWT</a> <span>
/
<a href="/blog" class="link"> åšå®¢</a> </span><span>
/
CodeFoces 148D Bag of mice é¢˜è§£ï¼šæ¦‚ç‡DP </span> </h5> <div class="m-2 secondary-color" data-astro-cid-3ef6ksr2> <ul data-astro-cid-tfcnbjmv> <li data-astro-cid-tfcnbjmv> <a class="link" href="/" data-astro-cid-tfcnbjmv> <i class="ri-home-line" data-astro-cid-tfcnbjmv></i>
ä¸»é¡µ
</a> </li> <li data-astro-cid-tfcnbjmv> <a class="link" href="/blog" data-astro-cid-tfcnbjmv> <i class="ri-newspaper-line" data-astro-cid-tfcnbjmv></i> åšå®¢ </a> </li><li data-astro-cid-tfcnbjmv> <a class="link" href="/lab" data-astro-cid-tfcnbjmv> <i class="ri-server-line" data-astro-cid-tfcnbjmv></i> å®éªŒå®¤ </a> </li><li data-astro-cid-tfcnbjmv> <a class="link" href="/friends" data-astro-cid-tfcnbjmv> <i class="ri-contacts-line" data-astro-cid-tfcnbjmv></i> å‹äºº </a> </li><li data-astro-cid-tfcnbjmv> <a class="link" href="/about" data-astro-cid-tfcnbjmv> <i class="ri-cup-line" data-astro-cid-tfcnbjmv></i> å…³äº </a> </li> </ul>  </div> </div> </nav> <script>
  // ä½¿ç”¨ ViewTransition åï¼Œæ‰€æœ‰ DOM æ“ä½œçš„ js éƒ½æœ‰ä¸€å †é—®é¢˜
  // è¿™é‡Œç”¨äº†æä¸ä¼˜é›…çš„ varï¼Œæœ‰å¾…æ”¹è¿›
  var observer;
  function addNavObserver() {
    const headerEl = document.querySelector("#navbar-wrapper");
    const sentinalEl = document.querySelector("header");
    if (!sentinalEl || !headerEl) return;
    observer = new window.IntersectionObserver((e) => {
      if (!e[0].isIntersecting) {
        headerEl.classList.add("sticked");
      } else {
        headerEl.classList.remove("sticked");
      }
    });
    observer.observe(sentinalEl);
  }

  function removeNavObserver() {
    if (observer) observer.disconnect();
    observer = null;
  }

  document.addEventListener(
    "astro:page-load",
    () => {
      addNavObserver();
    },
    { once: false },
  );

  document.addEventListener(
    "astro:before-swap",
    () => {
      removeNavObserver();
    },
    { once: false },
  );
</script>   <main data-astro-cid-4sn4zg3r> <section class="container mt-8 sm:mt-32" data-astro-cid-4sn4zg3r>  <h1 class="primary-color leading-relaxed" data-astro-cid-4sn4zg3r>CodeFoces 148D Bag of mice é¢˜è§£ï¼šæ¦‚ç‡DP</h1> <p class="mt-4 secondary-color leading-relaxed" data-astro-cid-4sn4zg3r> <i class="ri-calendar-line" data-astro-cid-4sn4zg3r></i> <span data-astro-cid-4sn4zg3r>2018 å¹´ 07 æœˆ 22 æ—¥</span>   </p> <hr class="my-8" data-astro-cid-4sn4zg3r> <p class="card p-2 my-8" data-astro-cid-4sn4zg3r>
âš™ï¸ å…¨æ–°åšå®¢å‰ç«¯ä»åœ¨æµ‹è¯•ä¸­ã€‚å¦‚æœæ–‡ç« æ˜¾ç¤ºä¸æ­£å¸¸ï¼Œå¯ä»¥å°è¯•è®¿é—®<a href="https://blog.skywt.cn/posts/cf148d" class="link underline" data-astro-cid-4sn4zg3r>åŸåšå®¢çš„è¿™ç¯‡æ–‡ç« </a>ã€‚
</p> <article class="content" data-astro-cid-4sn4zg3r> <p>æ¦‚ç‡ DP æ¯”èµ·æœŸæœ› DPï¼Œå¯æ˜¯å®¹æ˜“å¤šäº†ï½<br>CodeFoces 148D Bag of mice <a href="http://codeforces.com/problemset/problem/148/D" title="é¢˜ç›®é“¾æ¥">é¢˜ç›®é“¾æ¥</a></p><!--more--><h2>Problem</h2><p>The dragon and the princess are arguing about what to do on the New Year's Eve. The dragon suggests flying to the mountains to watch fairies dancing in the moonlight, while the princess thinks they should just go to bed early. They are desperate to come to an amicable agreement, so they decide to leave this up to chance.</p><p>They take turns drawing a mouse from a bag which initially contains w white and b black mice. The person who is the first to draw a white mouse wins. After each mouse drawn by the dragon the rest of mice in the bag panic, and one of them jumps out of the bag itself (the princess draws her mice carefully and doesn't scare other mice). Princess draws first. What is the probability of the princess winning?</p><p>If there are no more mice in the bag and nobody has drawn a white mouse, the dragon wins. Mice which jump out of the bag themselves are not considered to be drawn (do not define the winner). Once a mouse has left the bag, it never returns to it. Every mouse is drawn from the bag with the same probability as every other one, and every mouse jumps out of the bag with the same probability as every other one.</p><h2>Input</h2><p>The only line of input data contains two integers w and b (0â€‰â‰¤â€‰w,â€‰bâ€‰â‰¤â€‰1000).</p><h2>Output</h2><p>Output the probability of the princess winning. The answer is considered to be correct if its absolute or relative error does not exceed $10^{-â€‰9}$</p><h2>Examples</h2><h3>Input #1</h3><pre><code>1 3

</code></pre><h3>Output #1</h3><pre><code>0.500000000

</code></pre><h3>Input #2</h3><pre><code>5 5

</code></pre><h3>Output #2</h3><pre><code>0.658730159

</code></pre><h2>Note</h2><p>Let's go through the first sample. The probability of the princess drawing a white mouse on her first turn and winning right away is 1/4. The probability of the dragon drawing a black mouse and not winning on his first turn is 3/4 <em> 2/3 = 1/2. After this there are two mice left in the bag â€” one black and one white; one of them jumps out, and the other is drawn by the princess on her second turn. If the princess' mouse is white, she wins (probability is 1/2 </em> 1/2 = 1/4), otherwise nobody gets the white mouse, so according to the rule the dragon wins.</p><h2>Translation</h2><p>é¢˜ç›®å¤§æ„æ˜¯ï¼šæœ‰ä¸€ä¸ªå…¬ä¸»å’Œä¸€æ¡é¾™ï¼Œé¾™æƒ³çœ‹ç¾å¥³è·³èˆä½†æ˜¯å…¬ä¸»æƒ³å»ç¡è§‰ï¼Œä»–ä»¬è¦â€œè¾¾æˆä¸€é¡¹å‹å¥½åè®®â€ï¼Œæ‰€ä»¥ä»–ä»¬è¦ç©ä¸ªæ¸¸æˆæ¥å†³å®šâ€¦â€¦ï¼ˆOIé¢˜ç›®çš„å¥—è·¯ï¼‰æœ‰ä¸€ä¸ªæœ‰ w åªç™½é¼ å’Œ b åªé»‘é¼ çš„è¢‹å­ï¼Œä»–ä»¬è¦éšæœºæ‹¿å‡ºè€é¼ ï¼Œå…¬ä¸»å…ˆæ‹¿ï¼Œå…ˆæ‹¿å‡ºç™½é¼ çš„è·èƒœã€‚æ¯æ‹¿å‡ºä¸€åªè€é¼ ï¼Œè¢‹å­é‡Œè€é¼ å°±ä¼šæƒŠæ…Œå¤±æªï¼Œå°±ä¼šæœ‰éšæœºä¸€åªè€é¼ çªœå‡ºæ¥ã€‚å¦‚æœä»–ä»¬éƒ½æ²¡æ‹¿åˆ°ç™½é¼ ï¼Œå°±é¾™èµ¢ã€‚é—®ä½ æœ€åå…¬ä¸»èµ¢çš„æ¦‚ç‡ã€‚</p><h2>Solution</h2><p>å¯ä»¥æƒ³åˆ°ä¸€ä¸ª DPï¼š$F_{i,j}$ è¡¨ç¤ºè¢‹å­é‡Œè¿˜å‰©ä¸‹ i åªç™½é¼ å’Œ j åªé»‘é¼ ï¼Œç°åœ¨è½®åˆ°å…¬ä¸»æ‹¿ï¼Œå…¬ä¸»èµ¢çš„æ¦‚ç‡ã€‚æšä¸¾å½“å‰çŠ¶æ€ï¼Œæˆ‘ä»¬è¦è€ƒè™‘ä¸¤ç§æƒ…å†µï¼š</p><ol><li>å…¬ä¸»æ‹¿çš„æ—¶å€™ï¼Œä¸€æ‹¿å°±æ‹¿åˆ°ç™½é¼ äº†ï¼Œæ¦‚ç‡ï¼ši / (i+j)ï¼›</li><li>å…¬ä¸»æ²¡æ‹¿åˆ°ç™½é¼ ï¼Œé¾™ä¹Ÿæ²¡æ‹¿åˆ°ç™½é¼ ã€‚ç•¥å¾®å¤æ‚ï¼Œè€ƒè™‘è·‘å‡ºçš„è€é¼ çš„é¢œè‰²ã€‚</li></ol><h2>Code</h2><p>ä¸‹é¢æ˜¯æˆ‘è¶…çº§è¯¦ç»†æ³¨é‡Šï¼ˆ<del>åºŸè¯è¿ç¯‡</del>ï¼‰çš„ä»£ç </p><pre><code class="lang-cpp">#include&lt;cstdio&gt;
#include&lt;cstring&gt;
#include&lt;iostream&gt;
using namespace std;
const int maxn=1005;
int n,m;
double f[maxn][maxn];
int main(){
    scanf(&quot;%d%d&quot;,&amp;n,&amp;m);
    for (int i=1;i&lt;=n;i++) f[i][0]=1.0; // å¦‚æœç­‰åˆ°å…¬ä¸»æ‹¿ï¼Œåªå‰©ç™½é¼ ï¼Œé‚£å…¬ä¸»è‚¯å®šèµ¢
    for (int i=0;i&lt;=n;i++){ // F[i][j]: ç­‰åˆ°å…¬ä¸»æ‹¿ï¼Œè¢‹å­é‡Œè¿˜å‰©ä¸‹iåªç™½é¼ jåªé»‘é¼ ï¼Œå…¬ä¸»èµ¢çš„æ¦‚ç‡
        for (int j=1;j&lt;=m;j++){ // æšä¸¾é»‘é¼   drg(Dragon):å½“æ—¶é¾™èµ¢çš„å‡ ç‡
            f[i][j]=(double)i/(i+j); // è€ƒè™‘å…¬ä¸»ç›´æ¥èµ¢çš„æƒ…å†µ
            double drg=(double)j*(double)(j-1)/(i+j)/(i+j-1); // å…¬ä¸»æ²¡æœ‰èµ¢ï¼Œé¾™ç»§ç»­æ‹¿ä¹Ÿæ²¡æœ‰èµ¢çš„æƒ…å†µ
            if (j&gt;=3) f[i][j]+=drg*(double)(j-2)/(i+j-2)*f[i][j-3]; // è·‘å‡ºæ¥çš„ä¸¤åªéƒ½æ˜¯é»‘é¼ ï¼Œå…¬ä¸»ç»§ç»­æ‹¿ï¼Œèµ¢äº†çš„æ¦‚ç‡
            if (i&gt;=1&amp;&amp;j&gt;=2) f[i][j]+=drg*(double)i/(i+j-2)*f[i-1][j-2]; // è·‘å‡ºæ¥ä¸€åªé»‘ä¸€åªç™½ï¼Œ...
        }
    }
    printf(&quot;%.10f\n&quot;,f[n][m]);
    return 0;
}
</code></pre> </article> <hr class="my-8" data-astro-cid-4sn4zg3r> <style>astro-island,astro-slot,astro-static-slot{display:contents}</style><script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).load=e;window.dispatchEvent(new Event("astro:load"));})();;(()=>{var b=Object.defineProperty;var f=(c,o,i)=>o in c?b(c,o,{enumerable:!0,configurable:!0,writable:!0,value:i}):c[o]=i;var l=(c,o,i)=>(f(c,typeof o!="symbol"?o+"":o,i),i);var p;{let c={0:t=>m(t),1:t=>i(t),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(i(t)),5:t=>new Set(i(t)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(t),9:t=>new Uint16Array(t),10:t=>new Uint32Array(t)},o=t=>{let[e,r]=t;return e in c?c[e](r):void 0},i=t=>t.map(o),m=t=>typeof t!="object"||t===null?t:Object.fromEntries(Object.entries(t).map(([e,r])=>[e,o(r)]));customElements.get("astro-island")||customElements.define("astro-island",(p=class extends HTMLElement{constructor(){super(...arguments);l(this,"Component");l(this,"hydrator");l(this,"hydrate",async()=>{var d;if(!this.hydrator||!this.isConnected)return;let e=(d=this.parentElement)==null?void 0:d.closest("astro-island[ssr]");if(e){e.addEventListener("astro:hydrate",this.hydrate,{once:!0});return}let r=this.querySelectorAll("astro-slot"),a={},h=this.querySelectorAll("template[data-astro-template]");for(let n of h){let s=n.closest(this.tagName);s!=null&&s.isSameNode(this)&&(a[n.getAttribute("data-astro-template")||"default"]=n.innerHTML,n.remove())}for(let n of r){let s=n.closest(this.tagName);s!=null&&s.isSameNode(this)&&(a[n.getAttribute("name")||"default"]=n.innerHTML)}let u;try{u=this.hasAttribute("props")?m(JSON.parse(this.getAttribute("props"))):{}}catch(n){let s=this.getAttribute("component-url")||"<unknown>",y=this.getAttribute("component-export");throw y&&(s+=` (export ${y})`),console.error(`[hydrate] Error parsing props for component ${s}`,this.getAttribute("props"),n),n}await this.hydrator(this)(this.Component,u,a,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),this.dispatchEvent(new CustomEvent("astro:hydrate"))});l(this,"unmount",()=>{this.isConnected||this.dispatchEvent(new CustomEvent("astro:unmount"))})}disconnectedCallback(){document.removeEventListener("astro:after-swap",this.unmount),document.addEventListener("astro:after-swap",this.unmount,{once:!0})}connectedCallback(){if(!this.hasAttribute("await-children")||document.readyState==="interactive"||document.readyState==="complete")this.childrenConnectedCallback();else{let e=()=>{document.removeEventListener("DOMContentLoaded",e),r.disconnect(),this.childrenConnectedCallback()},r=new MutationObserver(()=>{var a;((a=this.lastChild)==null?void 0:a.nodeType)===Node.COMMENT_NODE&&this.lastChild.nodeValue==="astro:end"&&(this.lastChild.remove(),e())});r.observe(this,{childList:!0}),document.addEventListener("DOMContentLoaded",e)}}async childrenConnectedCallback(){let e=this.getAttribute("before-hydration-url");e&&await import(e),this.start()}start(){let e=JSON.parse(this.getAttribute("opts")),r=this.getAttribute("client");if(Astro[r]===void 0){window.addEventListener(`astro:${r}`,()=>this.start(),{once:!0});return}Astro[r](async()=>{let a=this.getAttribute("renderer-url"),[h,{default:u}]=await Promise.all([import(this.getAttribute("component-url")),a?import(a):()=>()=>{}]),d=this.getAttribute("component-export")||"default";if(!d.includes("."))this.Component=h[d];else{this.Component=h;for(let n of d.split("."))this.Component=this.Component[n]}return this.hydrator=u,this.hydrate},e,this)}attributeChangedCallback(){this.hydrate()}},l(p,"observedAttributes",["props"]),p))}})();</script><astro-island uid="Z28rzq2" component-url="/_astro/Comments.nA8khF3T.js" component-export="default" renderer-url="/_astro/client.d8bzWiGl.js" props="{&quot;slug&quot;:[0,&quot;cf148d&quot;],&quot;permalink&quot;:[0,&quot;https://blog.skywt.cn/posts/cf148d&quot;],&quot;data-astro-cid-4sn4zg3r&quot;:[0,true]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;Comments&quot;,&quot;value&quot;:true}" await-children=""><h2><i class="ri-discuss-line"></i> æš‚æ— è¯„è®º</h2><hr class="my-8"/><h2><i class="ri-discuss-line"></i> å‘è¡¨è¯„è®º</h2><p class="primary-color card my-4 p-2">ğŸš§ æ–°åšå®¢ç³»ç»Ÿçš„è¯„è®ºåŠŸèƒ½ä»åœ¨å¼€å‘ä¸­ï¼Œæ•¬è¯·æœŸå¾…ã€‚å¯ä»¥å‰å¾€<a href="https://blog.skywt.cn/posts/cf148d" class="link underline">åŸåšå®¢çš„è¿™ç¯‡æ–‡ç« </a>åº•éƒ¨è¯„è®ºåŒºå‘è¡¨è¯„è®ºã€‚</p><!--astro:end--></astro-island> </section> </main>  <footer class="mt-16 py-8 bg-gray-100 dark:bg-neutral-900"> <div class="wide-container secondary-color text-sm"> <div class="flex justify-between flex-wrap"> <div class="m-2"> <a href="/" class="link">SkyWT</a> <span>
/
<a href="/blog" class="link"> åšå®¢</a> </span><span>
/
CodeFoces 148D Bag of mice é¢˜è§£ï¼šæ¦‚ç‡DP </span> </div> <div class="m-2"> <ul data-astro-cid-tfcnbjmv> <li data-astro-cid-tfcnbjmv> <a class="link" href="/" data-astro-cid-tfcnbjmv> 
ä¸»é¡µ
</a> </li> <li data-astro-cid-tfcnbjmv> <a class="link" href="/blog" data-astro-cid-tfcnbjmv>  åšå®¢ </a> </li><li data-astro-cid-tfcnbjmv> <a class="link" href="/lab" data-astro-cid-tfcnbjmv>  å®éªŒå®¤ </a> </li><li data-astro-cid-tfcnbjmv> <a class="link" href="/friends" data-astro-cid-tfcnbjmv>  å‹äºº </a> </li><li data-astro-cid-tfcnbjmv> <a class="link" href="/about" data-astro-cid-tfcnbjmv>  å…³äº </a> </li> </ul>  </div> </div> <hr class="my-4"> <div class="flex justify-between flex-wrap"> <p class="m-2">
&#169; 2017-2024 <a href="/" class="link">SkyWT</a>
|
<a href="/sitemap.xml" class="link">ç«™ç‚¹åœ°å›¾</a>
|
<a href="/friends" class="link">å‹æƒ…é“¾æ¥</a>
|
<a href="https://foreverblog.cn/go.html" class="link">è™«æ´</a> <!-- |
        <a href="https://github.com/Skywt2003/Daydreamer" class="link"
          >Daydreamer</a
        > --> </p> <div class="m-2"> <a href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank" class="inline-block mx-1" data-astro-cid-h3ykra2n> <img class="icon" src="/cc/cc.svg" data-astro-cid-h3ykra2n> <img class="icon" src="/cc/by.svg" data-astro-cid-h3ykra2n> <img class="icon" src="/cc/nc.svg" data-astro-cid-h3ykra2n>   </a>  <a href="https://notbyai.fyi" target="_blank" class="inline-block mx-1" data-astro-cid-hwbnc4sm> <img src="/not-by-ai-light.svg" alt="Not By AI Badge" class="badge inline-block dark:hidden" data-astro-cid-hwbnc4sm> <img src="/not-by-ai-dark.svg" alt="Not By AI Badge" class="badge hidden dark:inline-block" data-astro-cid-hwbnc4sm> </a>  <a href="https://www.foreverblog.cn/" target="_blank" class="inline-block mx-1"> <img src="https://img.foreverblog.cn/logo_en_default.png" alt="Forever Blog Badage" class="inline-block h-4 grayscale"> </a> </div> </div> <div class="flex justify-between flex-wrap"> <p class="m-2"> <a href="https://beian.miit.gov.cn/" target="_blank" class="link">
æµ™ ICP å¤‡ 2021019606 å· - 1</a>
|
<a href="https://www.beian.gov.cn/portal/registerSystemInfo?recordcode=33080202000472" target="_blank" class="link before:content-[url('/mps.png')] before:align-middle">
æµ™å…¬ç½‘å®‰å¤‡ 33080202000472 å·</a> </p> <p class="m-2"> <!-- <span class="align-middle">ç”±</span>
        <a
          href="https://www.upyun.com/?utm_source=lianmeng&utm_medium=referral"
          class="inline-block align-middle"
        >
          <img src="/upyun.png" class="h-6" />
        </a>
        <span class="align-middle">æä¾› CDN åŠ é€Ÿã€äº‘å­˜å‚¨æœåŠ¡</span> --> </p> </div> </div> </footer> </body></html> 