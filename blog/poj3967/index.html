<!DOCTYPE html><html> <head><meta charset="UTF-8"><meta name="description" content="Astro description"><meta name="viewport" content="width=device-width"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><meta name="generator" content="Astro v4.1.1"><title>Uva 1599 / POJ 3967 Ideal Pathï¼šä¸ä¸€æ ·çš„ BFS</title><link rel="stylesheet" href="https://fonts.loli.net/css2?family=Noto+Serif+SC:wght@200;300;400;500;600;700;900&display=swap"><!-- Matomo --><script>
      var _paq = (window._paq = window._paq || []);
      _paq.push(["trackPageView"]);
      _paq.push(["enableLinkTracking"]);
      (function () {
        var u = "//analytics.skywt.cn/";
        _paq.push(["setTrackerUrl", u + "matomo.php"]);
        _paq.push(["setSiteId", "1"]);
        var d = document,
          g = d.createElement("script"),
          s = d.getElementsByTagName("script")[0];
        g.async = true;
        g.src = u + "matomo.js";
        s.parentNode.insertBefore(g, s);
      })();
    </script><!-- End Matomo Code --><link rel="stylesheet" href="/_astro/about.4DFoe-cT.css" />
<style>img[data-astro-cid-4sn4zg3r]{border-radius:.25rem;--tw-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}
</style>
<link rel="stylesheet" href="/_astro/friends.CELmKF_Q.css" /></head> <body> <header class="mt-12 wide-container" data-astro-cid-3ef6ksr2> <h5 class="mt-4 mx-4 secondary-color sm:hidden text-center" data-astro-cid-3ef6ksr2>
SkyWT
<span data-astro-cid-3ef6ksr2> / åšå®¢</span><span data-astro-cid-3ef6ksr2> / Uva 1599 / POJ 3967 Ideal Pathï¼šä¸ä¸€æ ·çš„ BFS</span> </h5> </header> <nav class="py-2 font-thin sticky top-0 backdrop-blur-md z-10 transition-all" id="navbar-wrapper" data-astro-cid-3ef6ksr2> <div class="wide-container flex justify-center sm:justify-between flex-wrap" data-astro-cid-3ef6ksr2> <h5 class="m-2 hidden sm:block secondary-color" data-astro-cid-3ef6ksr2> <a href="/" class="link" data-astro-cid-3ef6ksr2>SkyWT</a> <span data-astro-cid-3ef6ksr2> / åšå®¢</span><span data-astro-cid-3ef6ksr2> / Uva 1599 / POJ 3967 Ideal Pathï¼šä¸ä¸€æ ·çš„ BFS</span> </h5> <div class="m-2 secondary-color" data-astro-cid-3ef6ksr2> <ul data-astro-cid-tfcnbjmv> <li data-astro-cid-tfcnbjmv> <a class="link" href="/" data-astro-cid-tfcnbjmv> <i class="ri-home-line" data-astro-cid-tfcnbjmv></i>
ä¸»é¡µ
</a> </li> <li data-astro-cid-tfcnbjmv> <a class="link" href="/blog" data-astro-cid-tfcnbjmv> <i class="ri-newspaper-line" data-astro-cid-tfcnbjmv></i> åšå®¢ </a> </li><li data-astro-cid-tfcnbjmv> <a class="link" href="/lab" data-astro-cid-tfcnbjmv> <i class="ri-server-line" data-astro-cid-tfcnbjmv></i> å®éªŒå®¤ </a> </li><li data-astro-cid-tfcnbjmv> <a class="link" href="/friends" data-astro-cid-tfcnbjmv> <i class="ri-contacts-line" data-astro-cid-tfcnbjmv></i> å‹äºº </a> </li><li data-astro-cid-tfcnbjmv> <a class="link" href="/about" data-astro-cid-tfcnbjmv> <i class="ri-cup-line" data-astro-cid-tfcnbjmv></i> å…³äº </a> </li> </ul>  </div> </div> </nav> <script>
  const headerEl = document.querySelector("#navbar-wrapper");
  const sentinalEl = document.querySelector("header");
  const handler = (entries) => {
    if (!entries[0].isIntersecting) {
      headerEl.classList.add("sticked");
    } else {
      headerEl.classList.remove("sticked");
    }
  };
  const observer = new window.IntersectionObserver(handler);
  observer.observe(sentinalEl);
</script>   <main data-astro-cid-4sn4zg3r> <section class="container mt-32" data-astro-cid-4sn4zg3r>  <h1 class="primary-color leading-relaxed" data-astro-cid-4sn4zg3r>Uva 1599 / POJ 3967 Ideal Pathï¼šä¸ä¸€æ ·çš„ BFS</h1> <p class="mt-4 secondary-color leading-relaxed" data-astro-cid-4sn4zg3r> <i class="ri-calendar-line" data-astro-cid-4sn4zg3r></i> <span data-astro-cid-4sn4zg3r>2018 å¹´ 08 æœˆ 07 æ—¥</span>   <br data-astro-cid-4sn4zg3r> <i class="ri-discuss-line" data-astro-cid-4sn4zg3r></i> <span data-astro-cid-4sn4zg3r>å…± 1 æ¡è¯„è®º</span>  </p> <hr class="my-8" data-astro-cid-4sn4zg3r> <p class="card p-2 my-8" data-astro-cid-4sn4zg3r>
âš™ï¸ å…¨æ–°åšå®¢å‰ç«¯ä»åœ¨æµ‹è¯•ä¸­ã€‚å¦‚æœæ–‡ç« æ˜¾ç¤ºä¸æ­£å¸¸ï¼Œå¯ä»¥å°è¯•è®¿é—®<a href="https://blog.skywt.cn/posts/poj3967" class="link underline" data-astro-cid-4sn4zg3r>åŸåšå®¢çš„è¿™ç¯‡æ–‡ç« </a>ã€‚
</p> <article class="prose dark:prose-neutral dark:prose-invert max-w-none" data-astro-cid-4sn4zg3r> <p>é¢˜ç›®é“¾æ¥ï¼š<a href="https://uva.onlinejudge.org/external/15/1599.pdf" title="UVa 1599 Ideal Path">UVa 1599 Ideal Path</a> æˆ–è€… <a href="http://poj.org/problem?id=3967" title="POJ 3967 Ideal Path">POJ 3967 Ideal Path</a></p><p>POJ ä¸Šå±…ç„¶ä¸èƒ½ç”¨ vector ï¼ï¼ï¼å¼ºçƒˆä¸æ»¡ï¼</p><!--more--><p>ï¼ˆæœ¬åšå®¢ä»¥ UVa ä¸Šçš„é¢˜ç›®ä¸ºå‡†ï¼‰</p><h2>Problem</h2><p>New labyrinth attraction is open in New Lostland amusement park. The labyrinth consists of n rooms connected by m passages. Each passage is colored into some color ci. Visitors of the labyrinth are dropped from the helicopter to the room number 1 and their goal is to get to the labyrinth exit located in the room number n.</p><p>Labyrinth owners are planning to run a contest tomorrow. Several runners will be dropped to the room number 1. They will run to the room number n writing down colors of passages as they run through them. The contestant with the shortest sequence of colors is the winner of the contest. If there are several contestants with the same sequence length, the one with the ideal path is the winner. The path is the ideal path if its color sequence is the lexicographically smallest among shortest paths.</p><p>Andrew is preparing for the contest. He took a helicopter tour above New Lostland and made a picture of the labyrinth. Your task is to help him find the ideal path from the room number 1 to the room number n that would allow him to win the contest.</p><p><strong>Note:</strong> A sequence (a1, a2, . . . , ak) is lexicographically smaller than a sequence (b1, b2, . . . , bk) if there exists i such that ai &lt; bi , and aj = bj for all j &lt; i.</p><h2>Input</h2><p>The input file contains several test cases, each of them as described below.<br>The first line of the input file contains integers n and m â€” the number of rooms and passages, respectively $(2 â‰¤ n â‰¤ 100000, 1 â‰¤ m â‰¤ 200000)$. The following m lines describe passages, each passage is described with three integer numbers: ai, bi, and ci â€” the numbers of rooms it connects and its color $(1 â‰¤ a_i, b_i â‰¤ n, 1 â‰¤ c_i â‰¤ 10^9)$. Each passage can be passed in either direction. Two rooms can be connected with more than one passage, there can be a passage from a room to itself. It is guaranteed that it is possible to reach the room number n from the room number 1.</p><h2>Output</h2><p>For each test case, the output must follow the description below.<br>The first line of the output file must contain k â€” the length of the shortest path from the room<br>number 1 to the room number n. The second line must contain k numbers â€” the colors of passages in<br>the order they must be passed in the ideal path.</p><h2>Sample Input</h2><pre><code>4 6
1 2 1
1 3 2
3 4 3
2 3 1
2 4 4
3 1 1

</code></pre><h2>Sample Output</h2><pre><code>2
1 3

</code></pre><h2>Analysis</h2><p>è¿™é¢˜æ˜¯ã€Šç®—æ³•ç«èµ›å…¥é—¨ç»å…¸ã€‹ä¸Šé¢çš„åŸé¢˜ï¼Œåœ¨ä¹¦ä¸Šä½œè€…è¿˜åŠ ç²—æ ‡æ³¨ï¼š<strong>â€œæ­¤é¢˜éå¸¸é‡è¦ï¼Œå¼ºçƒˆå»ºè®®è¯»è€…ç¼–å†™ç¨‹åºï¼â€</strong>ä½†æ˜¯å†™èµ·æ¥ä¼¼ä¹å¹¶æ²¡æœ‰è¿™ä¹ˆç®€å•â€¦â€¦</p><p>æƒ³æ³•æ¯”è¾ƒç®€å•ï¼Œå¦‚æœå…‰é—®æˆ‘ä»¬æœ€çŸ­è·¯å¾„ï¼Œè¿™å°±æ˜¯å…¥é—¨é¢˜ï¼›å…³é”®æ˜¯è¦è®©æœ€çŸ­è·¯å¾„ä¸Šé¢œè‰²å­—å…¸åºæœ€å°ï¼Œå¹¶ä¸”è¿˜è¦è¾“å‡ºã€‚å¯ä»¥ä»ç»ˆç‚¹ n å¼€å§‹åå‘ BFSï¼Œæ±‚å‡ºæ¯ä¸ªç‚¹åˆ° n ç‚¹çš„è·ç¦» $dist(n)$ï¼Œè¿™æ ·å¤„ç†çš„å¥½å¤„æ˜¯ï¼šåœ¨ä¹‹åæ­£å‘ BFS å¤„ç†çš„æ—¶å€™ï¼Œå¯ä»¥æ–¹ä¾¿åœ°å¾—å‡ºæŸä¸ªç‚¹æ˜¯å¦åœ¨æœ€çŸ­è·¯å¾„ä¸­ã€‚<br>å¤„ç†å¥½åå‘çš„ BFS ä¹‹åï¼Œå¤„ç†æ­£å‘çš„æ±‚ç­”æ¡ˆçš„ BFS æ‰æ˜¯é‡å¤´æˆã€‚å…¶å®ä¹Ÿæ˜¯ BFS çš„æ€æƒ³ï¼Œä½†æ˜¯å†™èµ·æ¥å´ä¸åƒæˆ‘ä»¬å¹³å¸¸çš„â€œç»´æŠ¤ä¸€ä¸ªé˜Ÿåˆ—â€çš„ BFSã€‚æˆ‘ä»¬éœ€è¦æŠŠæ¯æ­¥å¯èƒ½çš„èµ°æ³•éƒ½å•ç‹¬ç»´æŠ¤ã€‚å…·ä½“å¤„ç†èµ·æ¥è¿˜æœ‰æŠ€å·§ï¼šå°†æ‰€æœ‰ä¸‹ä¸€æ­¥çš„å¯èƒ½å…¨éƒ½å­˜åœ¨ vector é‡Œï¼Œç„¶å<strong>æ’åºå»é‡</strong>ï¼ŒåŠ å…¥ä¸‹æ¬¡çš„å¤„ç†é˜Ÿåˆ—é‡Œã€‚è¿™æ ·å¾ˆå¤§ç¨‹åº¦åœ°é¿å…äº†å…ƒç´ é‡å¤ä¸ç©ºé—´æµªè´¹ã€‚<br>å…·ä½“å®ç°çš„æ—¶å€™ï¼Œå¯ä»¥ç”¨ä¸¤ä¸ª vectorï¼Œä¸€ä¸ª nowï¼Œä¸€ä¸ª nextã€‚è¯¦è§ä»£ç çš„ GetAns éƒ¨åˆ†ï½</p><p>emmï¼Œå’¨è¯¢ dalao å¬è¯´ï¼Œæ®è¯´ POJ æ˜¯ä¸èƒ½ç”¨ vector çš„â€¦â€¦å®³æ€•â€¦â€¦<br><del>ä»£ç æ‡’å¾—æ”¹äº†â€¦â€¦</del></p><h2>Code</h2><pre><code class="lang-cpp">#include&lt;cstdio&gt;
#include&lt;cstring&gt;
#include&lt;iostream&gt;
#include&lt;algorithm&gt;
#include&lt;queue&gt;
using namespace std;
const int maxn=100005,maxe=400005;
int T,n,e,dst[maxn],INF,dist=0;
bool vis[maxn];
struct VertexInfo{
    int x,c;
};
vector&lt;int&gt; ans,edge[maxn],color[maxn];
vector&lt;VertexInfo&gt; now,nxt;
queue&lt;int&gt; que;
inline int read(){
    int ret=0,f=1;char ch=getchar();
    while (ch&lt;'0'||ch&gt;'9') {if (ch=='-') f=-1;ch=getchar();}
    while (ch&gt;='0'&amp;&amp;ch&lt;='9') ret=ret*10+ch-'0',ch=getchar();
    return ret*f;
}
inline void init(){
    memset(dst,0x3f,sizeof(dst));INF=dst[0];
    for (int i=1;i&lt;=n;i++) edge[i].clear(),color[i].clear();
}
inline void BFS(int s){
    memset(vis,0,sizeof(vis));
    que.push(s);vis[s]=1;dst[s]=0;
    while (!que.empty()){
        int x=que.front();que.pop();
        for (int i=0;i&lt;edge[x].size();i++) if (!vis[edge[x][i]]){
            vis[edge[x][i]]=true;
            dst[edge[x][i]]=dst[x]+1;
            que.push(edge[x][i]);
        }
    }
}
inline bool CompareColor(VertexInfo aa,VertexInfo bb){
    return aa.c&lt;bb.c||(aa.c==bb.c&amp;&amp;aa.x&lt;bb.x);
}
inline void GetAns(int s){
    memset(vis,0,sizeof(vis));ans.clear();
    //Init Vector &quot;now&quot;
    vis[s]=1;now.clear();
    now.push_back((VertexInfo){s,-1});

    for (int t=1;t&lt;=dist;t++){ // Do BT BFS
        nxt.clear();
        for (int i=0;i&lt;now.size();i++){
            VertexInfo head=now[i];
            for (int j=0;j&lt;edge[head.x].size();j++) if (!vis[edge[head.x][j]]){
                if (t+dst[edge[head.x][j]]!=dist) continue;
                nxt.push_back((VertexInfo){edge[head.x][j],color[head.x][j]});
            }
        }

        now.clear();
        sort(nxt.begin(),nxt.end(),CompareColor);
        for (int i=0;i&lt;nxt.size()&amp;&amp;nxt[i].c==nxt[0].c;i++){
            if (i!=0&amp;&amp;nxt[i].x==nxt[i-1].x) continue;
            now.push_back(nxt[i]);
            vis[nxt[i].x]=true;
        }
        ans.push_back(now[0].c);
    }
}
int main(){
    while (scanf(&quot;%d%d&quot;,&amp;n,&amp;e)!=-1){
        init();
        for (int i=1;i&lt;=e;i++){
            int x=read(),y=read(),z=read();
            edge[x].push_back(y);color[x].push_back(z);
            edge[y].push_back(x);color[y].push_back(z);
        }
        BFS(n);dist=dst[1];
        GetAns(1);
        printf(&quot;%d\n&quot;,(int)ans.size());
        printf(&quot;%d&quot;,ans[0]);
        for (int i=1;i&lt;ans.size();i++) printf(&quot; %d&quot;,ans[i]);
        printf(&quot;\n&quot;);
    }
    return 0;
}</code></pre> </article> <hr class="my-8" data-astro-cid-4sn4zg3r> <h2> <i class="ri-discuss-line"></i> å…± 1 æ¡è¯„è®º </h2> <div class="primary-color my-4"> <div class="flex items-center"> <img src="https://gravatar.com/avatar/e451fea6d7ad2e5cadc71a1d873b52aa" class="rounded-full w-12 mr-2"> <div class="m-2"> <a href="https://capata.wang" class="link" target="_blank"> <h4>CaptainSlow</h4> </a> <p class="mt-1">2018 å¹´ 10 æœˆ 21 æ—¥ 1:48</p> </div> </div> <p class="mt-2">å°ç›–å“¥ç‰›é€¼å•Šï¼ä¸è¿‡æˆ‘å¥½åƒæ²¡æ€ä¹ˆçœ‹æ‡‚...</p> <div class="ml-8">  </div> </div> <hr class="my-8"> <h2> <i class="ri-discuss-line"></i>
å‘è¡¨è¯„è®º
</h2> <p class="primary-color card my-4 p-2">
ğŸš§ æ–°åšå®¢ç³»ç»Ÿçš„è¯„è®ºåŠŸèƒ½ä»åœ¨å¼€å‘ä¸­ï¼Œæ•¬è¯·æœŸå¾…ã€‚å¯ä»¥å‰å¾€<a href="https://blog.skywt.cn/posts/poj3967" class="link underline">åŸåšå®¢çš„è¿™ç¯‡æ–‡ç« </a>åº•éƒ¨è¯„è®ºåŒºå‘è¡¨è¯„è®ºã€‚
</p> </section> </main>  <footer class="mt-16 py-8 bg-gray-100 dark:bg-neutral-900"> <div class="wide-container secondary-color text-sm"> <div class="m-2 flex justify-between flex-wrap"> <div class="m-2"> <a class="link" href="/"> SkyWT</a> <span> / åšå®¢</span><span> / Uva 1599 / POJ 3967 Ideal Pathï¼šä¸ä¸€æ ·çš„ BFS</span> </div> <div class="m-2"> <ul data-astro-cid-tfcnbjmv> <li data-astro-cid-tfcnbjmv> <a class="link" href="/" data-astro-cid-tfcnbjmv> 
ä¸»é¡µ
</a> </li> <li data-astro-cid-tfcnbjmv> <a class="link" href="/blog" data-astro-cid-tfcnbjmv>  åšå®¢ </a> </li><li data-astro-cid-tfcnbjmv> <a class="link" href="/lab" data-astro-cid-tfcnbjmv>  å®éªŒå®¤ </a> </li><li data-astro-cid-tfcnbjmv> <a class="link" href="/friends" data-astro-cid-tfcnbjmv>  å‹äºº </a> </li><li data-astro-cid-tfcnbjmv> <a class="link" href="/about" data-astro-cid-tfcnbjmv>  å…³äº </a> </li> </ul>  </div> </div> <hr> <div class="m-2 flex justify-between flex-wrap"> <p class="m-2">
&#169; 2017-2024 <a href="https://skywt.cn/" class="link">SkyWT</a> /
<a href="https://www.beian.gov.cn/portal/registerSystemInfo?recordcode=33080202000472" target="_blank" class="link before:content-[url('/mps.png')] before:align-middle">
æµ™å…¬ç½‘å®‰å¤‡33080202000472å·</a> /
<a href="https://beian.miit.gov.cn/" target="_blank" class="link">
æµ™ICPå¤‡2021019606å·-1
</a> </p> <div class="m-2"> <a href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank" class="inline-block mx-1" data-astro-cid-h3ykra2n> <img class="icon" src="/cc/cc.svg" data-astro-cid-h3ykra2n> <img class="icon" src="/cc/by.svg" data-astro-cid-h3ykra2n> <img class="icon" src="/cc/nc.svg" data-astro-cid-h3ykra2n>   </a>  <a href="https://notbyai.fyi" target="_blank" class="inline-block mx-1" data-astro-cid-hwbnc4sm> <img src="/not-by-ai-light.svg" alt="Not By AI Badge" class="badge inline-block dark:hidden" data-astro-cid-hwbnc4sm> <img src="/not-by-ai-dark.svg" alt="Not By AI Badge" class="badge hidden dark:inline-block" data-astro-cid-hwbnc4sm> </a>  <a href="https://www.foreverblog.cn/" target="_blank" class="inline-block mx-1"> <img src="https://img.foreverblog.cn/logo_en_default.png" alt="Forever Blog Badage" class="inline-block h-4 grayscale"> </a> </div> </div> </div> </footer> </body></html> 