<!DOCTYPE html><html> <head><meta charset="UTF-8"><meta name="description" content="Astro description"><meta name="viewport" content="width=device-width"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><meta name="generator" content="Astro v4.1.1"><title>Topcoder SRM 639 Div2 T3 BoardFoldingDiv2 é¢˜è§£</title><link rel="stylesheet" href="https://fonts.loli.net/css2?family=Noto+Serif+SC:wght@200;300;400;500;600;700;900&display=swap"><!-- Matomo --><script>
      var _paq = (window._paq = window._paq || []);
      _paq.push(["trackPageView"]);
      _paq.push(["enableLinkTracking"]);
      (function () {
        var u = "//analytics.skywt.cn/";
        _paq.push(["setTrackerUrl", u + "matomo.php"]);
        _paq.push(["setSiteId", "1"]);
        var d = document,
          g = d.createElement("script"),
          s = d.getElementsByTagName("script")[0];
        g.async = true;
        g.src = u + "matomo.js";
        s.parentNode.insertBefore(g, s);
      })();
    </script><!-- End Matomo Code --><link rel="stylesheet" href="/_astro/about.4DFoe-cT.css" />
<style>img[data-astro-cid-4sn4zg3r]{border-radius:.25rem;--tw-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}
</style>
<link rel="stylesheet" href="/_astro/friends.CELmKF_Q.css" /></head> <body> <header class="mt-12 wide-container" data-astro-cid-3ef6ksr2> <h5 class="mt-4 mx-4 secondary-color sm:hidden text-center" data-astro-cid-3ef6ksr2>
SkyWT
<span data-astro-cid-3ef6ksr2> / åšå®¢</span><span data-astro-cid-3ef6ksr2> / Topcoder SRM 639 Div2 T3 BoardFoldingDiv2 é¢˜è§£</span> </h5> </header> <nav class="py-2 font-thin sticky top-0 backdrop-blur-md z-10 transition-all" id="navbar-wrapper" data-astro-cid-3ef6ksr2> <div class="wide-container flex justify-center sm:justify-between flex-wrap" data-astro-cid-3ef6ksr2> <h5 class="m-2 hidden sm:block secondary-color" data-astro-cid-3ef6ksr2> <a href="/" class="link" data-astro-cid-3ef6ksr2>SkyWT</a> <span data-astro-cid-3ef6ksr2> / åšå®¢</span><span data-astro-cid-3ef6ksr2> / Topcoder SRM 639 Div2 T3 BoardFoldingDiv2 é¢˜è§£</span> </h5> <div class="m-2 secondary-color" data-astro-cid-3ef6ksr2> <ul data-astro-cid-tfcnbjmv> <li data-astro-cid-tfcnbjmv> <a class="link" href="/" data-astro-cid-tfcnbjmv> <i class="ri-home-line" data-astro-cid-tfcnbjmv></i>
ä¸»é¡µ
</a> </li> <li data-astro-cid-tfcnbjmv> <a class="link" href="/blog" data-astro-cid-tfcnbjmv> <i class="ri-newspaper-line" data-astro-cid-tfcnbjmv></i> åšå®¢ </a> </li><li data-astro-cid-tfcnbjmv> <a class="link" href="/lab" data-astro-cid-tfcnbjmv> <i class="ri-server-line" data-astro-cid-tfcnbjmv></i> å®éªŒå®¤ </a> </li><li data-astro-cid-tfcnbjmv> <a class="link" href="/friends" data-astro-cid-tfcnbjmv> <i class="ri-contacts-line" data-astro-cid-tfcnbjmv></i> å‹äºº </a> </li><li data-astro-cid-tfcnbjmv> <a class="link" href="/about" data-astro-cid-tfcnbjmv> <i class="ri-cup-line" data-astro-cid-tfcnbjmv></i> å…³äº </a> </li> </ul>  </div> </div> </nav> <script>
  const headerEl = document.querySelector("#navbar-wrapper");
  const sentinalEl = document.querySelector("header");
  const handler = (entries) => {
    if (!entries[0].isIntersecting) {
      headerEl.classList.add("sticked");
    } else {
      headerEl.classList.remove("sticked");
    }
  };
  const observer = new window.IntersectionObserver(handler);
  observer.observe(sentinalEl);
</script>   <main data-astro-cid-4sn4zg3r> <section class="container mt-32" data-astro-cid-4sn4zg3r>  <h1 class="primary-color leading-relaxed" data-astro-cid-4sn4zg3r>Topcoder SRM 639 Div2 T3 BoardFoldingDiv2 é¢˜è§£</h1> <p class="mt-4 secondary-color leading-relaxed" data-astro-cid-4sn4zg3r> <i class="ri-calendar-line" data-astro-cid-4sn4zg3r></i> <span data-astro-cid-4sn4zg3r>2018 å¹´ 08 æœˆ 26 æ—¥</span>   <br data-astro-cid-4sn4zg3r> <i class="ri-discuss-line" data-astro-cid-4sn4zg3r></i> <span data-astro-cid-4sn4zg3r>å…± 0 æ¡è¯„è®º</span>  </p> <hr class="my-8" data-astro-cid-4sn4zg3r> <p class="card p-2 my-8" data-astro-cid-4sn4zg3r>
âš™ï¸ å…¨æ–°åšå®¢å‰ç«¯ä»åœ¨æµ‹è¯•ä¸­ã€‚å¦‚æœæ–‡ç« æ˜¾ç¤ºä¸æ­£å¸¸ï¼Œå¯ä»¥å°è¯•è®¿é—®<a href="https://blog.skywt.cn/posts/tc-639-div2-t3" class="link underline" data-astro-cid-4sn4zg3r>åŸåšå®¢çš„è¿™ç¯‡æ–‡ç« </a>ã€‚
</p> <article class="prose dark:prose-neutral dark:prose-invert max-w-none" data-astro-cid-4sn4zg3r> <p>Topcoder Single Round Match 639 DIv2 T3 BoardFoldingDiv2 é¢˜è§£</p><p>è¿™æ˜¯æˆ‘åšå®¢çš„ç¬¬ 66 ç¯‡æ–‡ç« ï¼Œåº†ç¥ä¸€ä¸‹ :tada:</p><!--more--><hr><h2>Translation</h2><p>æœ‰ä¸€ä¸ª n è¡Œ m åˆ—çš„çŸ©é˜µï¼Œæ¯ä¸ªå…ƒç´ éƒ½æ˜¯ 0 æˆ– 1ï¼›ç°åœ¨ä½ å¯ä»¥æ²¿ç€å¹³è¡ŒäºçŸ©é˜µè¾¹ç¼˜çš„ç›´çº¿â€œç¿»æŠ˜â€ï¼Œå¿…é¡»ä¿è¯ç¿»æŠ˜åé‡åˆçš„ä¸¤ä¸ªé¢ä¸Šçš„å¯¹åº”å…ƒç´ ç›¸åŒã€‚é—®ä½ ç»è¿‡ä¸€ç³»åˆ—ç¿»æŠ˜æ“ä½œåï¼Œå¯èƒ½äº§ç”Ÿå¤šå°‘ä¸åŒçš„çŸ©é˜µã€‚å¦‚æœä¸¤ä¸ªçŸ©é˜µå¤§å°ã€å…ƒç´ ç›¸åŒï¼Œä½†æ˜¯å¯¹äºæœ€åˆå¤§çŸ©é˜µå·¦ä¸Šè§’åæ ‡ä¸åŒï¼Œåˆ™è¿™ä¸¤ä¸ªçŸ©é˜µä¸åŒã€‚<br>æ•°æ®èŒƒå›´ $1\leqslant n,m \leqslant 50$ã€‚</p><blockquote><ul><li>paper will contain between 1 and 50 elements, inclusive.</li><li>Each element of paper will contain between 1 and 50 elements, inclusive.</li><li>All elements of paper will have the same length.</li><li>paper will contain only characters '0' and '1'.</li><li>Time limit (s): 2.000</li><li>Memory limit (MB): 256</li><li>Stack limit (MB): 256</li></ul></blockquote><h2>Examples</h2><p>æ ·ä¾‹é›¶ï¼š</p><pre><code>{&quot;10&quot;,
 &quot;11&quot;}</code></pre><p>Returns: <code>1</code></p><p>è¿™å¼ çº¸æ ¹æœ¬æ²¡æ³•æŠ˜ã€‚</p><blockquote>There is no valid way to fold this paper, so there is just one possible outcome.</blockquote><p>æ ·ä¾‹ä¸€ï¼š</p><pre><code>{&quot;1111111&quot;,
 &quot;1111111&quot;}</code></pre><p>Returns: <code>84</code></p><p>è¿™å¼ çº¸å¯ä»¥éšä¾¿æŠ˜ã€‚ä¸€å…±æœ‰ 84 ç§æ–¹æ¡ˆã€‚</p><blockquote>We can fold it into any of the 84 possible subrectangles of the original rectangle.</blockquote><p>æ ·ä¾‹ä¸‰ï¼š</p><pre><code>{&quot;0110&quot;,
 &quot;1001&quot;,
 &quot;1001&quot;,
 &quot;0110&quot;}</code></pre><p>Returns: <code>9</code></p><p>æ¨ªç€ã€ç«–ç€éƒ½å¯ä»¥æ²¿ä¸­çº¿å¯¹æŠ˜ï¼Œå…± 9 ç§æ–¹æ¡ˆã€‚</p><h2>Original</h2><blockquote>Little Petya likes puzzles a lot. Recently he has received one as a gift from his mother. The puzzle has the form of a rectangular sheet of paper that is divided into N rows by M columns of unit square cells. Rows are numbered 0 through N-1 from top to bottom, and columns 0 through M-1 from left to right. Each cell is colored either black or white. You are given a description of the paper, the exact format is specified at the end of this problem statement.  The goal of the puzzle is to fold the paper. This has to be done in a sequence of turns. In each turn, Petya has to fold the paper according to the rules below. He can end the process after any number of turns (including zero), even if there are still valid ways to fold the paper.  In each turn, Petya must follow these steps: To start folding, he must choose a line that is parallel to one of the sides of the paper and passes between two rows/columns of cells. He can then take the smaller part of the paper and fold it on top of the larger part. (If the line divides the current paper in half, he can fold either half on top of the other.) There is one additional restriction: Petya may only perform the fold if all cells of the part that is being folded land on equally-colored cells of the part that remains in place.  For example, consider the following paper (with 0 and 1 representing white and black):<br>10010101<br>11110100<br>00000000<br>01101110<br>Here, Petya could choose the vertical line that goes between the two leftmost columns and the rest of the paper. Note that this is a valid choice: as he makes the fold, the cells from the leftmost two columns will all match their counterparts in the right part of the paper. This is how the paper looks like after the fold (with periods representing empty spaces):<br>..010101<br>..110100<br>..000000<br>..101110<br>Clearly, even after multiple folds the paper will always look like a subrectangle of the original paper. Two states of the game are considered the same if that rectangle has the same dimensions and the same offset with respect to the original top left corner of the paper. (Note that folding order does not matter. Two different sequences of folding may produce the same final state.)  You are given a description of the original state of the paper as a vector <string> paper. Here N is the number of elements in paper and M is the length of its each element. For each i and j, the character paperi is either '0' (meaning that the cell (i,j) is white) or '1' (the cell is black). Compute and return the number of possible final states of the game.</blockquote><h2>Analysis</h2><p>é¦–å…ˆå¿…é¡»æƒ³æ˜ç™½ä¸€ä¸ªå¾ˆé‡è¦çš„ç»“è®ºï¼ˆå…¶å®åŸé¢˜é¢˜ç›®é‡Œéƒ½æç¤ºä½ äº†ï¼‰ï¼š<strong>æ¨ªå‘ç¿»æŠ˜ä¸çºµå‘ç¿»æŠ˜æ˜¯ç‹¬ç«‹çš„</strong>ã€‚ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬å¯ä»¥å…ˆå¤„ç†æ¨ªå‘ç¿»æŠ˜çš„æƒ…å†µï¼Œå¾—å‡ºæ–¹æ¡ˆæ•°ï¼Œå†å¤„ç†çºµå‘ç¿»æŠ˜ï¼Œ<strong>æœ€åä¸¤è€…ç›¸ä¹˜å°±æ˜¯ç­”æ¡ˆ</strong>ã€‚<br>æœ‰äº†è¿™ä¸ªç»“è®ºï¼Œé—®é¢˜å°±å¾ˆç®€å•äº†ã€‚æˆ‘ä»¬ç›´æ¥åšä¸€æ¬¡åŒºé—´ DP å°±å¯ä»¥æ–¹ä¾¿åœ°å¾—å‡ºç¿»æŠ˜æ–¹æ¡ˆæ•°ï¼Œç´¯è®¡å³å¯ã€‚</p><h2>Code</h2><p>ä»£ç å®ç°èµ·æ¥æœ‰ç‚¹å¤æ‚ï¼Œä½†æ˜¯åªè¦æ€è·¯æ¸…æ™°å…¶å®å¹¶ä¸éš¾ã€‚</p><pre><code class="lang-cpp">#include &lt;bits/stdc++.h&gt;
using namespace std;
const int maxn=55;
int n,m,ans1,ans2;
bool vis[maxn][maxn]; // vis[i][j]: ç¬¬iä¸ªcellå¼€å§‹çš„ä¸€æ®µé•¿åº¦ä¸ºjçš„é—­åŒºé—´èƒ½å¦ä¸i+j+1å¼€å§‹çš„ä¸€æ®µç­‰é•¿çš„é—­åŒºé—´åŒ¹é…
// å³[i,i+j]ä¸[i+j+1,i+2*j+1]ä¸¤æ®µåŒºé—´çš„cellsæ˜¯å¦å¯¹ç§°
// æ³¨æ„jæ˜¯æ•´ä¸ªåŒºé—´åŠé•¿
bool f[maxn][maxn]; // F[i][j]: èƒ½å¦æŠ˜å å¾—åªå‰©[i,j]åŒºé—´
class BoardFoldingDiv2 {
public:
    int howMany( vector &lt;string&gt; paper );
};
inline bool Check(int x,int y,bool mode,vector &lt;string&gt; paper){ // éªŒè¯ä¸¤è¡Œ/ä¸¤åˆ—æ˜¯å¦ç›¸åŒçš„å‡½æ•°
    // mode: ç«–å‘éªŒè¯(true)(||)æˆ–æ¨ªå‘éªŒè¯(false)(=)
    if (mode){
        for (int i=0;i&lt;n;i++) if (paper[i][x]!=paper[i][y]) return false;
        // printf(&quot;Check Succesful: %d %d\n&quot;,x,y);
        return true;
    } else {
        for (int i=0;i&lt;m;i++) if (paper[x][i]!=paper[y][i]) return false;
        return true;
    }
    return false;
}
int BoardFoldingDiv2::howMany(vector &lt;string&gt; paper) {
    n=paper.size();
    if (n==0) return 0;
    m=paper[0].length();

    // Part 1: build ans1 -------------------------------

    memset(vis,0,sizeof(vis));
    for (int i=0;i&lt;m-1;i++) vis[i][1]=Check(i,i+1,true,paper);
    for (int L=3;L&lt;=m;L+=2)
    for (int i=0;i&lt;m-L;i++){
        int j=i+L;
        if ((j&gt;=m)||(!vis[i+1][L/2])) continue;
        vis[i][(L+1)/2]=Check(i,j,true,paper);
    }

    memset(f,0,sizeof(f));
    f[0][m-1]=true;
    for (int L=m-1;L&gt;=0;L--)
    for (int i=0;i&lt;m-L;i++){
        int j=i+L;
        if (j&gt;=m) continue;
        for (int k=i;(k&lt;=j)&amp;&amp;(!f[i][j]);k++){
            if ((j+(j-k+1)&lt;m)&amp;&amp;(vis[k][j-k+1])){ // å…ˆè€ƒè™‘å³è¾¹ä¸€å—å‘å·¦è¾¹æŠ˜å æƒ…å†µ
                f[i][j]|=f[i][j+(j-k+1)];
            }
            if ((i-(k-i+1)&gt;=0)&amp;&amp;(vis[i-(k-i+1)][k-i+1])){ // å·¦è¾¹ä¸€å—å‘å³æŠ˜å 
                f[i][j]|=f[i-(k-i+1)][j];
            }
        }
    }
    ans1=0;
    for (int i=0;i&lt;m;i++)
    for (int j=i;j&lt;m;j++) ans1+=f[i][j];
    if (m==1) ans1=1;

    // Part 2: build ans2 -------------------------------

    memset(vis,0,sizeof(vis));
    for (int i=0;i&lt;n-1;i++) vis[i][1]=Check(i,i+1,false,paper);
    for (int L=3;L&lt;=n;L+=2)
    for (int i=0;i&lt;n-L;i++){
        int j=i+L;
        if ((j&gt;=n)||(!vis[i+1][L/2])) continue;
        vis[i][(L+1)/2]=Check(i,j,false,paper);
    }

    memset(f,0,sizeof(f));
    f[0][n-1]=true;
    for (int L=n-1;L&gt;=0;L--)
    for (int i=0;i&lt;n-L;i++){
        int j=i+L;
        if (j&gt;=n) continue;
        for (int k=i;(k&lt;=j)&amp;&amp;(!f[i][j]);k++){
            if ((j+(j-k+1)&lt;n)&amp;&amp;(vis[k][j-k+1])){ // å…ˆè€ƒè™‘ä¸‹é¢ä¸€å—å‘ä¸Šè¾¹æŠ˜å æƒ…å†µ
                f[i][j]|=f[i][j+(j-k+1)];
            }
            if ((i-(k-i+1)&gt;=0)&amp;&amp;(vis[i-(k-i+1)][k-i+1])){ // ä¸Šé¢ä¸€å—å‘ä¸‹æŠ˜å 
                f[i][j]|=f[i-(k-i+1)][j];
            }
        }
    }
    ans2=0;
    for (int i=0;i&lt;n;i++)
    for (int j=i;j&lt;n;j++) ans2+=f[i][j];
    if (n==1) ans2=1;

    // printf(&quot;ANS1=%d  ANS2=%d\n&quot;,ans1,ans2);
    return ans1*ans2;
}</code></pre> </article> <hr class="my-8" data-astro-cid-4sn4zg3r> <h2> <i class="ri-discuss-line"></i> å…± 0 æ¡è¯„è®º </h2>  <hr class="my-8"> <h2> <i class="ri-discuss-line"></i>
å‘è¡¨è¯„è®º
</h2> <p class="primary-color card my-4 p-2">
ğŸš§ æ–°åšå®¢ç³»ç»Ÿçš„è¯„è®ºåŠŸèƒ½ä»åœ¨å¼€å‘ä¸­ï¼Œæ•¬è¯·æœŸå¾…ã€‚å¯ä»¥å‰å¾€<a href="https://blog.skywt.cn/posts/tc-639-div2-t3" class="link underline">åŸåšå®¢çš„è¿™ç¯‡æ–‡ç« </a>åº•éƒ¨è¯„è®ºåŒºå‘è¡¨è¯„è®ºã€‚
</p> </section> </main>  <footer class="mt-16 py-8 bg-gray-100 dark:bg-neutral-900"> <div class="wide-container secondary-color text-sm"> <div class="m-2 flex justify-between flex-wrap"> <div class="m-2"> <a class="link" href="/"> SkyWT</a> <span> / åšå®¢</span><span> / Topcoder SRM 639 Div2 T3 BoardFoldingDiv2 é¢˜è§£</span> </div> <div class="m-2"> <ul data-astro-cid-tfcnbjmv> <li data-astro-cid-tfcnbjmv> <a class="link" href="/" data-astro-cid-tfcnbjmv> 
ä¸»é¡µ
</a> </li> <li data-astro-cid-tfcnbjmv> <a class="link" href="/blog" data-astro-cid-tfcnbjmv>  åšå®¢ </a> </li><li data-astro-cid-tfcnbjmv> <a class="link" href="/lab" data-astro-cid-tfcnbjmv>  å®éªŒå®¤ </a> </li><li data-astro-cid-tfcnbjmv> <a class="link" href="/friends" data-astro-cid-tfcnbjmv>  å‹äºº </a> </li><li data-astro-cid-tfcnbjmv> <a class="link" href="/about" data-astro-cid-tfcnbjmv>  å…³äº </a> </li> </ul>  </div> </div> <hr> <div class="m-2 flex justify-between flex-wrap"> <p class="m-2">
&#169; 2017-2024 <a href="https://skywt.cn/" class="link">SkyWT</a> /
<a href="https://www.beian.gov.cn/portal/registerSystemInfo?recordcode=33080202000472" target="_blank" class="link before:content-[url('/mps.png')] before:align-middle">
æµ™å…¬ç½‘å®‰å¤‡33080202000472å·</a> /
<a href="https://beian.miit.gov.cn/" target="_blank" class="link">
æµ™ICPå¤‡2021019606å·-1
</a> </p> <div class="m-2"> <a href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank" class="inline-block mx-1" data-astro-cid-h3ykra2n> <img class="icon" src="/cc/cc.svg" data-astro-cid-h3ykra2n> <img class="icon" src="/cc/by.svg" data-astro-cid-h3ykra2n> <img class="icon" src="/cc/nc.svg" data-astro-cid-h3ykra2n>   </a>  <a href="https://notbyai.fyi" target="_blank" class="inline-block mx-1" data-astro-cid-hwbnc4sm> <img src="/not-by-ai-light.svg" alt="Not By AI Badge" class="badge inline-block dark:hidden" data-astro-cid-hwbnc4sm> <img src="/not-by-ai-dark.svg" alt="Not By AI Badge" class="badge hidden dark:inline-block" data-astro-cid-hwbnc4sm> </a>  <a href="https://www.foreverblog.cn/" target="_blank" class="inline-block mx-1"> <img src="https://img.foreverblog.cn/logo_en_default.png" alt="Forever Blog Badage" class="inline-block h-4 grayscale"> </a> </div> </div> </div> </footer> </body></html> 