<!DOCTYPE html><html> <head><meta charset="UTF-8"><meta name="description" content="Astro description"><meta name="viewport" content="width=device-width"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><meta name="generator" content="Astro v4.1.1"><title>æ¹–å¤§ä¸ªäººé—¨æˆ·ç™»å½•æµ…æä¸å®ç°</title><link rel="stylesheet" href="https://fonts.loli.net/css2?family=Noto+Serif+SC:wght@200;300;400;500;600;700;900&display=swap"><script>
      function addMatomo() {
        var _paq = (window._paq = window._paq || []);
        _paq.push(["trackPageView"]);
        _paq.push(["enableLinkTracking"]);
        (function () {
          var u = "//analytics.skywt.cn/";
          _paq.push(["setTrackerUrl", u + "matomo.php"]);
          _paq.push(["setSiteId", "1"]);
          var d = document,
            g = d.createElement("script"),
            s = d.getElementsByTagName("script")[0];
          g.async = true;
          g.src = u + "matomo.js";
          s.parentNode.insertBefore(g, s);
        })();
      }

      document.addEventListener(
        "astro:page-load",
        () => {
          addMatomo();
        },
        { once: false }
      );
    </script><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><link rel="stylesheet" href="/_astro/about.IRO33uA2.css" />
<style>img[data-astro-cid-4sn4zg3r]{border-radius:.25rem;--tw-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}
</style>
<link rel="stylesheet" href="/_astro/friends.0bZnSjYD.css" /><script type="module" src="/_astro/hoisted.-OpaiJNX.js"></script></head> <body> <header class="mt-12 wide-container" data-astro-cid-3ef6ksr2> <h5 class="mt-4 mx-4 secondary-color sm:hidden text-center" data-astro-cid-3ef6ksr2> <a href="/" class="link">SkyWT</a> <span>
/
<a href="/blog" class="link"> åšå®¢</a> </span><span>
/
æ¹–å¤§ä¸ªäººé—¨æˆ·ç™»å½•æµ…æä¸å®ç° </span> </h5> </header> <nav class="py-2 font-thin sticky top-0 backdrop-blur-md z-10 transition-all" id="navbar-wrapper" data-astro-cid-3ef6ksr2> <div class="wide-container flex justify-center sm:justify-between flex-wrap" data-astro-cid-3ef6ksr2> <h5 class="m-2 hidden sm:block secondary-color" data-astro-cid-3ef6ksr2> <a href="/" class="link">SkyWT</a> <span>
/
<a href="/blog" class="link"> åšå®¢</a> </span><span>
/
æ¹–å¤§ä¸ªäººé—¨æˆ·ç™»å½•æµ…æä¸å®ç° </span> </h5> <div class="m-2 secondary-color" data-astro-cid-3ef6ksr2> <ul data-astro-cid-tfcnbjmv> <li data-astro-cid-tfcnbjmv> <a class="link" href="/" data-astro-cid-tfcnbjmv> <i class="ri-home-line" data-astro-cid-tfcnbjmv></i>
ä¸»é¡µ
</a> </li> <li data-astro-cid-tfcnbjmv> <a class="link" href="/blog" data-astro-cid-tfcnbjmv> <i class="ri-newspaper-line" data-astro-cid-tfcnbjmv></i> åšå®¢ </a> </li><li data-astro-cid-tfcnbjmv> <a class="link" href="/lab" data-astro-cid-tfcnbjmv> <i class="ri-server-line" data-astro-cid-tfcnbjmv></i> å®éªŒå®¤ </a> </li><li data-astro-cid-tfcnbjmv> <a class="link" href="/friends" data-astro-cid-tfcnbjmv> <i class="ri-contacts-line" data-astro-cid-tfcnbjmv></i> å‹äºº </a> </li><li data-astro-cid-tfcnbjmv> <a class="link" href="/about" data-astro-cid-tfcnbjmv> <i class="ri-cup-line" data-astro-cid-tfcnbjmv></i> å…³äº </a> </li> </ul>  </div> </div> </nav> <script>
  // ä½¿ç”¨ ViewTransition åï¼Œæ‰€æœ‰ DOM æ“ä½œçš„ js éƒ½æœ‰ä¸€å †é—®é¢˜
  // è¿™é‡Œç”¨äº†æä¸ä¼˜é›…çš„ varï¼Œæœ‰å¾…æ”¹è¿›
  var observer;
  function addNavObserver() {
    const headerEl = document.querySelector("#navbar-wrapper");
    const sentinalEl = document.querySelector("header");
    if (!sentinalEl || !headerEl) return;
    observer = new window.IntersectionObserver((e) => {
      if (!e[0].isIntersecting) {
        headerEl.classList.add("sticked");
      } else {
        headerEl.classList.remove("sticked");
      }
    });
    observer.observe(sentinalEl);
  }

  function removeNavObserver() {
    if (observer) observer.disconnect();
    observer = null;
  }

  document.addEventListener(
    "astro:page-load",
    () => {
      addNavObserver();
    },
    { once: false },
  );

  document.addEventListener(
    "astro:before-swap",
    () => {
      removeNavObserver();
    },
    { once: false },
  );
</script>   <main data-astro-cid-4sn4zg3r> <section class="container mt-8 sm:mt-32" data-astro-cid-4sn4zg3r>  <h1 class="primary-color leading-relaxed" data-astro-cid-4sn4zg3r>æ¹–å¤§ä¸ªäººé—¨æˆ·ç™»å½•æµ…æä¸å®ç°</h1> <p class="mt-4 secondary-color leading-relaxed" data-astro-cid-4sn4zg3r> <i class="ri-calendar-line" data-astro-cid-4sn4zg3r></i> <span data-astro-cid-4sn4zg3r>2022 å¹´ 05 æœˆ 13 æ—¥</span>   <br data-astro-cid-4sn4zg3r> <i class="ri-discuss-line" data-astro-cid-4sn4zg3r></i> <span data-astro-cid-4sn4zg3r>å…± 3 æ¡è¯„è®º</span>  </p> <hr class="my-8" data-astro-cid-4sn4zg3r> <p class="card p-2 my-8" data-astro-cid-4sn4zg3r>
âš™ï¸ å…¨æ–°åšå®¢å‰ç«¯ä»åœ¨æµ‹è¯•ä¸­ã€‚å¦‚æœæ–‡ç« æ˜¾ç¤ºä¸æ­£å¸¸ï¼Œå¯ä»¥å°è¯•è®¿é—®<a href="https://blog.skywt.cn/posts/hnu-portal-login-analysis-implementation" class="link underline" data-astro-cid-4sn4zg3r>åŸåšå®¢çš„è¿™ç¯‡æ–‡ç« </a>ã€‚
</p> <article class="content" data-astro-cid-4sn4zg3r> <p>æœ€åˆç›®çš„åªæ˜¯æƒ³çœ‹çœ‹ä¸ªäººé—¨æˆ·æŸ¥è¯¢å›¾ä¹¦é¦†å€Ÿé˜…ä¹¦ç±çš„æ¥å£ï¼Œå†™ä¸ªè¿˜ä¹¦æé†’çš„ç¨‹åºï¼ˆå› ä¸ºå€Ÿçš„ä¹¦æ€»æ˜¯å¿˜è®°è¿˜ï¼Œè¿‡æœŸäº†å›¾ä¹¦é¦†ä¸ä»…ä¸ä¼šæé†’è¿˜ä¸èƒ½ç›´æ¥ç»­å€Ÿï¼Œå¾—ä»˜æ»çº³é‡‘â€¦â€¦ï¼‰ï¼Œç»“æœå°±ä¸€å‘ä¸å¯æ”¶æ‹¾ï¼Œç ”ç©¶äº†ä¸€ä¸‹ HNU çš„ä¸ªäººé—¨æˆ·ç™»å½•é€»è¾‘å¹¶ç”¨ Python æµ…æµ…å®ç°äº†ä¸€ä¸‹ã€‚</p><!--more--><p><strong>âš ï¸ è­¦å‘Šï¼šæœ¬æ–‡ä»‹ç»çš„ç ”ç©¶è¯•éªŒä»…ä¾›å­¦ä¹ äº¤æµï¼Œè¯·å‹¿ç”¨äºä»»ä½•éæ³•ç”¨é€”ã€‚</strong></p><p>æç¤ºï¼šä¸ºäº†ä¿è¯è´¦å·å®‰å…¨æ€§ï¼Œæœ¬æ–‡ä¸­æ‰€æœ‰çš„ç¤ºä¾‹å­—ç¬¦ä¸²éƒ½è¿›è¡Œäº†ä¸€äº›å­—ç¬¦çš„ä¿®æ”¹ã€‚</p><p><img src="https://blog.skywt.cn/usr/uploads/2022/05/1036085568.png" alt="æ¹–å—å¤§å­¦ã€Œç»Ÿä¸€èº«ä»½è®¤è¯ã€æˆªå›¾" title="æ¹–å—å¤§å­¦ã€Œç»Ÿä¸€èº«ä»½è®¤è¯ã€æˆªå›¾"></p><p>ç ”ç©¶åœ°å€ï¼š<a href="http://cas.hnu.edu.cn/cas/login">http://cas.hnu.edu.cn/cas/login</a>ï¼Œå…¶å®æ˜¯ã€Œç»Ÿä¸€èº«ä»½è®¤è¯ã€ï¼Œåº”è¯¥æ˜¯æƒ³åšä¸€ä¸ªç±»ä¼¼ SSO çš„ä¸œè¥¿ã€‚éå¸¸ç¥å¥‡çš„æ˜¯è¿™ä¸ªç½‘ç«™ç›´æ¥ç”¨ https è®¿é—®ä¼šå‡ºé”™ï¼Œä½†æ˜¯ç™»å½•ä¹‹ååˆä¼šè·³è½¬ httpsã€‚</p><h2>æŒ‰ä¸‹ã€Œç™»å½•ã€ä¹‹å</h2><p>å®¡æŸ¥å…ƒç´ å¯ä»¥çœ‹åˆ°æ•´ä¸ªè¡¨å•çš„ HTML ä»£ç æ˜¯è¿™æ ·çš„ï¼š</p><pre><code class="lang-html">&lt;form id=&quot;fm1&quot; action=&quot;/cas/login&quot; method=&quot;post&quot; data-bitwarden-watching=&quot;1&quot;&gt;
    &lt;div class=&quot;form-group&quot;&gt;
        &lt;p class=&quot;error text-left&quot; id=&quot;errormsg&quot;&gt;&lt;/p&gt;
        &lt;div class=&quot;input-group&quot;&gt;
            &lt;div class=&quot;input-group-addon&quot;&gt;&lt;img src=&quot;assets/images/user.png&quot;&gt;&lt;/div&gt;
            &lt;input id=&quot;username&quot; name=&quot;username&quot; class=&quot;form-control user-input&quot; tabindex=&quot;1&quot; placeholder=&quot;èŒå·¥å·/å­¦å·&quot; type=&quot;text&quot; value=&quot;&quot; size=&quot;25&quot; autocomplete=&quot;off&quot; data-com.bitwarden.browser.user-edited=&quot;yes&quot;&gt;
            &lt;input type=&quot;button&quot; id=&quot;sendsms&quot; class=&quot;btn btn-primary get-code-btn&quot; value=&quot;è·å–åŠ¨æ€å£ä»¤&quot; style=&quot;display:none&quot;&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class=&quot;form-group&quot;&gt;
        &lt;div class=&quot;input-group&quot;&gt;
            &lt;div class=&quot;input-group-addon&quot;&gt;&lt;img src=&quot;assets/images/lock.png&quot;&gt;&lt;/div&gt;
            &lt;input id=&quot;password&quot; name=&quot;password&quot; class=&quot;form-control pwd-input&quot; tabindex=&quot;2&quot; onkeyup=&quot;CreateRatePasswdReq(this);&quot; placeholder=&quot;è¯·è¾“å…¥ä¸ªäººé—¨æˆ·å¯†ç &quot; type=&quot;password&quot; value=&quot;&quot; size=&quot;25&quot; autocomplete=&quot;off&quot; data-com.bitwarden.browser.user-edited=&quot;yes&quot;&gt;
            &lt;a class=&quot;forget-pwd&quot; target=&quot;_blank&quot; href=&quot;http://cas.hnu.edu.cn/securitycenter/findPwd/index.zf&quot;&gt;å¿˜è®°å¯†ç &lt;!--å¿˜è®°ç™»å½•å¯†ç  ?--&gt; &lt;/a&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class=&quot;code&quot; id=&quot;kaptcha&quot; style=&quot;display: none;&quot;&gt;
        &lt;!--
        &lt;div class=&quot;col-xs-2 text-left p-r-0 code-text&quot;&gt;
            &lt;span&gt;éªŒè¯ç  &lt;/span&gt;
        &lt;/div&gt;--&gt;
        &lt;div&gt;
            &lt;div class=&quot;col-xs-5&quot; style=&quot;border:1px solid #777777;&quot;&gt;
                &lt;input id=&quot;authcode&quot; name=&quot;authcode&quot; class=&quot;form-control&quot; tabindex=&quot;2&quot; style=&quot;text-align:center;&quot; placeholder=&quot;è¾“å…¥éªŒè¯ç &quot; type=&quot;text&quot; value=&quot;&quot; size=&quot;10&quot; autocomplete=&quot;off&quot;&gt;
            &lt;/div&gt;
            &lt;div class=&quot;col-xs-7 p-0 code-img&quot;&gt;&lt;img id=&quot;yzmPic&quot; onclick=&quot;javascript:refreshCode();&quot; class=&quot;&quot; src=&quot;kaptcha?time=1652268176109&quot;&gt;
                &lt;a href=&quot;javascript:refreshCode();&quot;&gt;
                    çœ‹ä¸æ¸…&lt;!--çœ‹ä¸æ¸… ?--&gt; &lt;/a&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class=&quot;login-info row&quot;&gt;
        &lt;div class=&quot;col-lg-12 col-md-12 col-sm-12 col-xs-12  login-button&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;btn btn-block btn-primary login-btn&quot; id=&quot;dl&quot;&gt;ç™» å½• &lt;/button&gt;&lt;/div&gt;
        &lt;div class=&quot;col-lg-3 col-md-3 col-sm-3 col-xs-4 remember-me &quot; style=&quot;display:none;&quot;&gt;
            &lt;input class=&quot;default-checkbox checkbox&quot; type=&quot;checkbox&quot; name=&quot;rememberMe&quot; value=&quot;true&quot; id=&quot;rember&quot;&gt;
            &lt;label for=&quot;rember&quot;&gt;è®°ä½æˆ‘ &lt;/label&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;input type=&quot;hidden&quot; name=&quot;execution&quot; value=&quot;9e4a732f-501e-4dee-8a8f-2e6a9faedb4a_ZXlKaGJHY2lPaUpJVXpVeE1pSjkuUTNaUWVrNXVRMVl6WVhWM2EwMWlWbnAyWkM5MFZHdFdjbUoyU2pFMmFFTk1iSHBEWWxoemMzcDFOMlZEZDNZclZrZElka05MTjBkUFpraDFTR1V6VmxCNVVUTkhMMjVsWXpRNFpUQktOMk4yVTA1VVExWnBUV2RZUzJWUFpVTTBPSEpOUm1sSVJUZ3lOMUJ4Tm1OdldrNW9jRTVsTWtwcFpYVm9PRGRhYlROek5tOVVlVW80ZUhaMGJUVkJhREZpVUdrMEwwbGxlbFZKVkVKS1VUUjFMMUZXZUZSYWRVOVdaVkZTTVVNclIyWXlNVU0wZFVKVlNVRXlRbEE1UVdrNWIzQnVZMjVHVVN0M1JtUmhhMXBNUzA4NGRFdzVTbFpLTlVFMlUwRm9UMVIyV2pCUWIzTkxhRnBGVlVkNVlucFFVVmxJVVcwemJrUlVVRGwwTkRBMlZtVndjQzhyT0c0cmRpdFdXV0pWVm5KUWJFTjNhRFJXVFdKUWFWWjJVM2xMWkhSNVkyRk5XVW8zYUVNelRFWmtVUzlMZEU1QlVqY3paMUUzV0d0VllUZHVWRU5GUkdsb2VXUnZWbVVyVVdaRU5IRm1kbk5aWjFKR05WaExWMUl3YkdFcmJUWlFaMVZhVFhVNVNuSjFPRXN5V0doaEx6WnphekJIVFZvd1N6WXZRVWQ1TTBoM1lUSTBRV3RsVmxWYVdFZHRTUzlJVkVWTVptOUdjMm9yTkdSdk5VdHdkbTlqY25wYVluUnRaRGR3YmxCRVFtUlBWR1YyZEVKS1ZFczVhMVJDYlRGek9VZDVkVEpRYnpsYWNsWTNNVEozVm5CaVZsb3ZMMlpUT0hoR1ZrRkdOM1JKTkRCcGNITmxhRzh4VFd4b2VGZHpOaXMyWm1oR1IyRjNVa1lyY201clkyNTNSSEJsZEVkaGIxSkxkVkZaUW5KTFlscExjaXRYYTBSa1FqazRZalk0ZFVsTWFTc3ZUazFUVlhSTGRUVndUMlVyYWxsUVRHOTNkbEZrUjFOcEsxaEtlbUl6TXpWUVNERXhZelZRVEZkVlMxRk5VbFJqVVZkQ2FtMVhTa1JEZDBkdk5WbHpkV1Z1Y0dsM1UwVkliekZaVjFaNWVUaGliVTVZUW00MWFVTlFUbWQzY1daUk1YQjBPV0p1YzJaNmMwOVdPV0UwU0ZScEsyY3dZWE5LWjBOMGRWWnlkREV5TnpGd1ZFZFpkalJOU0RrMFQzWkZUR1JKVFVsamVtSkhWWGwxV2xoaGVreFJRV3BIT0dKdE5FVk9PVUZKVFVrM2RVVkRWa2tyT0N0SU5VUlNWMFJUWVUxTU5WSkVVemsyUm5nMlVFMXBVbEpyWldoU2JFSk9jM2g1YWs1cFZGQkhha3BKZEVsSGNHTTFhVGxSWVdGR1JrczFjSGRhVTJoaVVXMW1NVkpsUm1NMVRYY3pNMEk1T0N0SlMwTm9OVzlKZWtWQlRHZDBVMGh0TVdGek5WUTBiV3BaVDBVMmJWazBXbU56T0hWeFpUSktWbVV2Y0RsUGEwdGllVlprTldaVmVFUjFOa3RoUTNCWk5YZGpkSG81UkVoSVYyZzBkVXgwYWxaTmFuY3lXa1pWU1VoeUwycHFUWGRpWTFCQ2RrZ3hSMWg1VUhvdmQxY3pUa1EzWW5oQlEyNHZSa1JuV2tKNFNsWlhaVmRXYUhWc1lqQjZRekpSVmpKcVNrdHJURzlqZWxGRk0wSkxaVU52Y0hNMlRtVmhkMWhOV1VodmEzaFVZMHRKTm5FemJHdExjazVLVUhoV1VUaE5NazVCWkZGWk1qVndiRTB3T1RKVGFrZHRiMDFtV25WbFlXSlJNMWg0YkRCc1kwNVhjbnBUYVROblVWTjVha01yVW14d1MyRktXRmhSV1ZkbWJsRkVaRGhFV1ROR1VEWlpZVnAyYWtkR2NVMUZTR1ExY1ZCM2VVTlZObkJPTVZwNlF5dDFWR3BIZEZORk5WcEhiazFpUVhWRGRtZHpjbU51ZFhWMmNHOVphVlZLTUhRMk5sZ3lLMmRCZUd4Qk16Y3hjbkpoUVdoVlYzUXZhVkk1TVVGS2FERmtVRWw0ZWtkdlVVRlNZVE5LV2t3emVqVjZTazF3TjFSdFJGZzBPVm9yT1hCNFNpdEJVbXMxU0hWWWJWcFBhMVY1VmxkTU1TdHlkVXRrTVdoa01FOTZhMmhOTUhnMWVrVmpTbHB6YlZjd0sweFdkRXBYV1UweVpESkJkRWwyWWxOM1YyMUpTME01VVRsc1VuRjZWVk5OS3prNEwzbEZLM2xzYzNoVVpHZEliMUkxZVhKTWRUbHNObE5pVkdOYVV6ZFlVWE41TTB0blJ6bE1iMFJCVmxkMVIzcHFaRFJpVTBoWGVHVkpXWEY1VkVaWGR6TmFWMDlwVTNoYVlXbHNkWFJUUkVvMGVXdHBVV3QwZVVSUU16SkllR2xXYlcxUmJHaHlSMmR6ZG5SdE1WbHpZV0pZVEhOalkxbDFNRXB0VmxCWFF6Sk5RWFZpZDBsUVJUZFJWMkZ3UWxka01qVjZVbXBqZFhRMk1HUjRjRnBrU1hFM1lWb3pZV3hSVkU5SlJFUkdkMU0yTlU1VGJFeHlZMUpVYUZnMVJISmhNRVl5Y0RSUFltUnNSVW93VFhwT1ZWZzBkV3RESzNwNFNFTjFSR1ZxVUhkNmFtdGlVR0ZxU1RGVE1rUmhMMVpRTUhOUWIwcEQuMXNRWGZiNDlvbUJhLW9HYV9lbGpfMTF0WDdHVmJzMzVZb3ZkVEE0eHkweHR5azVWanBLS2VfbW5XSjZkeTdlZEV0SDNfQ3dTTkRYX3dvMFNGRWdEQUE=&quot;&gt;
    &lt;input type=&quot;hidden&quot; name=&quot;_eventId&quot; value=&quot;submit&quot;&gt;
&lt;/form&gt;</code></pre><p>æ•´ä¸ªè¡¨å•çš„ id æ˜¯ <code>fm1</code>ï¼Œå¯ä»¥çœ‹åˆ°å…¶ä¸­ã€Œç™»å½•ã€æŒ‰é’®ç»„ä»¶ id ä¸º<code>dl</code>ã€‚</p><p><img src="https://blog.skywt.cn/usr/uploads/2022/05/2711591586.png" alt="æ–‡ä»¶æ ‘" title="æ–‡ä»¶æ ‘"></p><p>æŸ¥çœ‹æ–‡ä»¶æ ‘ï¼Œæˆ‘ä»¬å¤§æ¦‚å¯ä»¥çŒœåˆ° <code>/cas/js/login/login.js</code> æ˜¯è´Ÿè´£å¤„ç†ç™»å½•æ“ä½œçš„ä»£ç ï¼Œ<code>pwdYz.js</code> ç”¨æ¥éªŒè¯å¯†ç çš„å¼ºåº¦ï¼Œ<code>security.js</code> æ˜¯ä¸‹é¢ä¼šç”¨åˆ°çš„ RSA åŠ å¯†ç®—æ³•çš„ä»£ç ã€‚</p><p>æŒ‰ä¸‹è¿™ä¸ªç™»å½•æŒ‰é’®ä¹‹åä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥çœ‹åˆ° <code>login.js</code> ä¸­æœ‰è¿™æ ·ä¸€æ®µä»£ç ï¼š</p><pre><code class="lang-js">jQuery.getJSON(&quot;v2/getPubKey&quot;,function(data){
    Modulus = data[&quot;modulus&quot;];
    public_exponent = data[&quot;exponent&quot;];
});

// ...

$(&quot;#dl&quot;).click(function(){
    checkForm();
})

// ...

function checkForm(){
    // ...
    var password = $(&quot;#password&quot;).val();
    var key = new RSAUtils.getKeyPair(publice_exponent, &quot;&quot;, Modulus);
    var reversedPwd = password.split(&quot;&quot;).reverse().join(&quot;&quot;);
    var encrypedPwd = RSAUtils.encryptedString(key,reversedPwd);
    $(&quot;#password&quot;).val(encrypedPwd);
    $(&quot;#fm1&quot;).submit();
}</code></pre><p>å½“æŒ‰ä¸‹ <code>#dl</code> ä¹‹åï¼Œè°ƒç”¨ <code>checkForm()</code> å‡½æ•°ï¼Œå…ˆæ˜¯æ£€æŸ¥è¾“å…¥æ¡†æ˜¯å¦ä¸ºç©ºï¼Œç„¶åç”¨ä¸€äº›ç¥ç§˜çš„ RSA ç®—æ³•å°†ç”¨æˆ·è¾“å…¥çš„å¯†ç åˆæ­¥åŠ å¯†äº†ä¸€ä¸‹ï¼Œå†æäº¤è¡¨å•å‘è¯·æ±‚ã€‚</p><p>æ¯”è¾ƒé¬¼ç•œçš„æ˜¯è¿™é‡Œç›´æ¥æ”¹ password è¾“å…¥æ¡†çš„å†…å®¹ï¼Œå†ç”¨è¡¨å•æäº¤ï¼Œè¿™ä¼šå¯¼è‡´åœ¨ç‚¹å‡»æŒ‰é’®ä¹‹åå¯†ç æ¡†çš„å¯†ç çªç„¶å˜æˆä¸€é•¿ä¸²ä¹±ç ï¼Œä½¿å¾—ä¸€èˆ¬çš„å¯†ç ç®¡ç†å™¨æ€»æ˜¯è®°ä¸‹é”™è¯¯çš„å¯†ç â€¦â€¦ä¸çŸ¥é“ä¸ºå•¥è¦è¿™æ ·å†™ã€‚</p><p>è‡³äºè¿™é‡Œç”¨ RSA åŠ å¯†ç”¨åˆ°çš„å…¬é’¥ï¼Œä¹Ÿå°±æ˜¯ <code>Modulus</code> å’Œ <code>public_exponent</code> ä¸¤ä¸ªä¸œè¥¿ï¼Œå¯ä»¥çœ‹åˆ°æ˜¯äº‹å…ˆå‘ <code>v2/getPubKey</code> å‘è¯·æ±‚å–å¾—çš„ã€‚</p><h2>POST éƒ½å‘äº†äº›å•¥</h2><p>æ­£å¸¸ç™»å½•ä¹‹åæ‰¾åˆ°å‘ <code>/cas/login</code> å‘é€çš„ POST è¯·æ±‚ï¼Œå¯ä»¥çœ‹åˆ°æœ‰æ•ˆè½½è·æœ‰ä»¥ä¸‹å‡ ä¸ªï¼š</p><pre><code class="lang-js">username: 202108060109
password: 90c4e8b1be56a82f34df187379147d50bc694556c7451e8fd5c2a4047cf22385151cbc698ed84e0562915487e18f2420f4cb6c633149cef07d192a041038a73f
authcode: 
execution: 9e4a732f-501e-4dee-8a8f-2e6a9faedb4a_ZXlKaGJHY2lPaUpJVXpVeE1pSjkuUTNaUWVrNXVRMVl6WVhWM2EwMWlWbnAyWkM5MFZHdFdjbUoyU2pFMmFFTk1iSHBEWWxoemMzcDFOMlZEZDNZclZrZElka05MTjBkUFpraDFTR1V6VmxCNVVUTkhMMjVsWXpRNFpUQktOMk4yVTA1VVExWnBUV2RZUzJWUFpVTTBPSEpOUm1sSVJUZ3lOMUJ4Tm1OdldrNW9jRTVsTWtwcFpYVm9PRGRhYlROek5tOVVlVW80ZUhaMGJUVkJhREZpVUdrMEwwbGxlbFZKVkVKS1VUUjFMMUZXZUZSYWRVOVdaVkZTTVVNclIyWXlNVU0wZFVKVlNVRXlRbEE1UVdrNWIzQnVZMjVHVVN0M1JtUmhhMXBNUzA4NGRFdzVTbFpLTlVFMlUwRm9UMVIyV2pCUWIzTkxhRnBGVlVkNVlucFFVVmxJVVcwemJrUlVVRGwwTkRBMlZtVndjQzhyT0c0cmRpdFdXV0pWVm5KUWJFTjNhRFJXVFdKUWFWWjJVM2xMWkhSNVkyRk5XVW8zYUVNelRFWmtVUzlMZEU1QlVqY3paMUUzV0d0VllUZHVWRU5GUkdsb2VXUnZWbVVyVVdaRU5IRm1kbk5aWjFKR05WaExWMUl3YkdFcmJUWlFaMVZhVFhVNVNuSjFPRXN5V0doaEx6WnphekJIVFZvd1N6WXZRVWQ1TTBoM1lUSTBRV3RsVmxWYVdFZHRTUzlJVkVWTVptOUdjMm9yTkdSdk5VdHdkbTlqY25wYVluUnRaRGR3YmxCRVFtUlBWR1YyZEVKS1ZFczVhMVJDYlRGek9VZDVkVEpRYnpsYWNsWTNNVEozVm5CaVZsb3ZMMlpUT0hoR1ZrRkdOM1JKTkRCcGNITmxhRzh4VFd4b2VGZHpOaXMyWm1oR1IyRjNVa1lyY201clkyNTNSSEJsZEVkaGIxSkxkVkZaUW5KTFlscExjaXRYYTBSa1FqazRZalk0ZFVsTWFTc3ZUazFUVlhSTGRUVndUMlVyYWxsUVRHOTNkbEZrUjFOcEsxaEtlbUl6TXpWUVNERXhZelZRVEZkVlMxRk5VbFJqVVZkQ2FtMVhTa1JEZDBkdk5WbHpkV1Z1Y0dsM1UwVkliekZaVjFaNWVUaGliVTVZUW00MWFVTlFUbWQzY1daUk1YQjBPV0p1YzJaNmMwOVdPV0UwU0ZScEsyY3dZWE5LWjBOMGRWWnlkREV5TnpGd1ZFZFpkalJOU0RrMFQzWkZUR1JKVFVsamVtSkhWWGwxV2xoaGVreFJRV3BIT0dKdE5FVk9PVUZKVFVrM2RVVkRWa2tyT0N0SU5VUlNWMFJUWVUxTU5WSkVVemsyUm5nMlVFMXBVbEpyWldoU2JFSk9jM2g1YWs1cFZGQkhha3BKZEVsSGNHTTFhVGxSWVdGR1JrczFjSGRhVTJoaVVXMW1NVkpsUm1NMVRYY3pNMEk1T0N0SlMwTm9OVzlKZWtWQlRHZDBVMGh0TVdGek5WUTBiV3BaVDBVMmJWazBXbU56T0hWeFpUSktWbVV2Y0RsUGEwdGllVlprTldaVmVFUjFOa3RoUTNCWk5YZGpkSG81UkVoSVYyZzBkVXgwYWxaTmFuY3lXa1pWU1VoeUwycHFUWGRpWTFCQ2RrZ3hSMWg1VUhvdmQxY3pUa1EzWW5oQlEyNHZSa1JuV2tKNFNsWlhaVmRXYUhWc1lqQjZRekpSVmpKcVNrdHJURzlqZWxGRk0wSkxaVU52Y0hNMlRtVmhkMWhOV1VodmEzaFVZMHRKTm5FemJHdExjazVLVUhoV1VUaE5NazVCWkZGWk1qVndiRTB3T1RKVGFrZHRiMDFtV25WbFlXSlJNMWg0YkRCc1kwNVhjbnBUYVROblVWTjVha01yVW14d1MyRktXRmhSV1ZkbWJsRkVaRGhFV1ROR1VEWlpZVnAyYWtkR2NVMUZTR1ExY1ZCM2VVTlZObkJPTVZwNlF5dDFWR3BIZEZORk5WcEhiazFpUVhWRGRtZHpjbU51ZFhWMmNHOVphVlZLTUhRMk5sZ3lLMmRCZUd4Qk16Y3hjbkpoUVdoVlYzUXZhVkk1TVVGS2FERmtVRWw0ZWtkdlVVRlNZVE5LV2t3emVqVjZTazF3TjFSdFJGZzBPVm9yT1hCNFNpdEJVbXMxU0hWWWJWcFBhMVY1VmxkTU1TdHlkVXRrTVdoa01FOTZhMmhOTUhnMWVrVmpTbHB6YlZjd0sweFdkRXBYV1UweVpESkJkRWwyWWxOM1YyMUpTME01VVRsc1VuRjZWVk5OS3prNEwzbEZLM2xzYzNoVVpHZEliMUkxZVhKTWRUbHNObE5pVkdOYVV6ZFlVWE41TTB0blJ6bE1iMFJCVmxkMVIzcHFaRFJpVTBoWGVHVkpXWEY1VkVaWGR6TmFWMDlwVTNoYVlXbHNkWFJUUkVvMGVXdHBVV3QwZVVSUU16SkllR2xXYlcxUmJHaHlSMmR6ZG5SdE1WbHpZV0pZVEhOalkxbDFNRXB0VmxCWFF6Sk5RWFZpZDBsUVJUZFJWMkZ3UWxka01qVjZVbXBqZFhRMk1HUjRjRnBrU1hFM1lWb3pZV3hSVkU5SlJFUkdkMU0yTlU1VGJFeHlZMUpVYUZnMVJISmhNRVl5Y0RSUFltUnNSVW93VFhwT1ZWZzBkV3RESzNwNFNFTjFSR1ZxVUhkNmFtdGlVR0ZxU1RGVE1rUmhMMVpRTUhOUWIwcEQuMXNRWGZiNDlvbUJhLW9HYV9lbGpfMTF0WDdHVmJzMzVZb3ZkVEE0eHkweHR5azVWanBLS2VfbW5XSjZkeTdlZEV0SDNfQ3dTTkRYX3dvMFNGRWdEQUE=
_eventId: submit</code></pre><p>ç”±äºæ˜¯ç›´æ¥è¡¨å•æäº¤çš„è€Œä¸æ˜¯ç”¨ js å‘çš„è¯·æ±‚ï¼Œå¯ä»¥ç›´æ¥åœ¨ä¸Šé¢çš„ html ä»£ç é‡Œæ ¹æ® name æ‰¾åˆ°å„ä¸ªå­—æ®µæºäºå“ªé‡Œã€‚</p><ul><li><code>username</code> å°±æ˜¯ç”¨æˆ·åï¼ˆå³å­¦å·ï¼‰ã€‚</li><li><code>password</code> å°±æ˜¯åŠ å¯†åçš„ <code>encrypedPwd</code>ã€‚</li><li><code>authcode</code> æ˜¯å›¾ç‰‡éªŒè¯ç è¾“å…¥æ¡†ä¸­å†…å®¹ã€‚å›¾ç‰‡éªŒè¯ç æœ‰æ—¶å€™æ˜¾ç¤ºæœ‰æ—¶å€™ä¸æ˜¾ç¤ºï¼Œä¸æ˜¾ç¤ºæ—¶è¯¥å­—æ®µå°±ç•™ä¸ºç©ºã€‚å…·ä½“æ˜¾ç¤ºé€»è¾‘å°šä¸æ¸…æ¥šã€‚</li><li><code>execution</code> æºäºè¡¨å•ä¸­ä¸€ä¸ªä¸å¯è§çš„ input å…ƒç´ ï¼Œå€¼æ˜¯ä¸€ä¸²ä¹±ç ï¼Œæ¯æ¬¡åŠ è½½é¡µé¢å…¶å€¼ä¸åŒã€‚æ„ä¹‰ä¸æ˜ã€‚å¯èƒ½æ˜¯ä¸ JSESSIONID åŒ¹é…ç”¨äºæŸç§éªŒè¯æœºåˆ¶ã€‚</li><li><code>_eventId</code> ä¹Ÿæºäºä¸€ä¸ªä¸å¯è§çš„ input å…ƒç´ ï¼Œå€¼æ€»ä¸º <code>submit</code>ã€‚</li></ul><p>ä»¥ä¸Šäº”ä¸ªå­—æ®µéƒ½æ˜¯å¯ä»¥å¾—åˆ°çš„ã€‚</p><p>åŒæ—¶æ³¨æ„åˆ° POST ä¸­æºå¸¦äº†è‹¥å¹² Cookiesï¼š</p><pre><code class="lang-js">JSESSIONID=808D31AC4F6F45E8EA8D8F05E2C76C74.cas30;
_pv0=KI+EtIxj2UDs/BXMv0vdZmI5APblUZJyrVMXRSekKrN5+bfckHbJmzPKaku45uKVc02qmwhWAisV1fsVG3B6NScgp8RNOGmd3vjBGTnPy10/bkYnbNF7sxpkzKqxHuHG9iPSu9gAGf3p1fvnIE5iQQBicDhdYg6cDD/7J45Dzfr1K4UnL4KN7Ph79o3hPCz8++7ECbXgABbOJU5SdCX5KSPkfPP9GcBqwzN1UYUu8Z6/6MGW12okSx4GO7J/j13A0E++BcNpeBdnSGAmI4Pdq4grl92whh8GkCGUzec84fdGx+hXn/w/uggLohZVKxGHkqrwKFYkT0uW2+hR7SZUQTWHH5oVcNqjKxJNUD5a2br0DdM9ethXox+DaTYD5bgeyidNqpgfDRDHTvvGda3r3r5CrwnYP/pmPXBslnllk5U=</code></pre><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸ºäº†æ¨¡æ‹Ÿå‘é€ POST è¯·æ±‚ï¼Œæˆ‘ä»¬è¦æ‹¿åˆ°äº”ä¸ªè¡¨å•å­—æ®µå†…å®¹ã€ä¸¤ä¸ª Cookieã€‚</p><h3>JSESSIONID</h3><p>å¯ä»¥çœ‹åˆ°åœ¨æœ€åˆè½½å…¥ç™»å½•é¡µé¢çš„æ—¶å€™ï¼Œå°±å¸¦ä¸Šäº†ä¸€ä¸ª <code>Set-Cookie</code>ï¼š</p><pre><code class="lang-js">JSESSIONID=4736615D840602A1B50AF6D6298C3A1E.cas32;
  Path=/cas;
  HttpOnly</code></pre><p><code>JSESSIONID</code> æ˜¯ Servlet å®¹å™¨ï¼ˆtomcatï¼Œjettyï¼‰ç”¨æ¥è®°å½•ç”¨æˆ· session çš„ Cookieã€‚çœ‹èµ·æ¥å°±æ˜¯å®ƒäº†ã€‚</p><h3>getPubKey</h3><p>è§‚å¯Ÿå‘ç°ï¼Œé¡µé¢åœ¨åŠ è½½ä¹‹åå°±å‘ <code>v2/getPubKey</code> å‘é€äº†è¯·æ±‚ï¼Œå¯ä»¥å¾—åˆ°è¿™æ ·çš„è¿”å›æ•°æ®ï¼š</p><pre><code class="lang-json">{
  &quot;modulus&quot;:&quot;991d141f56c671c9c55d31c35ae55901faaeea8dd4be5b2e6d7e38274e9feada58a4c47a554dae2adb71a6618d42a9d6be817f9aa8f5eb8de53acc56be4e2473&quot;,
  &quot;exponent&quot;:&quot;10001&quot;
}</code></pre><p>è¿™ä¸¤ä¸ªåº”è¯¥æ˜¯ç”Ÿæˆå¯†é’¥å¯¹çš„å‚æ•°ï¼Œå…·ä½“åŸç†å°šä¸æ¸…æ¥šã€‚æ€»ä¹‹æ ¹æ®æ­¤å¯ä»¥ç”¨ä¸Šé¢çš„ä»£ç ç®—å‡ºç›¸åŒçš„ <code>encrypedPwd</code>ã€‚</p><p>åŒæ—¶è¿™ä¸ªè¯·æ±‚è¿˜åœ¨è¯·æ±‚å¤´ä¸­è¿”å›äº†ä»¥ä¸‹ <code>Set-Cookie</code>ï¼š</p><pre><code class="lang-js">_pv0=gd1g%2FkuF8nKPObhdqygtrVhcdleX1lJEhbjuFFpqPt42mTUyjKN4icZFlgsrcVJMQYzcP7QluP4NPDUstVZpiyzxnMC%2Bxvj5HZhcKUttP1DgSNgAolMMgwEJD6GMxvV%2FrgffR0SW3i5PDd%2B3p8kGGv57d3Fs0uEVuYa6rtKZpAFoL5k5b%2B8XYtrOqMiLr3RnKT26xLiBv70imOLmSrLn2qPtepFj3D9xxSU5cwzlKTk%2BUSXYowGZlcNo%2BvBsL9dOIy%2FvlI6x6A%2BdqY4RyQ6Ft9KGUnxpZgkSTsSMm86yevTh9YSnzVY%2F8eoz1HA2CsS6Vw6%2FKTSjavRHjVguJY7R7r5CsWa0gVtpF7IT1E1%2FE8qYp5VxDbYLIEVPs85xkjKRbyqg%2F7WkQS2OnV%2F02mCGWAoRtxKs7qD%2BNLSD8eL1aFA%3D;
  Domain=cas.hnu.edu.cn; Path=/</code></pre><p>äºæ˜¯ <code>_pv0</code> è¿™ä¸ª Cookie çš„é—®é¢˜è§£å†³äº†ã€‚</p><h3>å¯†ç åŠ å¯†</h3><p>è¿™ä¸ªå¯†ç åŠ å¯†ç®—æ³•ç”¨äº†ç›¸åŒç›®å½•ä¸‹çš„ <code>security.js</code> ä»£ç ï¼Œæ˜¯ä¸ªæºäº 1998 å¹´çš„ js åº“ï¼Œä½†æ˜¯å…·ä½“çœ‹ä¸æ‡‚ã€‚</p><p>è¿™æ®µæ³¨é‡Šé‡Œé¢è¯´äº†ä½œè€…ï¼Œå¯ä»¥å»<a href="https://ohdave.com/rsa/">å®˜ç½‘</a>çœ‹åˆ°è¿™ä¸ªä»£ç çš„ä»‹ç»ï¼š</p><pre><code class="lang-js">/*
 * RSA, a suite of routines for performing RSA public-key computations in JavaScript.
 * Copyright 1998-2005 David Shapiro.
 * Dave Shapiro
 * dave@ohdave.com 
 * changed by Fuchun, 2010-05-06
 * fcrpg2005@gmail.com
 */</code></pre><p>ä»£ç ä½œè€…å¹¶æ²¡æœ‰ç»™å‡ºå¯¹åº”çš„ Python ç‰ˆæœ¬ï¼Œå¦‚ä½•åœ¨ Python è„šæœ¬é‡Œå®ç°å‘¢ï¼Ÿ<strong>æœ‰å‡ ç§è§£å†³æ–¹æ¡ˆï¼ˆä»éš¾åˆ°æ˜“ï¼‰ï¼š</strong></p><ul><li>ç ”ç©¶åŠ å¯†åŸç†ï¼Œä½¿ç”¨ PyCryptoã€RSAã€M2Crypto ç­‰ Python åº“<strong>è‡ªå·±å®ç°</strong>ã€‚</li><li>ä½¿ç”¨ Jiphy ç­‰å·¥å…·<strong>å°† JavaScript ä»£ç è½¬æ¢ä¸º Python ä»£ç </strong>ã€‚ç”±äºä¸èƒ½ä¿è¯å®Œå…¨å…¼å®¹ï¼Œä¸€èˆ¬éœ€è¦äº†è§£åŸç†ï¼Œå¯¹è½¬æ¢åçš„ä»£ç è¿›è¡Œä¸€å®šçš„ä¿®æ”¹ã€‚å®æµ‹å¤±è´¥äº†ã€‚</li><li>ç›´æ¥ç”¨ js ä»£ç <strong>è·‘ä¸€ä¸ª HTTPServer</strong>ï¼Œå‘è¯·æ±‚è°ƒç”¨å‡½æ•°ã€‚æ¯”è¾ƒéº»çƒ¦ï¼Œæœ‰ç‚¹å°é¢˜å¤§åšï¼Œä¸å¤Ÿä¼˜é›…ã€‚</li><li><p>ä½¿ç”¨ PyV8 æˆ–è€… Pyexecjsï¼Œ<strong>åœ¨ Python ä¸­è°ƒç”¨ JavaScript ä»£ç </strong>ã€‚éœ€è¦å°å°åœ°æ”¹å†™ä¸€ä¸‹ <code>security.js</code>ã€‚ä½¿ç”¨è¿™ç§æ–¹æ³•æˆåŠŸäº†ã€‚</p><ul><li>Tipsï¼šPyV8 å®‰è£…éš¾åº¦éå¸¸å¤§ï¼ŒæŠ˜è…¾æ­»æˆ‘äº†â€¦â€¦æ¨è Pyexecjsï¼Œæ˜¯ä¾èµ–äº Node.js çš„åº“ï¼Œç”¨èµ·æ¥æ¯”è¾ƒè½»æ¾ã€‚</li></ul></li></ul><p>è¿™ä¸ªå…·ä½“å®ç°æŒºå¥‡æ€ªçš„ï¼ŒæŠŠç”¨æˆ·çš„å¯†ç å€’è¿‡æ¥å†åŠ å¯†ï¼Œæœ‰ç‚¹è¿·æƒ‘ã€‚</p><h2>å‘é€ POST è¯·æ±‚</h2><p>ç»è¿‡æµ‹è¯•ï¼Œæœ€ç®€è¯·æ±‚åªéœ€è¦å‘ä¸¤ä¸ª Cookieã€äº”ä¸ª form-dataã€‚</p><pre><code class="lang-bash">curl 'http://cas.hnu.edu.cn/cas/login' \
  -H 'Cookie: JSESSIONID=2001762369FF0645ED3EC64382613117.im32; _pv0=wgfGE0rwBEr3341hmwwtiojDjR30dBqfRxrBe9kPlurTSU%2B4u%2FlWwZzHtzbY1I2OeeLAsHJfU7ftg%2BuIcZF8hMs3QsayPvTVi%2FUb55RTnLmJjgjp%2B6vti%2BlQj9iXJP6uu0hsUs8Oc2LVNbOiuq6Ezr4iyLHxTr%2BPFc2pxeunZ2XTKIMcKLpnoMcRuSyuG5TLTmUzJYG55A7m6Xqrn0Vu8KjOXlwpadDhi01JZxaHxAC6Ge02Zcc%2BCB3Rv8%2BAiQwE6VLu%2Fvmm%2B3URsxCOpD2FoE2c2xUVjuHVcdbpgkpLUaNahQM3sKBgmG7fr1RyYH7dIvi%2BNqWuNcC3O5KcsoIwGhxo216CQ6c0yrBqqWqfPq%2BTxmlNZyUoXJ%2B5DUgsnB0bYpB7pL7wxtGOGkn4F%2BCv44yDn8%2BUb5oHwQyyZM24%2BeY%3D' \
  --data-raw 'username=202108060109&amp;password=84b38bf84fbdcdf46acd06410fc194de10f896679fb3d2fab1e8e1b725d8828a3610df5afe4ffb8ae31744969b1d5d855a5844d8454bb052fafb15af5f930dd5&amp;authcode=&amp;execution=f77fe468-1dc5-4fdb-b883-f881ed207045_ZXlKaGJHY2lPaUpJVXpVeE1pSjkuUWtFMlJFc3ZlakZCY0ZRM1FYVmFWakZCYW1zdlFXcERlVlp1ZEhWTGNreFBSM0Z5WTFsMkwzbFpkVWRUWmtKak1FUjFVblpaTjJ0UVpVNUljRTlMWkZGdGNFNVhlREo0V21oNVZFY3JLMkVyU0c1dE0zQkZiVEE1TDBaaGVrSXlaMWxrUms1cVdUTXZLMmxhT0hoWVdYWlpWa2Q0TDBWWFJEWm9kRXN3T0VoTmMzbG5jRll3Y1d3dmNEaEZNMlZHYUd0aFZURlNibk5wZGpacWRqWnBhV3BtT1RKa1REZDNlVzQ1WVhBelJrbzVWSFF2U25WYVpERlhiMVZ0TjA5R2JXSm1aVVZDTHpOSU5tdzBUMDVTYm1OV1ZFeHZjbVJZZVhZNWVFeEJaRU4yY2tOdFZHSndNbU5CV0VOckwxWmpTVWxDVGk5RVFXdHJkWFl3Tkc1WmMyNWtUR3N6SzJwbVFtazRhRkoxTW5vMFZtOU5PRkJ4ZFZkYU9WTkZNM1JZVlhKM0syTlRNRkpGTVVzNFVWTnFjbXhUTkV4Vk1HRmtkWEJGWWxwaVpuRnNlVzFMYmtKa01rUldabFZGWVhodUwxaElhVE5WY1VkRVQybGhWVzhyZVZRM1ZYVjNZeXRwYlZwRU1IUjZjRE53V1ZaeE1VbGxMMmRIT1N0dlYyOVdhVVZPV0c1b2RHeHBNM05qZGtSTFJsbDBNSFoyWTJGR2JqVnlWazlWUW10TFpuUm9RME5yYldwbmMyVTRjbVJ2VkhoeFJqUkJhR1JqUjJoWlJDdG5URTVRUlhOUVJrTlVVM3BtY0VaNmExUlBja00xV21sS056RjRWR1ZHTDAxU1kwZGtTRTVtWldoR1JGb3JNWGR0YWxwd1QwcFBOelJ3VjFCNVNFYzFibVl6THpaTk1rdzBkSEJ5TW1KS05ETkhZVnBQU0ZsbmFTdFJhM3BEVUhGbU1VSkxNMk00ZW1WdGRrWlpia1E1ZDBSWVQwUkZiVVozSzNGeWFGTm9lbTVXWkd3dmJUTkhOMWRrV1RSd0szRnNUaXQ2UlRoQ1VHcDFWeTlwUzJ0MlFXUktOVzF5ZVV0b00zSnNORkozVGtOTmRtbFllVEpESzBJM1dWVlFSelp0VDJzNVoycDZPVFJKUm5nNE1tc3pUR2hHYUhkNVVIZHFTa1J1VDJSU05ucHVWVFZ4VmtSRmFXVjRSVk5MYnpOU2JGRnJiV05aTmxBMFdUUlhhbTVEZFZKVmJqWXhaM1IyUjBSdFdrWTVjRzE0UkU5TWJrcE5ORzFsT0M5NWRVRmFVV1pZU25adFREUnZkalZYWXpaWWRXOVNSVmhWUnpNMkwxaEJiM3AzWWk5clJtSTFSWFZ6YVZKMmVuSmlkbFpCWWs0cmJYYzNhbkpvVEdkVFVqUlBSWGxNY1c1WE1uRXdlVFZoV0VOQmRFVlRLellyVmpOd2FWSk9lR3hqWVRKSWIzZEdSVEZ3UkVKdE5FUXpRVUpGUW1WVGJtMUVSR3BWU2xWU1NXMUNaVGwyWlVwVGNFVnFOR2dyTUVaUVdVSmtiMk40Y0ZSdFlXbDJWREJPUkVORlJtTmxibWhUVFVOWVYzRmpUaXR6YUVObVRqRm9RWEU1V25jMFdHTlhkalJWY1haVGEyUnNURzFUWlZCRWVuSnVia1YyY1VOaU1tODRMMDl0V0ZSSGJHOTFVR3B6ZFZSQlpqZG5PVVJNY0hKcFFqWlpVbVVyTm5VMk4ybEJkWFpqUkc0MGJrZ3pTRkEyVWswelZXdEJlSGxHTVRsd1ZIRkxVbVkzUlhaRlExTlRWVzk0YjNCQk15OUthVVV4VldKWFNFWTNMMmx2Y0hkSGVFSkJORUpLZEdWaFlrbDNaSEpOTlM4dmIySmtRazEyUW5CWmJYUTJUeXR3V1ZBNWJHNDNSbWxpUVc1T1ExaFJaRTFGTms1TFZERm9jV2RwVkRCeWJIRk1RWEl2VVhNd1ZsWkZZVlpRSzJaM2FGVndhbGxtTUc4eFVtMXJjRFV2Y1ZJNVkxVTRRWEZHVW1WWFlWcDNhRmMwZUVaaFVUZGpVVzE1U1dwT04wNVNUR1I2YlRkaVRrNWFTVGRJVTI1QkwzaE9WWFJVT1RWWGNGWmxkSFpWWlUwMGJreFNUa3hXZDJWd1VubElTRFE0VldwVFFWTnJiMVF2UWxkbFJuSkdURTFYV1VZcmRYWjJWV2RvYTB4a01uVlVha013ZWtSRE1qRTRZMDVrV1ZjMGFWQnZMMVI2TVhCTWExbHNUWFZOUWxCbWEzaGhOMWxuUWsxbWQxWm5lUzlPUzBWNEwycGFSR3RqVHpBdlNXazVVM3BwTjNKbGFWRjNjV0p2U2xscFVHNVNaV05MZVhsSmNGSlFSazFKVkhwd04wbEJkR1l6UjA1RGNtMVVZMkY0ZEZGRVlYRjViblpIWlVOTWFWZzNXbWxpYjNnd2QyVnVWVFZoUzBkb2RETXJLMjVGVDBNM2NXNXNkVWQwUVRKT1MwUklWM1JES3poNFFuUjBZbWg0WVV0TWRqTnlUMFZvVVcwclpGVnNRV1JWWXpJd1dWaDFNekp3Ym0xTE4zbHdhVGxqTUdvelRXbFVRMWhXY25KR2NrOU9jMjlpZURGVkx5OVVhWE00Vm5Od1kwNDRVRUZDUm5vNWNXZ3ZaRTE1TmxoSGIxa3JkVlJMYUVOVlpXTlZTRkZNYVd4UGQwSnguSGtGOV9LMFVHZ2gwcG9yUTY2bzJFWkRlQlFTNi1pczVMcE8wTHFrVzJLMFhVY2JlanM0ZXdYRzBmUlFEVHlfV1RaOVg1aUQzNjNSaEdsa3BOTVB6OGc%3D&amp;_eventId=submit'</code></pre><p>è¿™äº›å†…å®¹å¥½åƒæ˜¯æ²¡æœ‰è¿‡æœŸæ—¶é—´çš„ã€‚</p><h2>POST è¯·æ±‚ä¹‹å</h2><p>å¯¹ <code>login</code> å‘å®Œ POST è¯·æ±‚ä¹‹åï¼Œè¿”å›çš„å¹¶ä¸æ˜¯ 200 è€Œæ˜¯ 302ï¼Œé™„å¸¦äº†è‹¥å¹² <code>Set-Cookie</code>ï¼š</p><pre><code class="lang-js">CASPRIVACY=;
  Max-Age=0; Expires=Thu, 01-Jan-1970 00:00:10 GMT; Path=/cas/; Secure
_pf0=yNlillHGbCY1t2AdPozsaozqFnWzSZo59I6ehvg2XsA=;
  Max-Age=86400; Expires=Thu, 12-May-2022 11:45:18 GMT; Domain=cas.hnu.edu.cn; Path=/; HttpOnly
_pm0=;
  Max-Age=0; Expires=Thu, 01-Jan-1970 00:00:10 GMT; Domain=cas.hnu.edu.cn; Path=/
_pc0=vUfpP1MGYarocLQgQgfAFRsxO2HyBGTzEcg+mGwf+7yewseSDEDYQSGEUIdSz+Oi;
  Domain=cas.hnu.edu.cn; Path=/; HttpOnly
iPlanetDirectoryPro=ZOMenIjL39gmMSKoZAowUqSSd9jimVIhN6ocARhLTD+zeFQPTWyBUSEZdxwS70lbXbLDi0WKL6LTsydgeCfSwJ+aeSPdfSfwj58sBE0eqSCboGqrMtXlz99xb+ia8dcBe2+vpFHGBjdT4we+WJyPs8+rzHOPMOf108uyV7M8zM9scARGxhoHOnADRQx33iKJPEP4qmlkBlw3A9MV9XFtO0MNV/iSn6bcSNujfUHFOa/xZ9fRsd5fMXFnFScsBEGgUxQKDpU02thXp7efiPP55ymb3c04Xova6g2M6qBl+xi1PfH2pfW5wyujRko4/istmw1dZBPEcB7tlaCw9SeXKgXs/viGuhI/JbeuzN7/kIBPtTm2bl48FamXdXohYElt;
  Domain=cas.hnu.edu.cn; Path=/</code></pre><ul><li>302 å“åº”æ ‡å¤´ä¸­ï¼Œ<code>Location</code> å­—æ®µä¸º <code>http://pt.hnu.edu.cn/</code>ï¼Œä¹Ÿå°±æ˜¯è¯´é‡å®šå‘åˆ°äº†ä¸ªäººé—¨æˆ·ã€‚</li><li>ä¸ªäººé—¨æˆ· 301 åˆ°  https çš„ä¸ªäººé—¨æˆ·ã€‚å¾ˆå¥‡æ€ªï¼Œç™»å½•é¡µé¢æ²¡æœ‰è·³è½¬ httpsï¼ˆç”šè‡³ä¸æ”¯æŒ httpsï¼‰ï¼Œå€’æ˜¯ç™»å½•ä¹‹åä¼šè·³è½¬ï¼Œè€Œä¸”å±…ç„¶è¿˜æ˜¯ 301ã€‚</li><li>https ä¸ªäººé—¨æˆ·ï¼ˆ<code>https://pt.hnu.edu.cn/</code>ï¼‰åˆ 302 å›åˆ°äº†ç™»å½•é¡µé¢ï¼ˆ<code>http://cas.hnu.edu.cn/cas/login?service=https%3A%2F%2Fpt.hnu.edu.cn%2F</code>ï¼‰å¸¦äº†ä¸ªå‚æ•°ã€‚è¿™ä¸€æ³¢æ“ä½œååˆ†è¿·æƒ‘ã€‚</li><li><p>æœ€åç™»å½•é¡µé¢ï¼ˆ<code>http://cas.hnu.edu.cn/cas/login?service=https%3A%2F%2Fpt.hnu.edu.cn%2F</code>ï¼‰åˆ 302 åˆ°äº† ä¸€ä¸ª ticket åœ°å€ï¼ˆ<code>https://pt.hnu.edu.cn/?ticket=ST-2355568-yPfsfBJ3ABdVnkpKlbJS-zfsoft.com</code>ï¼‰ã€‚å¯¹è¯¥ <code>ticket</code> åœ°å€çš„è¯·æ±‚ï¼Œä¹Ÿè¿”å›äº†ä¸€ä¸ª <code>Set-Cookie</code>ï¼š</p><pre><code class="lang-js">wisportalId=F-e_MS4pRlGt8WU8IU_r9cOMPRcM-VuRMMfSe2xK;
  path=/</code></pre></li><li>ç»“æœ 302 å›åˆ°äº†ä¸ªäººé—¨æˆ·ï¼ˆ<code>https://pt.hnu.edu.cn/</code>ï¼‰ï¼Œä¹Ÿå°±æ˜¯å›åˆ°äº†ä¸ªäººé—¨æˆ·çš„ä¸»é¡µé¢ã€‚å¸¦ä¸Š Cookie æ¥åˆ°è¿™ä¸ªé¡µé¢ä¹‹åç»ˆäº 200 äº†ã€‚</li></ul><p>çŒœæµ‹è¿™ä¸€ä¸²æ“ä½œå°±æ˜¯ä¸ºäº†è®¾ç½®è¿™äº› Cookieï¼Œè¿›å…¥ä¸»é¡µé¢å³æ ¹æ®æ£€æµ‹åˆ°çš„ Cookie åˆæ³•æ€§åˆ¤æ–­ç”¨æˆ·ã€‚å¯ä»¥éªŒè¯ä¸¤æ¬¡å¯¹ <code>https://pt.hnu.edu.cn/</code> çš„è®¿é—®ï¼ŒåŒºåˆ«åªåœ¨äºæœ‰æ²¡æœ‰ <code>wisportalId</code> è¿™ä¸ª Cookieã€‚</p><p>è¿™æ®µé‡å®šå‘éå¸¸éº»çƒ¦ä¹Ÿå¾ˆå¤æ‚ï¼Œç†è®ºä¸Šæˆ‘ä»¬å¯ä»¥åœ¨ Python é‡Œå†™ä¸ª <code>while</code> å¾ªç¯ï¼Œä½†æ˜¯ <code>requests</code> åº“çš„è¯·æ±‚å¯ä»¥å¸®æˆ‘ä»¬è‡ªåŠ¨å¤„ç†é‡å®šå‘ã€‚ä¸€é€šé‡å®šå‘ä¹‹åï¼Œ<code>prepareRequest</code> å¯¹è±¡ä¸­çš„ Cookie å°±å­˜å‚¨äº†æˆ‘ä»¬æƒ³è¦çš„ <code>wisportalId</code> ç­‰ Cookieã€‚</p><pre><code class="lang-python">&gt;&gt;&gt; postLogin.history
[&lt;Response [302]&gt;, &lt;Response [301]&gt;, &lt;Response [302]&gt;, &lt;Response [302]&gt;, &lt;Response [302]&gt;]</code></pre><h2>ç™»å½•æˆåŠŸåçš„è¯·æ±‚</h2><p>å¯¹å›¾ä¹¦é¦†æ•°æ®çš„è¯·æ±‚ï¼š</p><pre><code class="lang-bash">curl 'https://pt.hnu.edu.cn/api/hndxTsg/getBorrowBooks/detail?_=1652352553585' \
  -H 'Accept: application/json, text/plain, */*' \
  -H 'Accept-Language: en,zh-CN;q=0.9,zh;q=0.8' \
  -H 'Connection: keep-alive' \
  -H 'Cookie: route=a09caef73920180c25245f140604ba0b; wisportalId=WHYE4cN7TZAjB-AVLMHEjx56pELpBe5SbIrFjbMR' \
  -H 'Referer: https://pt.hnu.edu.cn/personal-center' \
  -H 'Sec-Fetch-Dest: empty' \
  -H 'Sec-Fetch-Mode: cors' \
  -H 'Sec-Fetch-Site: same-origin' \
  -H 'User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/101.0.4951.54 Safari/537.36' \
  -H 'sec-ch-ua: &quot; Not A;Brand&quot;;v=&quot;99&quot;, &quot;Chromium&quot;;v=&quot;101&quot;, &quot;Google Chrome&quot;;v=&quot;101&quot;' \
  -H 'sec-ch-ua-mobile: ?0' \
  -H 'sec-ch-ua-platform: &quot;macOS&quot;' \
  --compressed</code></pre><p>ç»è¿‡è¯•éªŒï¼Œå¯ä»¥å‘ç°åªè¦å¸¦ä¸Š <code>wisportalId</code> è¿™ä¸€ä¸ª Cookie å°±å¯ä»¥äº†ã€‚</p><pre><code class="lang-bash">curl 'https://pt.hnu.edu.cn/api/hndxTsg/getBorrowBooks/detail' \
  -H 'Cookie: wisportalId=WHYE4cN7TZAjB-AVLMHEjx56pELpBe5SbIrFjbMR'</code></pre><p>æ‰€ä»¥è¿™ä¸ª Cookie æ˜¯æˆ‘ä»¬çš„æœ€ç»ˆæˆæœï¼Œä¹Ÿæ˜¯ç™»å½•ä¹‹åçš„å…³é”®ã€‚</p><p>è¿”å›ç»“æœæ˜¯ json æ ¼å¼ï¼Œå°±æ˜¯æˆ‘å›¾ä¹¦é¦†å€Ÿçš„æ‰€æœ‰ä¹¦çš„æ•°æ®ã€‚</p><pre><code class="lang-json">{
    &quot;data&quot;:[
        {
            &quot;attachment&quot;:&quot;0&quot;,
            &quot;barcode&quot;:&quot;XS0028533&quot;,
            &quot;loancount&quot;:&quot;0&quot;,
            &quot;loandate&quot;:&quot;2022-04-25&quot;,
            &quot;returndate&quot;:&quot;2022-05-25&quot;,
            &quot;title&quot;:&quot;æœªæ¥ç®€å²ï¼šä»æ™ºäººåˆ°ç¥äººï¼ša brief history of tomorrow&quot;
        }
    ],
    &quot;error_code&quot;:0,
    &quot;message&quot;:&quot;è¯·æ±‚æˆåŠŸ!&quot;
}</code></pre><p>å®æµ‹è¿™ä¸ª <code>wisportalId</code> æ˜¯æœ‰ä¸€ä¸ªæœ‰æ•ˆæ—¶é—´çš„ï¼Œè¿‡ä¸€ç‚¹æ—¶é—´ä¹‹åå°±ä¼šå¤±æ•ˆã€‚åº”è¯¥æ˜¯æœ‰ç»­ç§Ÿçš„å€Ÿå£ï¼Œä¸è¿‡ç›®å‰æœªè§ç³»ç»Ÿå¯¹ç™»å½•é¢‘ç‡æœ‰ä»€ä¹ˆä¸¥æ ¼çš„é™åˆ¶ï¼Œæ‰€ä»¥æš‚æ—¶æ‡’å¾—ç ”ç©¶äº†ï¼Œå¤±æ•ˆäº†é‡æ–°ç™»å½•å°±å¥½ã€‚</p><h2>Python ä»£ç å®ç°</h2><h3>Requests åº“å‘è¯·æ±‚</h3><p><code>requests</code> åº“åº”è¯¥æ— éœ€ä»‹ç»äº†ã€‚</p><p>æœ€åçš„å®ç°æœ‰ä¸€ç‚¹ä¸è¶³ï¼Œå°±æ˜¯æœ€åçš„ä¸€æ³¢é‡å®šå‘æ˜¯ <code>requests</code> å¸®æˆ‘å¤„ç†äº†çš„ï¼Œè¡¨ç°ä¸ºæœ€åä¸€ä¸ªè¯·æ±‚å‘å‡ºä¹‹åç»“æœæ²¡æœ‰ 301/302 è€Œæ˜¯ 200ï¼Œç„¶å <code>postLogin</code> å¯¹è±¡ï¼ˆç±»å‹ä¸º <code>prepareRequest</code>ï¼‰é‡Œçš„ Cookie æ”¹å˜äº†ã€‚ç„¶è€Œ <code>prepareRequest</code> è¿™ä¸ªç±»å‹æ²¡æœ‰æå– Cookie çš„æˆå‘˜å‡½æ•°â€¦â€¦æˆ‘ä»¬åªèƒ½å°†å…¶ä½œä¸ºä¸€ä¸ª Header æ‹¿å‡ºæ¥ï¼Œç›´æ¥æ”¾åˆ°ä¹‹åè¯·æ±‚çš„ Header é‡Œã€‚</p><p>æˆ–è®¸æ”¹å†™æˆ <code>while</code> å¾ªç¯è‡ªå·±æ¨¡æ‹Ÿè¿™ä¸ªé‡å®šå‘ä¼šæ›´å¥½ã€‚</p><h3>BeautifulSoup è§£æ HTML</h3><p>ä¸€å¼€å§‹æƒ³å°è¯•ç”¨ <code>xml.dom.minidom</code> è¿™æ ·çš„è§£æå™¨å°è¯•æ„å»º DOMï¼Œç»“æœæƒ³èµ·æ¥ HTML å¹¶ä¸æ˜¯æ ‡å‡†çš„ XML å®ç°ï¼Œå¹¶ä¸”æ¹–å¤§è¿™ä¸ªç½‘é¡µè¯´ä¸å®šä¹Ÿä¸æ˜¯è§„èŒƒçš„ HTMLâ€¦â€¦</p><p>æ‰€ä»¥ç›´æ¥ç”¨ <code>BeautifulSoup</code> äº†ï¼Œè¿™æ˜¯ä¸€ä¸ªå¯ä»¥ç”¨äºè§£æ HTML æ–‡ä»¶çš„åº“ï¼Œå¸¸ç”¨äºç½‘é¡µçˆ¬è™«ã€‚</p><p>éœ€è¦æ³¨æ„çš„ä¸€ä¸ªç‚¹æ˜¯ï¼Œåœ¨è·å– name ä¸º <code>execution</code> çš„ input å…ƒç´ çš„ <code>value</code> æ—¶ï¼Œname è¿™ä¸ªå…³é”®å­—å’Œ <code>find()</code> æˆå‘˜å‡½æ•°çš„å½¢å‚åå†²çªï¼Œæ‰€ä»¥å¿…é¡»ç”¨ attrs çš„å†™æ³•ï¼š</p><pre><code class="lang-python"># é”™è¯¯çš„å†™æ³•ï¼šæ‰¾ä¸åˆ°å…ƒç´ 
execution = pageSoup.find(name='execution').get('value')
# æ­£ç¡®çš„å†™æ³•ï¼š
execution = pageSoup.find(attrs={'name': 'execution'}).get('value') # name å…³é”®å­—å’Œå½¢å‚åˆ—è¡¨å†²çª</code></pre><h3>Pyexecjs è°ƒç”¨ js</h3><p>ä¸€å¼€å§‹å°è¯•ç”¨ PyV8ï¼Œç»“æœå®‰è£…èµ·æ¥éå¸¸éº»çƒ¦ï¼ŒæŠ˜è…¾äº†åŠå¤©ä¹Ÿæ²¡æå®šï¼Œåæ¥å°±å‘ç°äº† Pyexecjs è¿™ä¸ªæ›¿ä»£å“ã€‚éœ€è¦ Node.js ç¯å¢ƒæ‰èƒ½ä½¿ç”¨ã€‚</p><p>åœ¨è¿™é‡Œæˆ‘ä»¬å¯ä»¥ç”¨ã€Œé¢„ç¼–è¯‘ã€js æ–‡ä»¶çš„æ–¹å¼æ¥è°ƒç”¨ï¼Œåªè¦åœ¨ js é‡Œå°è£…å¥½äº† <code>getResult()</code> å‡½æ•°ï¼ŒPython é‡Œå¯ä»¥ callï¼š</p><pre><code class="lang-python">with open('security.js', 'r', encoding='utf-8') as jsfile:
    jstext = jsfile.read()
ctx = execjs.compile(jstext)
encrypedPwd = ctx.call('getResult', exponent, modulus, password)</code></pre><h3>å®Œæ•´ä»£ç å®ç°</h3><p>è¿™æ˜¯è¿˜æ²¡å°è£…çš„ç®€é™‹ä»£ç ï¼ŒåªæŠŠæ‹¿åˆ°çš„æ•°æ®è¾“å‡ºäº†ã€‚</p><pre><code class="lang-python">username = '202108060109'
password = 'YourPassWord'

import requests
from bs4 import BeautifulSoup
import execjs

getPage = requests.get('http://cas.hnu.edu.cn/cas/login')
print('GET http://cas.hnu.edu.cn/cas/login : ' + str(getPage.status_code))
pageSoup = BeautifulSoup(getPage.text, 'html.parser')
execution = pageSoup.find(attrs={'name': 'execution'}).get('value') # name å…³é”®å­—å’Œå½¢å‚åˆ—è¡¨å†²çª
myJSESSIONID = getPage.cookies['JSESSIONID']
print('Cookie JSESSIONID: ' + myJSESSIONID)

myCookies = {'JSESSIONID': myJSESSIONID}
getPubKey = requests.get('http://cas.hnu.edu.cn/cas/v2/getPubKey', cookies=myCookies)
print('GET http://cas.hnu.edu.cn/cas/v2/getPubKey : ' + str(getPubKey.status_code))
modulus = getPubKey.json()['modulus']
exponent = getPubKey.json()['exponent']
_pv0 = getPubKey.cookies['_pv0']
print('Cookie _pv0: ' + _pv0)

with open('security.js', 'r', encoding='utf-8') as jsfile:
    jstext = jsfile.read()
ctx = execjs.compile(jstext)
encrypedPwd = ctx.call('getResult', exponent, modulus, password)
print(encrypedPwd)

authcode = ''
_eventId = 'submit'

myUA = r'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.3 Safari/605.1.15'

postData = {'username': username, 'password': encrypedPwd, 'authcode': authcode, 'execution': execution, '_eventId': _eventId}
postCookies = {'JSESSIONID': myJSESSIONID, '_pv0': _pv0}
postHeaders = {'User-Agent': myUA}
postLogin = requests.post('http://cas.hnu.edu.cn/cas/login', data=postData, cookies=postCookies, headers=postHeaders)
print('POST http://cas.hnu.edu.cn/cas/login : ' + str(postLogin.status_code))
print(postLogin.history)

cookies = postLogin.request.headers['Cookie']
headers = {'User-Agent': myUA, 'Cookie': cookies}
getBooks = requests.get('https://pt.hnu.edu.cn/api/hndxTsg/getBorrowBooks/detail', headers=headers)
print(getBooks.text)</code></pre><p>å®Œç»“æ’’èŠ± ğŸ‰</p><h2>ä¸‹ä¸€æ­¥</h2><ul><li>è‡ªå·±å®ç°æ¨¡æ‹Ÿé‡å®šå‘ï¼Œç²¾ç¡®æ‹¿åˆ°é‚£å‡ ä¸ª Cookieï¼›</li><li>æ¢ç´¢éªŒè¯ç å‡ºç°çš„æœºåˆ¶ï¼Œæˆ–è®¸åŠ ä¸ŠéªŒè¯ç çš„å¤„ç†ï¼›</li><li>æ‘¸ç´¢æ›´å¤šçš„æ¥å£ã€‚</li></ul> </article> <hr class="my-8" data-astro-cid-4sn4zg3r> <style>astro-island,astro-slot,astro-static-slot{display:contents}</style><script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).load=e;window.dispatchEvent(new Event("astro:load"));})();;(()=>{var b=Object.defineProperty;var f=(c,o,i)=>o in c?b(c,o,{enumerable:!0,configurable:!0,writable:!0,value:i}):c[o]=i;var l=(c,o,i)=>(f(c,typeof o!="symbol"?o+"":o,i),i);var p;{let c={0:t=>m(t),1:t=>i(t),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(i(t)),5:t=>new Set(i(t)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(t),9:t=>new Uint16Array(t),10:t=>new Uint32Array(t)},o=t=>{let[e,r]=t;return e in c?c[e](r):void 0},i=t=>t.map(o),m=t=>typeof t!="object"||t===null?t:Object.fromEntries(Object.entries(t).map(([e,r])=>[e,o(r)]));customElements.get("astro-island")||customElements.define("astro-island",(p=class extends HTMLElement{constructor(){super(...arguments);l(this,"Component");l(this,"hydrator");l(this,"hydrate",async()=>{var d;if(!this.hydrator||!this.isConnected)return;let e=(d=this.parentElement)==null?void 0:d.closest("astro-island[ssr]");if(e){e.addEventListener("astro:hydrate",this.hydrate,{once:!0});return}let r=this.querySelectorAll("astro-slot"),a={},h=this.querySelectorAll("template[data-astro-template]");for(let n of h){let s=n.closest(this.tagName);s!=null&&s.isSameNode(this)&&(a[n.getAttribute("data-astro-template")||"default"]=n.innerHTML,n.remove())}for(let n of r){let s=n.closest(this.tagName);s!=null&&s.isSameNode(this)&&(a[n.getAttribute("name")||"default"]=n.innerHTML)}let u;try{u=this.hasAttribute("props")?m(JSON.parse(this.getAttribute("props"))):{}}catch(n){let s=this.getAttribute("component-url")||"<unknown>",y=this.getAttribute("component-export");throw y&&(s+=` (export ${y})`),console.error(`[hydrate] Error parsing props for component ${s}`,this.getAttribute("props"),n),n}await this.hydrator(this)(this.Component,u,a,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),this.dispatchEvent(new CustomEvent("astro:hydrate"))});l(this,"unmount",()=>{this.isConnected||this.dispatchEvent(new CustomEvent("astro:unmount"))})}disconnectedCallback(){document.removeEventListener("astro:after-swap",this.unmount),document.addEventListener("astro:after-swap",this.unmount,{once:!0})}connectedCallback(){if(!this.hasAttribute("await-children")||document.readyState==="interactive"||document.readyState==="complete")this.childrenConnectedCallback();else{let e=()=>{document.removeEventListener("DOMContentLoaded",e),r.disconnect(),this.childrenConnectedCallback()},r=new MutationObserver(()=>{var a;((a=this.lastChild)==null?void 0:a.nodeType)===Node.COMMENT_NODE&&this.lastChild.nodeValue==="astro:end"&&(this.lastChild.remove(),e())});r.observe(this,{childList:!0}),document.addEventListener("DOMContentLoaded",e)}}async childrenConnectedCallback(){let e=this.getAttribute("before-hydration-url");e&&await import(e),this.start()}start(){let e=JSON.parse(this.getAttribute("opts")),r=this.getAttribute("client");if(Astro[r]===void 0){window.addEventListener(`astro:${r}`,()=>this.start(),{once:!0});return}Astro[r](async()=>{let a=this.getAttribute("renderer-url"),[h,{default:u}]=await Promise.all([import(this.getAttribute("component-url")),a?import(a):()=>()=>{}]),d=this.getAttribute("component-export")||"default";if(!d.includes("."))this.Component=h[d];else{this.Component=h;for(let n of d.split("."))this.Component=this.Component[n]}return this.hydrator=u,this.hydrate},e,this)}attributeChangedCallback(){this.hydrate()}},l(p,"observedAttributes",["props"]),p))}})();</script><astro-island uid="2vWqDu" prefix="r0" component-url="/_astro/Comments.PfbPG32-.js" component-export="default" renderer-url="/_astro/client.Th_ss2k4.js" props="{&quot;slug&quot;:[0,&quot;hnu-portal-login-analysis-implementation&quot;],&quot;permalink&quot;:[0,&quot;https://blog.skywt.cn/posts/hnu-portal-login-analysis-implementation&quot;],&quot;data-astro-cid-4sn4zg3r&quot;:[0,true]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;Comments&quot;,&quot;value&quot;:true}" await-children=""><h2><i class="ri-discuss-line"></i> æš‚æ— è¯„è®º</h2><hr class="my-8"/><h2><i class="ri-discuss-line"></i> å‘è¡¨æ–°çš„è¯„è®º</h2><p class="mt-4 primary-color card p-2"><i class="ri-information-line"></i> <b>æ‰€æœ‰è¯„è®ºéƒ½å°†ç»è¿‡åšä¸»å®¡æ ¸ã€‚</b>è¯·å‹¿å¡«å†™æ— æ„ä¹‰é‚®ç®±æˆ–å‘è¡¨æ— å…³è¯„è®ºã€å¹¿å‘Šç­‰ï¼Œå¦åˆ™ä¼šè¢«è§†ä¸ºåƒåœ¾è¯„è®ºã€‚<br/>è¯„è®ºæäº¤ç»„ä»¶æ˜¯æœ€è¿‘åˆšå†™çš„ï¼Œå¦‚æœé‡åˆ° bug æ¬¢è¿å‘åšä¸»åé¦ˆï½</p><form class="mt-4 grid gap-4 grid-cols-1 sm:grid-cols-3 relative"><input placeholder="ä½ çš„åå­—" type="text" required="" value=""/><input placeholder="é‚®ç®±" type="email" required="" value=""/><input placeholder="ç½‘å€" type="url" value=""/><textarea rows="8" class="sm:col-span-3" placeholder="è¯´ç‚¹ä»€ä¹ˆå§â€¦â€¦" required=""></textarea><button type="submit" class="sm:col-span-3">æäº¤</button></form><p class="mt-4 secondary-color text-sm leading-normal">æäº¤è¯„è®ºå³è¡¨æ˜ä½ åŒæ„æœ¬ç½‘ç«™ä½¿ç”¨ Cookieï¼Œå¹¶å…è®¸æœ¬ç«™åœ¨åå°è®°å½•ä½ çš„é‚®ç®±ã€IP åœ°å€ç­‰å¿…è¦ä¿¡æ¯ã€‚<br/>ï¼ˆæäº¤ä¸€æ¬¡è¯„è®ºåï¼Œæœ¬æç¤ºå°†ä¸å†å±•ç¤ºï¼‰</p><!--astro:end--></astro-island> </section> </main>  <footer class="mt-16 py-8 bg-gray-100 dark:bg-neutral-900"> <div class="wide-container secondary-color text-sm"> <div class="flex justify-between flex-wrap"> <div class="m-2"> <a href="/" class="link">SkyWT</a> <span>
/
<a href="/blog" class="link"> åšå®¢</a> </span><span>
/
æ¹–å¤§ä¸ªäººé—¨æˆ·ç™»å½•æµ…æä¸å®ç° </span> </div> <div class="m-2"> <ul data-astro-cid-tfcnbjmv> <li data-astro-cid-tfcnbjmv> <a class="link" href="/" data-astro-cid-tfcnbjmv> 
ä¸»é¡µ
</a> </li> <li data-astro-cid-tfcnbjmv> <a class="link" href="/blog" data-astro-cid-tfcnbjmv>  åšå®¢ </a> </li><li data-astro-cid-tfcnbjmv> <a class="link" href="/lab" data-astro-cid-tfcnbjmv>  å®éªŒå®¤ </a> </li><li data-astro-cid-tfcnbjmv> <a class="link" href="/friends" data-astro-cid-tfcnbjmv>  å‹äºº </a> </li><li data-astro-cid-tfcnbjmv> <a class="link" href="/about" data-astro-cid-tfcnbjmv>  å…³äº </a> </li> </ul>  </div> </div> <hr class="my-4"> <div class="flex justify-between flex-wrap"> <p class="m-2">
&#169; 2017-2024 <a href="/" class="link">SkyWT</a>
|
<a href="/sitemap.xml" class="link">ç«™ç‚¹åœ°å›¾</a>
|
<a href="/friends" class="link">å‹æƒ…é“¾æ¥</a>
|
<a href="https://foreverblog.cn/go.html" class="link">è™«æ´</a> <!-- |
        <a href="https://github.com/Skywt2003/Daydreamer" class="link"
          >Daydreamer</a
        > --> </p> <div class="m-2"> <a href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank" class="inline-block mx-1" data-astro-cid-h3ykra2n> <img class="icon" src="/cc/cc.svg" data-astro-cid-h3ykra2n> <img class="icon" src="/cc/by.svg" data-astro-cid-h3ykra2n> <img class="icon" src="/cc/nc.svg" data-astro-cid-h3ykra2n>   </a>  <a href="https://notbyai.fyi" target="_blank" class="inline-block mx-1" data-astro-cid-hwbnc4sm> <img src="/not-by-ai-light.svg" alt="Not By AI Badge" class="badge inline-block dark:hidden" data-astro-cid-hwbnc4sm> <img src="/not-by-ai-dark.svg" alt="Not By AI Badge" class="badge hidden dark:inline-block" data-astro-cid-hwbnc4sm> </a>  <a href="https://www.foreverblog.cn/" target="_blank" class="inline-block mx-1"> <img src="https://img.foreverblog.cn/logo_en_default.png" alt="Forever Blog Badage" class="inline-block h-4 grayscale"> </a> </div> </div> <div class="flex justify-between flex-wrap"> <p class="m-2"> <a href="https://beian.miit.gov.cn/" target="_blank" class="link">
æµ™ ICP å¤‡ 2021019606 å· - 1</a>
|
<a href="https://www.beian.gov.cn/portal/registerSystemInfo?recordcode=33080202000472" target="_blank" class="link before:content-[url('/mps.png')] before:align-middle">
æµ™å…¬ç½‘å®‰å¤‡ 33080202000472 å·</a> </p> <p class="m-2"> <!-- <span class="align-middle">ç”±</span>
        <a
          href="https://www.upyun.com/?utm_source=lianmeng&utm_medium=referral"
          class="inline-block align-middle"
        >
          <img src="/upyun.png" class="h-6" />
        </a>
        <span class="align-middle">æä¾› CDN åŠ é€Ÿã€äº‘å­˜å‚¨æœåŠ¡</span> --> </p> </div> </div> </footer> </body></html> 