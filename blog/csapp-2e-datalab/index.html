<!DOCTYPE html><html> <head><meta charset="UTF-8"><meta name="description" content="Astro description"><meta name="viewport" content="width=device-width"><link rel="icon" type="image/vnd.microsoft.icon" href="/favicon.ico"><meta name="generator" content="Astro v4.7.0"><title>CSAPP 2e Datalab é¢˜è§£</title><link rel="alternate" type="application/rss+xml" title="åšå®¢æ–‡ç«  RSS è®¢é˜…" href="https://skywt.cn/rss.xml"><link rel="sitemap" href="/sitemap-index.xml"><script>
      function addMatomo() {
        var _paq = (window._paq = window._paq || []);
        _paq.push(["trackPageView"]);
        _paq.push(["enableLinkTracking"]);
        (function () {
          var u = "//analytics.skywt.cn/";
          _paq.push(["setTrackerUrl", u + "matomo.php"]);
          _paq.push(["setSiteId", "1"]);
          var d = document,
            g = d.createElement("script"),
            s = d.getElementsByTagName("script")[0];
          g.async = true;
          g.src = u + "matomo.js";
          s.parentNode.insertBefore(g, s);
        })();
      }

      document.addEventListener(
        "astro:page-load",
        () => {
          addMatomo();
        },
        { once: false },
      );
    </script><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><link rel="stylesheet" href="/_astro/about.gCOBDJ9X.css">
<link rel="stylesheet" href="/_astro/friends.CYYucEuo.css">
<style>img[data-astro-cid-4sn4zg3r]{border-radius:.5rem;--tw-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}
</style><script type="module" src="/_astro/hoisted.B7CfB7Zh.js"></script></head> <body> <header class="mt-12 container container--wide"> <h5 class="mt-4 mx-4 text-secondary sm:hidden text-center"> <a href="/" class="link">SkyWT</a> <span>
/
<a href="/blog" class="link"> åšå®¢ </a> </span><span>
/
CSAPP 2e Datalab é¢˜è§£ </span> </h5> </header> <div id="navbar-sentinal"></div> <nav class="navbar" id="navbar-wrapper"> <div class="navbar__content"> <h5 class="navbar__path"> <a href="/" class="link">SkyWT</a> <span>
/
<a href="/blog" class="link"> åšå®¢ </a> </span><span>
/
CSAPP 2e Datalab é¢˜è§£ </span> </h5> <div class="navbar__menu"> <ul data-astro-cid-tfcnbjmv> <li data-astro-cid-tfcnbjmv> <a class="link" href="/" data-astro-cid-tfcnbjmv> <i class="ri-home-line" data-astro-cid-tfcnbjmv></i>
ä¸»é¡µ
</a> </li> <li data-astro-cid-tfcnbjmv> <a class="link" href="/blog" data-astro-cid-tfcnbjmv> <i class="ri-newspaper-line" data-astro-cid-tfcnbjmv></i> åšå®¢ </a> </li><li data-astro-cid-tfcnbjmv> <a class="link" href="/lab" data-astro-cid-tfcnbjmv> <i class="ri-server-line" data-astro-cid-tfcnbjmv></i> å®éªŒå®¤ </a> </li><li data-astro-cid-tfcnbjmv> <a class="link" href="/friends" data-astro-cid-tfcnbjmv> <i class="ri-contacts-line" data-astro-cid-tfcnbjmv></i> å‹äºº </a> </li><li data-astro-cid-tfcnbjmv> <a class="link" href="/about" data-astro-cid-tfcnbjmv> <i class="ri-cup-line" data-astro-cid-tfcnbjmv></i> å…³äº </a> </li> </ul>  </div> </div> </nav> <script>
  // ä½¿ç”¨ ViewTransition åï¼Œæ‰€æœ‰ DOM æ“ä½œçš„ js éƒ½æœ‰ä¸€å †é—®é¢˜
  // è¿™é‡Œç”¨äº†æä¸ä¼˜é›…çš„ varï¼Œæœ‰å¾…æ”¹è¿›
  var observer;
  function addNavObserver() {
    const headerEl = document.querySelector("#navbar-wrapper");
    const sentinalEl = document.querySelector("#navbar-sentinal");
    if (!sentinalEl || !headerEl) return;
    observer = new window.IntersectionObserver((e) => {
      if (!e[0].isIntersectin && e[0].boundingClientRect.top <= 0) {
        headerEl.classList.add("navbar--sticked");
      } else {
        headerEl.classList.remove("navbar--sticked");
      }
    });
    observer.observe(sentinalEl);
  }

  function removeNavObserver() {
    if (observer) observer.disconnect();
    observer = null;
  }

  document.addEventListener(
    "astro:page-load",
    () => {
      addNavObserver();
    },
    { once: false },
  );

  document.addEventListener(
    "astro:before-swap",
    () => {
      removeNavObserver();
    },
    { once: false },
  );
</script>  <main data-astro-cid-4sn4zg3r> <section class="container mt-8 sm:mt-32" data-astro-cid-4sn4zg3r>  <h1 class="leading-relaxed" data-astro-cid-4sn4zg3r>CSAPP 2e Datalab é¢˜è§£</h1> <p class="mt-4 text-secondary leading-relaxed" data-astro-cid-4sn4zg3r> <i class="ri-calendar-line" data-astro-cid-4sn4zg3r></i> <span data-astro-cid-4sn4zg3r>2023 å¹´ 3 æœˆ 20 æ—¥ 10:37</span> <!-- {
          post.commentsNum > 0 && (
            <>
              <br />
              <i class="ri-discuss-line" />
              <span>å…± {post.commentsNum} æ¡è¯„è®º</span>
            </>
          )
        } --> </p> <hr class="my-8" data-astro-cid-4sn4zg3r> <article class="content" data-astro-cid-4sn4zg3r> <h2><a id="æ–‡ç« ç›®å½•" class="heading-anchor"></a>æ–‡ç« ç›®å½•</h2>
<ul>
<li><a href="#%E5%89%8D%E8%A8%80%E4%BB%80%E4%B9%88%E6%98%AF-cheating">å‰è¨€ï¼šä»€ä¹ˆæ˜¯ cheating</a></li>
<li><a href="#%E6%9C%AC%E5%AE%9E%E9%AA%8C%E7%9A%84%E4%B8%80%E4%BA%9B%E5%9D%91">æœ¬å®éªŒçš„ä¸€äº›å‘</a></li>
<li><a href="#%E7%94%A8-docker-%E5%88%9B%E5%BB%BA%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83">ç”¨ docker åˆ›å»ºè¿è¡Œç¯å¢ƒ</a></li>
<li><a href="#bitand">bitAnd</a></li>
<li><a href="#getbyte">getByte</a></li>
<li><a href="#logicalshift">logicalShift</a></li>
<li><a href="#bitcount">bitCount</a></li>
<li><a href="#bang">bang</a></li>
<li><a href="#tmin">tmin</a></li>
<li><a href="#fitsbits">fitsBits</a></li>
<li><a href="#divpwr2">divpwr2</a></li>
<li><a href="#negate">negate</a></li>
<li><a href="#ispositive">isPositive</a></li>
<li><a href="#islessorequal">isLessOrEqual</a></li>
<li><a href="#ilog2">ilog2</a></li>
<li><a href="#float_neg">float_neg</a></li>
<li><a href="#float_i2f">float_i2f</a></li>
<li><a href="#float_twice">float_twice</a></li>
<li><a href="#%E5%AE%8C%E6%95%B4%E4%BB%A3%E7%A0%81%E5%8F%82%E8%80%83">å®Œæ•´ä»£ç å‚è€ƒ</a></li>
</ul>
<p>CSAPP æ˜¯ CMU äº«èª‰å…¨çƒçš„è¯¾ç¨‹ï¼Œå°¤å…¶ä»¥å…¶ lab éš¾åº¦ä¹‹é«˜è‘—ç§°ã€‚è¿™æ˜¯è¯¾ç¨‹çš„ç¬¬ä¸€ä¸ª labï¼šdatalabï¼Œä¸ºäº†è®©æˆ‘ä»¬ç†Ÿç»ƒæŒæ¡è®¡ç®—æœºä¸­çš„æ•°æ®å­˜å‚¨è€Œè®¾è®¡ã€‚</p>
<h2><a id="å‰è¨€ä»€ä¹ˆæ˜¯-cheating" class="heading-anchor"></a>å‰è¨€ï¼šä»€ä¹ˆæ˜¯ cheating</h2>
<p>ä¹‹å‰åœ¨ B ç«™ä¸Š CSAPP ç¬¬ä¸€èŠ‚è¯¾ï¼Œæ•™æˆå°±è¯´äº†åœ¨ CMUï¼Œä½œå¼Šçš„å®šä¹‰æ˜¯ä»€ä¹ˆï¼Œè¯´å®è¯æœ‰ç‚¹ shockedï¼š</p>
<p><a href="https://blog.skywt.cn/usr/uploads/2023/03/708355136.png" data-fancybox data-caption=""><img src="https://blog.skywt.cn/usr/uploads/2023/03/708355136.png" alt="Cheating: Description" title="" /></a></p>
<p><a href="https://blog.skywt.cn/usr/uploads/2023/03/3491785294.png" data-fancybox data-caption=""><img src="https://blog.skywt.cn/usr/uploads/2023/03/3491785294.png" alt="Cheating: Consequence" title="" /></a></p>
<p>CMU CSAPP çš„è§„å®šæ˜¯ï¼Œå®Œæˆ lab çš„æ—¶å€™ä¸å¯ä»¥ä¸Šç½‘æŸ¥èµ„æ–™ï¼Œåªè¦ä¸Šç½‘æœç´¢äº†ï¼Œä¸ç®¡æœ‰æ²¡æœ‰æ‰¾ç»“æœï¼Œæœç´¢çš„è¿™ä¸ªè¿‡ç¨‹å°±ç®—ä½œ cheatingï¼ˆè¿™åªæ˜¯è¯¾ç¨‹å®éªŒï¼ï¼‰ã€‚<br>
ä¸€ä¸ªå­¦æœŸæœ‰ 25 äººå› ä¸º cheating å—åˆ°æƒ©ç½šï¼Œè€Œä¸”åæœååˆ†ä¸¥é‡ã€‚çœ‹çœ‹æˆ‘ä»¬çš„ HNUï¼Œè‡³ä»Šæ²¡å¬è¯´è¿‡æœ‰è°å› ä¸ºä½œå¼Šè€Œå—åˆ°å¤„åˆ†â€¦â€¦</p>
<p>æŒ‰ç…§è¿™ä¸ªè¦æ±‚ï¼Œlab åšå¾—çœŸçš„éå¸¸ç—›è‹¦ã€‚æœ‰äº›é¢˜ç›®è¦æƒ³å¾ˆä¹…è¿˜æƒ³ä¸å‡ºæ¥ã€‚è€Œä¸”è¯´å®è¯è¿˜æ˜¯æœ‰ä¸€ä¸¤ä¸ªé¢˜ç›®ä¸ä¼šåšï¼Œå»ç½‘ä¸Šçœ‹äº†åˆ«äººçš„ solutionã€‚ä½†æ˜¯è¿™æ ·åšå®Œçš„ datalabï¼Œç›¸æ¯”ç›´æ¥ä¸Šç½‘ä¸€é€šæœç´¢æŠ„æ¥çš„ä»£ç ï¼Œç¡®å®æ›´åŠ æœ‰æˆå°±æ„Ÿï¼Œä¹Ÿå¯¹è‡ªå·±çš„ã€ŒäºŒè¿›åˆ¶æ€ç»´ã€èƒ½åŠ›æœ‰æ›´å¤§çš„é”»ç‚¼ã€‚è¿™ä¹Ÿæ­£æ˜¯è¿™å‡ ä¸ª lab çš„æ„ä¹‰æ‰€åœ¨å§ã€‚</p>
<p>æ‰€ä»¥ï¼Œå¦‚æœä½ åœ¨åš datalab è€Œä¸Šç½‘æœç´¢çœ‹åˆ°äº†è¿™é‡Œï¼Œåœ¨ç»§ç»­çœ‹ä¸‹å»ä¹‹å‰ï¼Œä¸å¦¨å†ç»§ç»­ç‹¬ç«‹æ€è€ƒä¸€ä¸‹å§ã€‚</p>
<h2><a id="æœ¬å®éªŒçš„ä¸€äº›å‘" class="heading-anchor"></a>æœ¬å®éªŒçš„ä¸€äº›å‘</h2>
<ul>
<li><code>dlc</code> è¿™ä¸ªè¯­æ³•æ£€æŸ¥å™¨æŒ‰ç…§ C89/C90ï¼ˆANSI Cï¼‰çš„æ ‡å‡†ï¼Œè¿™ä¸ªæ ‡å‡†è§„å®š<strong>æ‰€æœ‰å±€éƒ¨å˜é‡éƒ½è¦åœ¨ä»£ç å—çš„å¼€å¤´å®šä¹‰</strong>ã€‚æ‰€ä»¥å¦‚æœåœ¨å‡½æ•°ä¸­é€”å®šä¹‰ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼Œè™½ç„¶ç”¨ <code>make</code> å¯ä»¥æ­£å¸¸ç¼–è¯‘ï¼ˆç°åœ¨çš„ç¼–è¯‘å™¨å¾ˆå°‘è¿˜ç”¨ ANSI C æ ‡å‡†ï¼‰ï¼Œä½†æ˜¯ç”¨ <code>dlc</code> æ£€æŸ¥åˆ™ä¼šæç¤º <code>parse error</code> çš„é”™è¯¯ã€‚</li>
<li>å®éªŒç¯å¢ƒå¿…é¡»æ˜¯æ—§ç‰ˆæœ¬çš„ Linux ç¯å¢ƒï¼ˆå¦‚ Ubuntu 12.04 LTSï¼‰ã€‚ä½¿ç”¨è¾ƒæ–°çš„å‘è¡Œç‰ˆå¯èƒ½ä¼šå¯¼è‡´æ— æ³•é€šè¿‡ fitsBits è¿™ä¸€å…³ã€‚ï¼ˆç›®å‰æš‚ä¸æ¸…æ¥šæ˜¯ç¼–è¯‘å™¨è¿˜æ˜¯å†…æ ¸ç­‰çš„é—®é¢˜ï¼Œæ®è¯´æ˜¯æœ¬ lab æœ¬èº«çš„ä¸€ä¸ª bugï¼‰</li>
</ul>
<h2><a id="ç”¨-docker-åˆ›å»ºè¿è¡Œç¯å¢ƒ" class="heading-anchor"></a>ç”¨ docker åˆ›å»ºè¿è¡Œç¯å¢ƒ</h2>
<p>åœ¨ x86 çš„ä¸»æœºä¸Šä½¿ç”¨ docker åˆ›å»º Ubuntu 12.04 LTS çš„å®¹å™¨ï¼ŒæŒ‡å®šå°†å®¹å™¨å†… <code>/home</code> ç›®å½•æ˜ å°„åˆ°å®¹å™¨å¤–çš„ç›®å½•ï¼Œç„¶åè¿›å…¥å®¹å™¨ï¼Œå®‰è£…ç›¸å…³è½¯ä»¶ï¼š</p>
<pre><code class="language-bash"><span class="hljs-comment"># å°†å®¹å™¨å†… /home æ˜ å°„åˆ°å®¹å™¨å¤– /root/Lab/HNU-CSAPP/ex2/docker-env/homeï¼Œè¿™ä¸¤ä¸ªç›®å½•ä¹Ÿå¯ä»¥è‡ªå·±æŒ‡å®š</span>
docker run -itd --name datalab -v /root/Lab/HNU-CSAPP/ex2/docker-env/home:/home ubuntu:12.04
<span class="hljs-comment"># è¿›å…¥å®¹å™¨å†…çš„ shell</span>
docker <span class="hljs-built_in">exec</span> -it datalab /bin/bash
<span class="hljs-comment"># 12.04 å¹´ä»£ä¹…è¿œï¼Œéœ€è¦å°† sources é‡Œ archive.ubuntu.com æ”¹ä¸º old-reloease.ubuntu.com æ‰èƒ½ apt-get update</span>
sed -i -e <span class="hljs-string">&#x27;s/archive.ubuntu.com\|security.ubuntu.com/old-releases.ubuntu.com/g&#x27;</span> /etc/apt/sources.list
<span class="hljs-comment"># è·å–è½¯ä»¶åŒ…åˆ—è¡¨</span>
apt-get update
<span class="hljs-comment"># å®‰è£…æœ¬å®éªŒå¿…è¦çš„è½¯ä»¶åŒ…</span>
apt-get install gcc make gcc-multilib
</code></pre>
<p>å›åˆ°å®¹å™¨å¤–ï¼Œå°†æ–‡ä»¶ç§»è¿›æŒ‡å®šçš„ç›®å½•ï¼ˆ<code>/root/Lab/HNU-CSAPP/ex2/docker-env/home</code>ï¼‰ï¼Œç¼–è¾‘å¥½åå†è¿›å…¥å®¹å™¨æµ‹è¯•ã€‚<br>
å¯ä»¥ç”¨ tmux åŠå±å¼€ vim å†™ä»£ç ï¼ŒåŠå±è¿›å®¹å™¨ç»ˆç«¯æµ‹è¯•ã€‚</p>
<p>æ³¨æ„å¦‚æœåœ¨å®¹å™¨å¤–æµ‹è¯•è¿‡äº†ï¼Œè¿›å…¥å®¹å™¨è¦ <code>make clean</code> å†é‡æ–° <code>make</code>ï¼Œå› ä¸ºä¸åŒç¯å¢ƒç¼–è¯‘ç”Ÿæˆçš„äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶å¯èƒ½ä¸å…¼å®¹ã€‚</p>
<h2><a id="bitand" class="heading-anchor"></a>bitAnd</h2>
<p>ç”¨æˆ–å’Œéå®ç°ä¸ï¼Œç”¨ç›´æ¥å–åçš„æ–¹æ³•å³å¯ï¼šx and y = not ((not x) or (not y))ã€‚</p>
<h2><a id="getbyte" class="heading-anchor"></a>getByte</h2>
<p>å¾ˆæ˜¾ç„¶ç­”æ¡ˆæ˜¯ <code>(x &gt;&gt; n*8) &amp; 0xFF</code>ã€‚ä½†æ˜¯ä¸å…è®¸ä½¿ç”¨ä¹˜æ³•ï¼Œå¦‚ä½•è·å¾— <code>n*8</code> å‘¢ï¼Ÿ<br>
ç­”æ¡ˆæ˜¯ç›´æ¥ç”¨åŠ æ³•ã€‚8 ä¸ª n ç›¸åŠ ä¼šè¶…è¿‡ ops æ•°é‡é™åˆ¶ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆåŠ å‡º 2nã€4nã€‚</p>
<h2><a id="logicalshift" class="heading-anchor"></a>logicalShift</h2>
<p>è¦æ±‚å®ç° logical shiftï¼Œå› ä¸ºé»˜è®¤çš„ shift æ˜¯ arithmetic shiftã€‚æœ¬è´¨çš„åŒºåˆ«åœ¨äºè´Ÿæ•°çš„ shrï¼Œå‰è€…å·¦è¾¹å‡ºæ¥çš„æ˜¯ 0 è€Œå³è€…å‡ºæ¥çš„æ˜¯ 1ã€‚</p>
<p>å¾ˆå®¹æ˜“æƒ³åˆ°å¯ä»¥ and ä¸Šä¸€ä¸ª keeperï¼Œè¿™ä¸ª keeper çš„å€¼æ˜¯ <code>0000111...11</code>ï¼Œå³è¾¹çš„ 1 å°±æ˜¯è¦ä¿ç•™çš„é‚£äº›ä½ã€‚è¿™æ ·å¯ä»¥å»æ‰å·¦è¾¹äº§ç”Ÿçš„ 1ã€‚<br>
å¦‚ä½•å¾—åˆ°è¿™ä¸ª keeperï¼Ÿæ˜¾ç„¶ keeper = <code>0x7FFFFFFF</code> &gt;&gt; (n-1)ã€‚</p>
<p>æœ‰ä¸¤ä¸ªé—®é¢˜ã€‚é¦–å…ˆæ˜¯å¦‚ä½•äº§ç”Ÿ <code>0x7FFFFFFF</code> è¿™ä¸ªæ•°å­—å‘¢ï¼Ÿå› ä¸ºæ¸¸æˆè§„åˆ™è§„å®šç«‹å³æ•°èµ‹å€¼ä¸èƒ½è¶…è¿‡ 2 Byteã€‚ç­”æ¡ˆæ˜¯ <code>~(1 &lt;&lt; 31)</code>ã€‚</p>
<p>æ¥ä¸‹æ¥æ˜¯å¦‚ä½•å¤„ç† n = 0 çš„æƒ…å†µã€‚å¥½åœ¨è¿™å…³å…è®¸æˆ‘ä»¬ç”¨ <code>!</code> è¿ç®—ç¬¦ï¼Œå¯ä»¥å®ç°ç±»ä¼¼é€‰æ‹©èµ‹å€¼çš„è¯­å¥ã€‚<br>
å…·ä½“æ¥è¯´ï¼Œæˆ‘ä»¬éœ€è¦è¿™æ ·ä¸€ä¸ª flag å˜é‡ï¼Œå½“ n ä¸º 0 æ—¶å®ƒæ˜¯ <code>0x00000000</code>ï¼Œå½“ n é 0 æ—¶å®ƒæ˜¯ <code>0xFFFFFFFF</code>ã€‚<br>
è¯•è¯•ç”¨ <code>!</code> è¿ç®—ç¬¦ï¼Œç›´æ¥å¯¹ n å–é€»è¾‘é notnï¼Œè¿™æ · n ä¸º 0 æ—¶æˆ‘ä»¬å¾—åˆ° 1ï¼Œn é 0 æ—¶æˆ‘ä»¬å¾—åˆ° 0ã€‚<br>
å¾ˆæ˜¾ç„¶ï¼Œflag = notn - 1ã€‚<br>
ç°åœ¨æˆ‘ä»¬åˆ†åˆ«è®¡ç®—å‡º n ä¸º 0 å’Œä¸ä¸º 0 çš„ä¸¤ç§æƒ…å†µ result1 å’Œ result2ï¼Œåˆ™æœ€ååªéœ€è¦è¿”å› <code>((!flag) &amp; result1) | (flag &amp; result2)</code>ã€‚æ˜¯ä¸æ˜¯æœ‰ç‚¹åƒæ•°ç”µé‡Œçš„ã€Œå¤šè·¯å¤ç”¨ã€å‘¢ã€‚<br>
<strong>è¿™ç§å¯¹ n = 0 ç‰¹åˆ¤çš„æ–¹æ³•ï¼Œåœ¨åé¢çš„å…³å¡ä¸­ä¼šå¤šæ¬¡é‡åˆ°ã€‚</strong></p>
<p>æœ€åï¼Œè¿™å…³ä¸èƒ½ç”¨ <code>-</code> å‡æ³•ï¼Œå¦‚ä½•å®ç° -1 å‘¢ï¼Ÿç›´æ¥ç”¨åŠ ä¸Š <code>0xFFFFFFFF</code> å°±è¡Œå•¦ã€‚</p>
<h2><a id="bitcount" class="heading-anchor"></a>bitCount</h2>
<p>ï¼ˆè¿™é¢˜æœ‰ç‚¹éš¾æƒ³ ğŸ˜¨ï¼‰</p>
<p>è¦æ±‚ç»Ÿè®¡äºŒè¿›åˆ¶ä¸­ 1 çš„ä¸ªæ•°ï¼ˆå°±æ˜¯ popcountï¼‰ã€‚å…¶å®å¯¹äºæ¯ä¸€ä½æ˜¯ 0 æ˜¯ 1 æˆ‘ä»¬éƒ½å¯ä»¥é€šè¿‡ and å¾—çŸ¥ï¼Œæœ€éš¾çš„å°±æ˜¯å¦‚ä½•ç´¯åŠ ã€‚<br>
ç´¯åŠ çš„éƒ¨åˆ†å¯ä»¥è€ƒè™‘åˆ†æ²»ï¼Œè¦ç´¯åŠ  32 ä½çš„ç»“æœï¼Œæˆ‘ä»¬å‡è®¾å¾—åˆ°äº†ä¸¤ä¸ª 16 ä½çš„ç»“æœï¼Œåªè€ƒè™‘è¿™ä¸¤ä¸ªå¦‚ä½•ç›¸åŠ ï¼›è¦è®¡ç®— 16 ä½çš„ç»“æœåªè€ƒè™‘ä¸¤ä¸ª 8 ä½çš„ç»“æœå¦‚ä½•ç›¸åŠ ï¼Œä»¥æ­¤ç±»æ¨ã€‚<br>
é‚£ä¹ˆä¸¤ä¸ª 16 ä½çš„ç»“æœå¦‚ä½•ç›¸åŠ å‘¢ï¼Ÿæˆ‘ä»¬å‡è®¾ä¸¤ä¸ªç»“æœåˆ†åˆ«å­˜å‚¨åœ¨ 32 ä½ int çš„é«˜ 16 ä½å’Œä½ 16 ä½ï¼Œåªè¦æŠŠä¸¤ä¸ªéƒ¨åˆ†å–å‡ºæ¥ï¼Œå‰è€…å³ç§» 16 ä½ç›¸åŠ å³å¯ã€‚ä¸‹é¢çš„ä¹Ÿç±»ä¼¼ã€‚</p>
<p>é™¤æ­¤ä¹‹å¤–ï¼Œé¢˜ç›®è¦æ±‚ä½¿ç”¨çš„ç«‹å³æ•°å¤§å°ä¸è¶…è¿‡ 0xFFï¼Œéœ€è¦ç”¨ä¸€äº› tricky çš„æ‰‹æ®µè·å¾—æˆ‘ä»¬è¦çš„ç«‹å³æ•°ï¼Œä»¥å…è¶…å‡ºç¬¦å·æ•°é‡é™åˆ¶ã€‚å¯ä»¥å‚é˜…ä»£ç ã€‚</p>
<h2><a id="bang" class="heading-anchor"></a>bang</h2>
<p>è¦æ±‚è®¡ç®—é€»è¾‘åï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬è¦è¿”å›è¿™æ ·ä¸€ä¸ªå€¼ï¼Œå½“ x ä¸ºå…¨ 0 æ—¶å…¶ä¸º 1ï¼Œx ä»»ä½•ä¸€ä½ä¸º 1 æ—¶å…¶ä¸º 0ã€‚<br>
ç†æ‰€å½“ç„¶åœ°å¯ä»¥æƒ³åˆ°åº”è¯¥æŠŠ x æ¯ä¸€ä½ or èµ·æ¥ï¼ˆæˆ–è€…æŠŠ ~x æ¯ä¸€ä½ and èµ·æ¥ï¼‰ï¼Œç»“æœæ”¾åœ¨æœ€ä½ä½ï¼Œå¾—åˆ° 1 æˆ– 0ã€‚<br>
ç„¶è€Œå¦‚æœçœŸçš„å–å‡º 32 ä½æ¯ä¸€ä½è¿›è¡Œ orï¼Œops ä¼šè¶…è¿‡é™åˆ¶ã€‚å¯ä»¥ç”¨åˆ†æ²»çš„æ–¹æ³•ï¼Œå…ˆå°† [0,15] å’Œ [16,31] è¿™ä¸¤æ®µæŒ‰ä½å¤„ç†æ”¾å…¥ä½çš„ä¸€æ®µï¼Œå†å¤„ç† [0,7] å’Œ [8,15]ï¼Œä»¥æ­¤ç±»æ¨ï¼Œå¯ä»¥åœ¨ ops æ•°é‡é™åˆ¶å†…å®Œæˆã€‚</p>
<h2><a id="tmin" class="heading-anchor"></a>tmin</h2>
<p>è¿”å›æœ€å°çš„ intï¼Œå°±æ˜¯ 1 &lt;&lt; 31ã€‚</p>
<h2><a id="fitsbits" class="heading-anchor"></a>fitsBits</h2>
<p>ç¬¬ä¸€ç§æ–¹æ³•æ˜¯ä¸€å¼€å§‹æƒ³çš„å¥‡æ€ªæ–¹æ³•ï¼Œè‡³å°‘éœ€è¦ç”¨åˆ° 19 ä¸ª opsï¼Œè¶…è¿‡é¢˜ç›®é™åˆ¶ï¼Œå…¶å®ä¸èƒ½é€šè¿‡ã€‚</p>
<p>è¦æˆ‘ä»¬è¿”å› 0 æˆ– 1 è¡¨ç¤º x æ˜¯å¦èƒ½è¢« n ä½è¡¥ç è¡¨ç¤ºï¼Œå®é™…ä¸Šå°±æ˜¯è¿”å›æ˜¯å¦ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>âˆ’</mo><msup><mn>2</mn><mrow><mi>n</mi><mo>âˆ’</mo><mn>1</mn></mrow></msup><mo>â‰¤</mo><mi>x</mi><mo>â‰¤</mo><msup><mn>2</mn><mrow><mi>n</mi><mo>âˆ’</mo><mn>1</mn></mrow></msup><mo>âˆ’</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">-2^{n-1} \le x \le 2^{n-1}-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9501em;vertical-align:-0.136em;"></span><span class="mord">âˆ’</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7719em;vertical-align:-0.136em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8974em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>ã€‚<br>
ä¹Ÿå°±æ˜¯ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>âˆ’</mo><msup><mn>2</mn><mrow><mi>n</mi><mo>âˆ’</mo><mn>1</mn></mrow></msup><mo>â‰¤</mo><mi>x</mi><mo>&lt;</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">-2^{n-1} \le x \lt 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9501em;vertical-align:-0.136em;"></span><span class="mord">âˆ’</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span> æˆ– <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn><mo>â‰¤</mo><mi>x</mi><mo>â‰¤</mo><msup><mn>2</mn><mrow><mi>n</mi><mo>âˆ’</mo><mn>1</mn></mrow></msup><mo>âˆ’</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">0 \le x \le 2^{n-1}-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7804em;vertical-align:-0.136em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7719em;vertical-align:-0.136em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8974em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>ã€‚<br>
å†å˜æ¢ä¸€ä¸‹ï¼Œå°±æ˜¯ï¼š<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn><mo>â‰¤</mo><mi>x</mi><mo>+</mo><msup><mn>2</mn><mrow><mi>n</mi><mo>âˆ’</mo><mn>1</mn></mrow></msup><mo>&lt;</mo><msup><mn>2</mn><mrow><mi>n</mi><mo>âˆ’</mo><mn>1</mn></mrow></msup></mrow><annotation encoding="application/x-tex">0 \le x+2^{n-1} &lt; 2^{n-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7804em;vertical-align:-0.136em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8532em;vertical-align:-0.0391em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span></span></span> æˆ– <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>âˆ’</mo><msup><mn>2</mn><mrow><mi>n</mi><mo>âˆ’</mo><mn>1</mn></mrow></msup><mo>â‰¤</mo><mi>x</mi><mo>âˆ’</mo><msup><mn>2</mn><mrow><mi>n</mi><mo>âˆ’</mo><mn>1</mn></mrow></msup><mo>â‰¤</mo><mo>âˆ’</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">-2^{n-1} \le x-2^{n-1} \le -1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9501em;vertical-align:-0.136em;"></span><span class="mord">âˆ’</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.9501em;vertical-align:-0.136em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">âˆ’</span><span class="mord">1</span></span></span></span>ã€‚<br>
ä¹Ÿå°±æ˜¯å¦‚æœ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>&lt;</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">x &lt; 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span> åˆ™è¦æ»¡è¶³ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>+</mo><msup><mn>2</mn><mrow><mi>n</mi><mo>âˆ’</mo><mn>1</mn></mrow></msup><mo>â‰¥</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">x+2^{n-1} \ge 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.9501em;vertical-align:-0.136em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">â‰¥</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span>ï¼›å¦‚æœ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>â‰¥</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">x \ge 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7719em;vertical-align:-0.136em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">â‰¥</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span> åˆ™è¦æ»¡è¶³ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>âˆ’</mo><msup><mn>2</mn><mrow><mi>n</mi><mo>âˆ’</mo><mn>1</mn></mrow></msup><mo>â‰¤</mo><mo>âˆ’</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">x-2^{n-1} \le -1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.9501em;vertical-align:-0.136em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">âˆ’</span><span class="mord">1</span></span></span></span>ã€‚ä¾ç„¶æ ¹æ® x çš„ç¬¦å·ä½é€‰æ‹©ä¸€ä¸ªç»“æœè¿”å›ã€‚</p>
<p>ç¬¬äºŒç§æ–¹æ³•åˆ™æ˜¯å¯ä»¥é€šè¿‡çš„æ­£è§£ï¼š</p>
<p>æ ¹æ®ç®—æ•°ç§»ä½çš„æ€§è´¨ã€‚å‡è®¾ç»™æˆ‘ä»¬ä¸€ä¸ª n ä½è¡¥ç è¡¨ç¤ºçš„æ•°ï¼Œæˆ‘ä»¬ç›´æ¥å°†å…¶å·¦ç§»è‡³ä¸ 32 ä½ int ç¬¦å·ä½å¯¹é½ï¼Œç„¶åå†ç§»å›å»ï¼Œå¾—åˆ°çš„ç»“æœåº”è¯¥æ˜¯å’ŒåŸæ¥ä¸€æ ·çš„ã€‚æ®æ­¤å³å¯åˆ¤æ–­ã€‚</p>
<p><strong>âš ï¸ è¿™é¢˜ä½¿ç”¨è¾ƒæ–°ç‰ˆæœ¬çš„ç¯å¢ƒæµ‹è¯•æ˜¯æ— æ³•é€šè¿‡çš„</strong>ï¼Œç›®å‰æš‚ä¸æ¸…æ¥šä¸ä»€ä¹ˆå› ç´ æœ‰å…³ã€‚åœ¨ Ubuntu 12.04 LTS x86_64 ä¸­æµ‹è¯•å¯ä»¥é€šè¿‡ã€‚è¯¦è§å¼€å¤´ã€Œç”¨ docker åˆ›å»ºè¿è¡Œç¯å¢ƒã€ã€‚</p>
<h2><a id="divpwr2" class="heading-anchor"></a>divpwr2</h2>
<p>è¦æ±‚è¿”å› <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mi>x</mi><msup><mn>2</mn><mi>n</mi></msup></mfrac></mrow><annotation encoding="application/x-tex">\frac{x}{2^n}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0404em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6954em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.5935em;"><span style="top:-2.786em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">x</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>ï¼Œå‘ 0 å–æ•´ã€‚<br>
å¯¹äºæ­£æ•°å½“ç„¶å°±æ˜¯ &gt;&gt; n å³å¯ï¼Œå¯¹äºè´Ÿæ•°å°±æœ‰äº›å¤æ‚ï¼Œå› ä¸º &gt;&gt; è¿ç®—é»˜è®¤å‘ä¸‹å–æ•´ï¼Œéœ€è¦è¿›è¡Œä¿®æ­£ã€‚<br>
å¯¹äºè´Ÿæ•°ï¼Œåˆ—è¡¨å¯ä»¥å‘ç°ï¼Œæ¯ä¸ªæ•°å­—åœ¨è®¡ç®—ä¹‹å‰è¦åŠ ä¸Š <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mi>n</mi></msup><mo>âˆ’</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">2^n-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7477em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> çš„åç§»æ‰èƒ½å¾—åˆ°æ­£ç¡®ç­”æ¡ˆã€‚<br>
å› ä¸ºå‡ºç°äº† n - 1ï¼Œæ‰€ä»¥è¿˜è¦ç‰¹åˆ«è€ƒè™‘ n = 0 çš„æƒ…å†µã€‚ä½¿ç”¨ logicalShift ä¸€æ ·çš„ã€Œå¤šè·¯å¤ç”¨ã€æ–¹æ³•å³å¯ã€‚</p>
<h2><a id="negate" class="heading-anchor"></a>negate</h2>
<p>å–è´Ÿæ•°ï¼Œå°±æ˜¯ (~x)+1ï¼Œå¾ˆç®€å•ã€‚</p>
<h2><a id="ispositive" class="heading-anchor"></a>isPositive</h2>
<p>æ ¹æ®ç¬¦å·ä½ï¼Œå¯ä»¥è½»æ˜“åˆ¤æ–­å‡ºè¿™ä¸ªæ•°æ˜¯å¦ &gt;= 0ã€‚æ—¢ç„¶æœ¬é¢˜è¦æ±‚åˆ¤æ–­ &gt; 0ï¼Œä¹Ÿå°±æ˜¯ 0 æ˜¯ç‰¹æ®Šæƒ…å†µï¼Œä¾ç„¶å¯ä»¥æ ¹æ®å‰é¢çš„æ–¹æ³•ç‰¹æ®Šåˆ¤æ–­ã€‚</p>
<h2><a id="islessorequal" class="heading-anchor"></a>isLessOrEqual</h2>
<p>åˆ¤æ–­ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>â‰¤</mo><mi>y</mi></mrow><annotation encoding="application/x-tex">x \le y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7719em;vertical-align:-0.136em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span>ï¼Œä¸èƒ½ç›´æ¥åˆ¤æ–­ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi><mo>âˆ’</mo><mi>x</mi><mo>â‰¥</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">y-x \ge 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7719em;vertical-align:-0.136em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">â‰¥</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span>ï¼Œå› ä¸ºä¼š overflowã€‚<br>
å¯ä»¥å‘ç°å¦‚æœ x å’Œ y åŒå·ï¼Œè‚¯å®šä¸ä¼š overflowã€‚æ‰€ä»¥åªéœ€è¦å¯¹å¼‚å·çš„æƒ…å†µè¿›è¡Œåˆ¤æ–­ã€‚<br>
ä¸ºäº†æ›´åŠ æ¸…æ™°ï¼Œåˆ—å‡ºä¸€ä¸ªçœŸå€¼è¡¨ï¼š</p>
<table>
<thead>
<tr><th>x ç¬¦å·ä½</th><th>y ç¬¦å·ä½</th><th>è¿”å›å€¼</th></tr>
</thead>
<tbody>
<tr><td>1</td><td>0</td><td>1</td></tr>
<tr><td>0</td><td>1</td><td>0</td></tr>
<tr><td>0</td><td>0</td><td>y-x çš„ç¬¦å·ä½å–å</td></tr>
<tr><td>1</td><td>1</td><td>y-x çš„ç¬¦å·ä½å–å</td></tr>
</tbody>
</table>
<p>ä¾ç„¶æ˜¯ä¸ªåˆ†ç±»è®¨è®ºï¼ˆã€Œå¤šè·¯å¤ç”¨ã€ï¼‰çš„æ€è·¯ï¼Œæ ¹æ® x xor y çš„å€¼è¿”å›ç­”æ¡ˆï¼Œå¦‚æœä¸º 1 ç­”æ¡ˆæ˜¯ x çš„ç¬¦å·ä½ï¼Œå¦‚æœä¸º 0 ç­”æ¡ˆä¸º y-x çš„ç¬¦å·ä½å–åã€‚</p>
<h2><a id="ilog2" class="heading-anchor"></a>ilog2</h2>
<p>è¦æ±‚è¿”å› log2(x) å‘ä¸‹å–æ•´ã€‚å¾ˆæ˜¾ç„¶ç­”æ¡ˆå°±æ˜¯ x çš„äºŒè¿›åˆ¶ä¸­æœ€å·¦è¾¹çš„ 1ï¼ˆæœ€é«˜ä½ï¼‰åœ¨ä»å³å¾€å·¦ç¬¬å‡ ä½ã€‚<br>
é¦–å…ˆé€šè¿‡å°† x æŒ‰ä½æˆ– x &gt;&gt; k çš„æ‰‹æ®µï¼ˆk åˆ†åˆ«ç­‰äº 1ã€2ã€4â€¦â€¦ï¼‰ï¼Œå¯ä»¥å°† x = 0001xxxxx å˜ä¸º x = 000111111ï¼Œä¹Ÿå°±æ˜¯æœ€é«˜ä½ä¹‹åå…¨éƒ½å˜æˆ 1ã€‚ç„¶åå¯ä»¥åšä¸€éä¹‹å‰çš„ bitCountï¼Œå°†ç»“æœå‡å» 1 å³å¯ã€‚</p>
<h2><a id="float_neg" class="heading-anchor"></a>float_neg</h2>
<p>è¿™éƒ¨åˆ†ç»ˆäºå¯ä»¥ç”¨ if äº†ã€‚åªè¦åˆ¤æ–­ NaN çš„æƒ…å†µåŸå°ä¸åŠ¨è¿”å›ï¼Œå¦åˆ™ä¿®æ”¹ç¬¦å·ä½è¿”å›å°±è¡Œã€‚<br>
å¯¹ç¬¦å·ä½å–åå¯ä»¥å¯¹ <code>1&lt;&lt;31</code> å–å¼‚æˆ–ã€‚<br>
å¯ä»¥æ„é€ ä¸¤ä¸ªå˜é‡ get_exp å’Œ get_frac åˆ†åˆ«ç”¨äºå’Œä¸€ä¸ªæ•°æŒ‰ä½ä¸ï¼Œä»è€Œå–å‡ºè¿™ä¸ªæ•°ä¸­çš„ exp æˆ– frac ç‰‡æ®µã€‚exp å°±æ˜¯ <code>0xFF</code> &lt;&lt; 23ï¼Œfrac åˆ™æ˜¯ ~exp å†å¯¹ç¬¦å·ä½å–åã€‚</p>
<h2><a id="float_i2f" class="heading-anchor"></a>float_i2f</h2>
<p>è¦å°†æä¾›çš„ int å€¼ x è½¬æ¢ä¸º floatã€‚<br>
int å’Œ float å…³äºè´Ÿæ•°çš„æ¦‚å¿µæ˜¯æˆªç„¶ä¸åŒçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¿…é¡»å¯¹ int çš„ç»å¯¹å€¼è¿›è¡Œå¤„ç†ã€‚æ‰€ä»¥é¦–å…ˆè¦å¯¹äº x &lt; 0 çš„æƒ…å†µè®¾ç½®ç¬¦å·ä½åç›´æ¥å–ç›¸åæ•°ã€‚ï¼ˆæ­¤æ—¶æ³¨æ„ç‰¹åˆ¤ tmin çš„æƒ…å†µï¼å®ƒæ²¡æœ‰èƒ½ç”± int è¡¨ç¤ºçš„ç›¸åæ•°ï¼‰è®¾ç½®å¥½ sign åï¼Œåªè¦å¤„ç† exp å’Œ frac å³å¯ã€‚<br>
å‡è®¾ x æ˜¯ä¸ª n ä½çš„äºŒè¿›åˆ¶æ•°ï¼Œexp å°±ç­‰äº n - 1 + biasã€‚<br>
frac å°±æ˜¯å³è¾¹çš„ n - 1 ä½ï¼ˆå·¦å¯¹é½ï¼‰ã€‚è¦è€ƒè™‘è¿›ä½é—®é¢˜ã€‚å°† frac è¢«æˆªæ‰çš„éƒ¨åˆ†æ‹¿å‡ºæ¥ï¼ˆæœ€å¤šæœ‰ 8 ä½ï¼‰ï¼Œå¦‚æœã€Œå¤§äº 0x80ã€æˆ–è€…ã€Œç­‰äº 0x80 ä¸”frac æœ«ä½ä¸º 1ã€ï¼ˆround to even çš„æƒ…å†µï¼‰åˆ™è¦è¿›ä¸€ä½ï¼Œfrac è¿ç»­è¿›ä½ã€‚æ³¨æ„åˆ° frac æœ‰å¯èƒ½è¿›ä½è¿›åˆ° exp é‡Œï¼Œä½†æ˜¯æˆ‘ä»¬çš„ä»£ç é‡Œä¸ç”¨åˆ¤æ–­ï¼Œå› ä¸º frac æœ€é«˜ä½ä¹‹å‰å°±æ˜¯ exp æœ€ä½ä½ã€‚ï¼ˆåœ¨è¿™é‡Œæ˜¯ä¸æ˜¯å†æ¬¡æ„Ÿåˆ°äº† IEEE æµ®ç‚¹æ•°è®¾è®¡çš„ç²¾å¦™ï¼Ÿï¼‰<br>
æœ€åæ³¨æ„è¿™é¢˜ 0 ä¹Ÿè¦ç‰¹åˆ¤ï¼Œå› ä¸º 0 å±äº denomilizedã€‚</p>
<p>è¿™é¢˜å†™èµ·æ¥å¾ˆå®¹æ˜“è¶…è¿‡ ops æ•°é‡é™åˆ¶ã€‚éœ€è¦çœç€ç‚¹ç”¨ã€‚</p>
<h2><a id="float_twice" class="heading-anchor"></a>float_twice</h2>
<p>å°†ç»™å‡ºçš„ float ç¿»ä¸¤å€ï¼Œè¦åˆ†åˆ«è€ƒè™‘ nomalizedã€denomolized å’Œ special çš„æƒ…å†µã€‚<br>
nomolized å¾ˆç®€å•ï¼Œç›´æ¥ä¿®æ”¹ exp éƒ¨åˆ†å³å¯ã€‚æ³¨æ„å¯èƒ½æœ‰ nomolized è¿›å…¥ infinity çš„æƒ…å†µã€‚<br>
denomolized åªéœ€è¦ä¿®æ”¹ frac å³å¯ã€‚æ³¨æ„å¯èƒ½æœ‰ä» denomolized è¿›å…¥ nomolized çš„æƒ…å†µï¼Œè¦ä¿®æ”¹ expã€‚<br>
æœ€å infinityã€NaN è¿™ä¸¤ç§å€¼éƒ½åŸæ ·è¿”å›ï¼Œéœ€è¦ç‰¹åˆ¤ã€‚</p>
<h2><a id="å®Œæ•´ä»£ç å‚è€ƒ" class="heading-anchor"></a>å®Œæ•´ä»£ç å‚è€ƒ</h2>
<pre><code class="language-cpp"><span class="hljs-comment">/* 
 * bitAnd - x&amp;y using only ~ and | 
 *   Example: bitAnd(6, 5) = 4
 *   Legal ops: ~ |
 *   Max ops: 8
 *   Rating: 1
 */</span>
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">bitAnd</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y)</span> </span>{
  <span class="hljs-keyword">return</span> ~((~x) | (~y));
}
<span class="hljs-comment">/* 
 * getByte - Extract byte n from word x
 *   Bytes numbered from 0 (LSB) to 3 (MSB)
 *   Examples: getByte(0x12345678,1) = 0x56
 *   Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt;
 *   Max ops: 6
 *   Rating: 2
 */</span>
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">getByte</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> n)</span> </span>{
  <span class="hljs-type">int</span> n2 = n + n;
  <span class="hljs-type">int</span> n4 = n2 + n2;
  <span class="hljs-type">int</span> n8 = n4 + n4;
  <span class="hljs-keyword">return</span> (x &gt;&gt; n8) &amp; <span class="hljs-number">0xFF</span>;
}
<span class="hljs-comment">/* 
 * logicalShift - shift x to the right by n, using a logical shift
 *   Can assume that 0 &lt;= n &lt;= 31
 *   Examples: logicalShift(0x87654321,4) = 0x08765432
 *   Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt;
 *   Max ops: 20
 *   Rating: 3 
 */</span>
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">logicalShift</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> n)</span> </span>{
  <span class="hljs-type">int</span> sub1 = ~<span class="hljs-number">0</span>;
  <span class="hljs-type">int</span> keeper = ~(<span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">31</span>);
  <span class="hljs-type">int</span> result = (x &gt;&gt; n) &amp; (keeper &gt;&gt; (n + sub1));
  <span class="hljs-type">int</span> notn = !n;
  <span class="hljs-type">int</span> flag = notn + sub1;
 <span class="hljs-keyword">return</span> ((~flag) &amp; x) | (flag &amp; result);
}
<span class="hljs-comment">/*
 * bitCount - returns count of number of 1&#x27;s in word
 *   Examples: bitCount(5) = 2, bitCount(7) = 3
 *   Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt;
 *   Max ops: 40
 *   Rating: 4
 */</span>
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">bitCount</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span> </span>{
  <span class="hljs-type">int</span> ret = x;
  <span class="hljs-type">int</span> mask = <span class="hljs-number">0</span>;
  <span class="hljs-comment">// 0x55555555</span>
  mask = <span class="hljs-number">0x55</span> + (<span class="hljs-number">0x55</span> &lt;&lt; <span class="hljs-number">8</span>);
  mask = mask + (mask &lt;&lt; <span class="hljs-number">16</span>);
  ret = (ret &amp; mask) + ((ret&gt;&gt;<span class="hljs-number">1</span>) &amp; mask);
  <span class="hljs-comment">// 0x33333333</span>
  mask = <span class="hljs-number">0x33</span> + (<span class="hljs-number">0x33</span> &lt;&lt; <span class="hljs-number">8</span>);
  mask = mask + (mask &lt;&lt; <span class="hljs-number">16</span>);
  ret = (ret &amp; mask) + ((ret&gt;&gt;<span class="hljs-number">2</span>) &amp; mask);
  <span class="hljs-comment">// 0x0f0f0f0f</span>
  mask = <span class="hljs-number">0x0f</span> + (<span class="hljs-number">0x0f</span> &lt;&lt; <span class="hljs-number">8</span>) + (<span class="hljs-number">0x0f</span> &lt;&lt; <span class="hljs-number">16</span>) + (<span class="hljs-number">0x0f</span> &lt;&lt; <span class="hljs-number">24</span>);
  ret = (ret &amp; mask) + ((ret&gt;&gt;<span class="hljs-number">4</span>) &amp; mask);
  <span class="hljs-comment">// 0x00ff00ff</span>
  mask = <span class="hljs-number">0xff</span> + (<span class="hljs-number">0xff</span> &lt;&lt; <span class="hljs-number">16</span>);
  ret = (ret &amp; mask) + ((ret&gt;&gt;<span class="hljs-number">8</span>) &amp; mask);
  <span class="hljs-comment">// 0x0000ffff</span>
  mask = <span class="hljs-number">0xff</span> + (<span class="hljs-number">0xff</span> &lt;&lt; <span class="hljs-number">8</span>);
  ret = (ret &amp; mask) + ((ret&gt;&gt;<span class="hljs-number">16</span>) &amp; mask);
  <span class="hljs-keyword">return</span> ret;
}
<span class="hljs-comment">/* 
 * bang - Compute !x without using !
 *   Examples: bang(3) = 0, bang(0) = 1
 *   Legal ops: ~ &amp; ^ | + &lt;&lt; &gt;&gt;
 *   Max ops: 12
 *   Rating: 4 
 */</span>
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">bang</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span> </span>{
  <span class="hljs-type">int</span> ret = ~x;
  ret = ret &amp; (ret &gt;&gt; <span class="hljs-number">16</span>);
  ret = ret &amp; (ret &gt;&gt; <span class="hljs-number">8</span>);
  ret = ret &amp; (ret &gt;&gt; <span class="hljs-number">4</span>);
  ret = ret &amp; (ret &gt;&gt; <span class="hljs-number">2</span>);
  ret = ret &amp; (ret &gt;&gt; <span class="hljs-number">1</span>);
  <span class="hljs-keyword">return</span> ret&amp;<span class="hljs-number">1</span>;
}
<span class="hljs-comment">/* 
 * tmin - return minimum two&#x27;s complement integer 
 *   Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt;
 *   Max ops: 4
 *   Rating: 1
 */</span>
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">tmin</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span> </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">31</span>;
}
<span class="hljs-comment">/* 
 * fitsBits - return 1 if x can be represented as an 
 *  n-bit, two&#x27;s complement integer.
 *   1 &lt;= n &lt;= 32
 *   Examples: fitsBits(5,3) = 0, fitsBits(-4,3) = 1
 *   Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt;
 *   Max ops: 15
 *   Rating: 2
 */</span>
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">fitsBits</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> n)</span> </span>{
<span class="hljs-comment">//  int sub1 = ~0;</span>
<span class="hljs-comment">//  int get_sign = 1&lt;&lt;31;</span>
<span class="hljs-comment">//  int sign = x &amp; get_sign;</span>
<span class="hljs-comment">//  int not_sign = !sign;</span>
<span class="hljs-comment">//  int power = 1 &lt;&lt; (n + sub1);</span>
<span class="hljs-comment">//  int sub_power = (~power) + 1;</span>
<span class="hljs-comment">//  int result1 = !(((x + power) &amp; get_sign) &gt;&gt; 31);</span>
<span class="hljs-comment">//  int result2 = ((x + sub_power) &amp; get_sign) &gt;&gt; 31;</span>
<span class="hljs-comment">//  sign = !not_sign;</span>
<span class="hljs-comment">//  return (sign &amp; result1) | (not_sign &amp; result2);</span>
  <span class="hljs-type">int</span> subn = (~n) + <span class="hljs-number">1</span>;
  <span class="hljs-type">int</span> to_shl = <span class="hljs-number">32</span> + subn;
  <span class="hljs-type">int</span> x_fix = (x &lt;&lt; to_shl) &gt;&gt; to_shl;
  <span class="hljs-type">int</span> not_ans = x ^ x_fix;
  <span class="hljs-keyword">return</span> !not_ans;
}
<span class="hljs-comment">/* 
 * divpwr2 - Compute x/(2^n), for 0 &lt;= n &lt;= 30
 *  Round toward zero
 *   Examples: divpwr2(15,1) = 7, divpwr2(-33,4) = -2
 *   Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt;
 *   Max ops: 15
 *   Rating: 2
 */</span>
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">divpwr2</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> n)</span> </span>{
    <span class="hljs-comment">// Round to zero is the difficult part</span>
    <span class="hljs-type">int</span> sub1 = ~<span class="hljs-number">0</span>;
    <span class="hljs-type">int</span> super2sub1 = (<span class="hljs-number">1</span>&lt;&lt;n) + sub1;
    <span class="hljs-type">int</span> notn = !n;
    <span class="hljs-type">int</span> flag = notn + sub1;
    <span class="hljs-type">int</span> result = (x + ((x &gt;&gt; <span class="hljs-number">31</span>) &amp; super2sub1)) &gt;&gt; n;
    <span class="hljs-keyword">return</span> ((~flag) &amp; x) | (flag &amp; result);
}
<span class="hljs-comment">/* 
 * negate - return -x 
 *   Example: negate(1) = -1.
 *   Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt;
 *   Max ops: 5
 *   Rating: 2
 */</span>
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">negate</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span> </span>{
  <span class="hljs-keyword">return</span> (~x) + <span class="hljs-number">1</span>;
}
<span class="hljs-comment">/* 
 * isPositive - return 1 if x &gt; 0, return 0 otherwise 
 *   Example: isPositive(-1) = 0.
 *   Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt;
 *   Max ops: 8
 *   Rating: 3
 */</span>
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">isPositive</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span> </span>{
  <span class="hljs-type">int</span> sub1 = ~<span class="hljs-number">0</span>;
  <span class="hljs-type">int</span> notx = !x;
  <span class="hljs-type">int</span> flag = notx + sub1;
  <span class="hljs-type">int</span> result = !(x &gt;&gt; <span class="hljs-number">31</span>);
  <span class="hljs-keyword">return</span> flag &amp; result;
  <span class="hljs-comment">// return ((~flag) &amp; 0) | (flag &amp; result);</span>
  <span class="hljs-comment">// the first part isn&#x27;t necessary</span>
}
<span class="hljs-comment">/* 
 * isLessOrEqual - if x &lt;= y  then return 1, else return 0 
 *   Example: isLessOrEqual(4,5) = 1.
 *   Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt;
 *   Max ops: 24
 *   Rating: 3
 */</span>
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">isLessOrEqual</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y)</span> </span>{
  <span class="hljs-type">int</span> xxory = (x &gt;&gt; <span class="hljs-number">31</span>) ^ (y &gt;&gt; <span class="hljs-number">31</span>);
  <span class="hljs-type">int</span> subx = (~x) + <span class="hljs-number">1</span>;
  <span class="hljs-type">int</span> ysubx = y + subx;
  <span class="hljs-type">int</span> result_1 = (x &gt;&gt; <span class="hljs-number">31</span>) &amp; <span class="hljs-number">1</span>;
  <span class="hljs-type">int</span> result_2 = !(ysubx &gt;&gt; <span class="hljs-number">31</span>);
  <span class="hljs-keyword">return</span> (xxory &amp; result_1) | ((~xxory) &amp; result_2);
}
<span class="hljs-comment">/*
 * ilog2 - return floor(log base 2 of x), where x &gt; 0
 *   Example: ilog2(16) = 4
 *   Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt;
 *   Max ops: 90
 *   Rating: 4
 */</span>
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">ilog2</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span> </span>{
  <span class="hljs-type">int</span> sub1 = ~<span class="hljs-number">0</span>;
  <span class="hljs-type">int</span> x_fill = x;
  <span class="hljs-type">int</span> ret, mask;
  x_fill |= x_fill &gt;&gt; <span class="hljs-number">1</span>;
  x_fill |= x_fill &gt;&gt; <span class="hljs-number">2</span>;
  x_fill |= x_fill &gt;&gt; <span class="hljs-number">4</span>;
  x_fill |= x_fill &gt;&gt; <span class="hljs-number">8</span>;
  x_fill |= x_fill &gt;&gt; <span class="hljs-number">16</span>;

  <span class="hljs-comment">// perform bitCount</span>
  ret = x_fill;
  mask = <span class="hljs-number">0</span>;
  <span class="hljs-comment">// 0x55555555</span>
  mask = <span class="hljs-number">0x55</span> + (<span class="hljs-number">0x55</span> &lt;&lt; <span class="hljs-number">8</span>);
  mask = mask + (mask &lt;&lt; <span class="hljs-number">16</span>);
  ret = (ret &amp; mask) + ((ret&gt;&gt;<span class="hljs-number">1</span>) &amp; mask);
  <span class="hljs-comment">// 0x33333333</span>
  mask = <span class="hljs-number">0x33</span> + (<span class="hljs-number">0x33</span> &lt;&lt; <span class="hljs-number">8</span>);
  mask = mask + (mask &lt;&lt; <span class="hljs-number">16</span>);
  ret = (ret &amp; mask) + ((ret&gt;&gt;<span class="hljs-number">2</span>) &amp; mask);
  <span class="hljs-comment">// 0x0f0f0f0f</span>
  mask = <span class="hljs-number">0x0f</span> + (<span class="hljs-number">0x0f</span> &lt;&lt; <span class="hljs-number">8</span>) + (<span class="hljs-number">0x0f</span> &lt;&lt; <span class="hljs-number">16</span>) + (<span class="hljs-number">0x0f</span> &lt;&lt; <span class="hljs-number">24</span>);
  ret = (ret &amp; mask) + ((ret&gt;&gt;<span class="hljs-number">4</span>) &amp; mask);
  <span class="hljs-comment">// 0x00ff00ff</span>
  mask = <span class="hljs-number">0xff</span> + (<span class="hljs-number">0xff</span> &lt;&lt; <span class="hljs-number">16</span>);
  ret = (ret &amp; mask) + ((ret&gt;&gt;<span class="hljs-number">8</span>) &amp; mask);
  <span class="hljs-comment">// 0x0000ffff</span>
  mask = <span class="hljs-number">0xff</span> + (<span class="hljs-number">0xff</span> &lt;&lt; <span class="hljs-number">8</span>);
  ret = (ret &amp; mask) + ((ret&gt;&gt;<span class="hljs-number">16</span>) &amp; mask);
  <span class="hljs-keyword">return</span> ret + sub1;
}
<span class="hljs-comment">/* 
 * float_neg - Return bit-level equivalent of expression -f for
 *   floating point argument f.
 *   Both the argument and result are passed as unsigned int&#x27;s, but
 *   they are to be interpreted as the bit-level representations of
 *   single-precision floating point values.
 *   When argument is NaN, return argument.
 *   Legal ops: Any integer/unsigned operations incl. ||, &amp;&amp;. also if, while
 *   Max ops: 10
 *   Rating: 2
 */</span>
<span class="hljs-function"><span class="hljs-type">unsigned</span> <span class="hljs-title">float_neg</span><span class="hljs-params">(<span class="hljs-type">unsigned</span> uf)</span> </span>{
  <span class="hljs-type">unsigned</span> change_sign = <span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">31</span>;
  <span class="hljs-type">unsigned</span> get_exp = <span class="hljs-number">0xFF</span> &lt;&lt; <span class="hljs-number">23</span>;
  <span class="hljs-type">unsigned</span> get_frac = (~get_exp) ^ change_sign;
  <span class="hljs-keyword">if</span> ((uf &amp; get_exp) == get_exp &amp;&amp; (uf &amp; get_frac) != <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> uf;
  <span class="hljs-keyword">return</span> uf ^ change_sign;
}
<span class="hljs-comment">/* 
 * float_i2f - Return bit-level equivalent of expression (float) x
 *   Result is returned as unsigned int, but
 *   it is to be interpreted as the bit-level representation of a
 *   single-precision floating point values.
 *   Legal ops: Any integer/unsigned operations incl. ||, &amp;&amp;. also if, while
 *   Max ops: 30
 *   Rating: 4
 */</span>
<span class="hljs-function"><span class="hljs-type">unsigned</span> <span class="hljs-title">float_i2f</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span> </span>{
  <span class="hljs-type">int</span> bias = <span class="hljs-number">127</span>;
  <span class="hljs-type">unsigned</span> get_frac = <span class="hljs-number">0x007fffff</span>;
  <span class="hljs-type">unsigned</span> get_frac_cut = <span class="hljs-number">0x000000ff</span>;
  <span class="hljs-type">unsigned</span> tminf = <span class="hljs-number">0xcf000000</span>;
  <span class="hljs-type">int</span> fix_x, n, nsub1, temp;
  <span class="hljs-type">unsigned</span> sign, exp, frac, frac_cut;

  <span class="hljs-comment">// special cases</span>
  <span class="hljs-keyword">if</span> (x == <span class="hljs-number">0x80000000</span>) <span class="hljs-keyword">return</span> tminf;
  <span class="hljs-keyword">if</span> (x == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;

  <span class="hljs-comment">// get abs / get sign</span>
  fix_x = x;
  sign = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">if</span> (fix_x &lt; <span class="hljs-number">0</span>) fix_x = -fix_x, sign = <span class="hljs-number">0x80000000</span>;

  <span class="hljs-comment">// get count</span>
  n = <span class="hljs-number">0</span>;
  temp = fix_x;
  <span class="hljs-keyword">while</span> (temp) n++, temp&gt;&gt;=<span class="hljs-number">1</span>;
  nsub1 = n - <span class="hljs-number">1</span>;
  <span class="hljs-comment">//printf(&quot;count=%d\n&quot;,count);</span>

  <span class="hljs-comment">// get exp</span>
  exp = ((nsub1 + bias) &lt;&lt; <span class="hljs-number">23</span>);

  <span class="hljs-comment">// get frac</span>
  <span class="hljs-keyword">if</span> (nsub1 &lt;= <span class="hljs-number">23</span>){
    frac = (fix_x &lt;&lt; (<span class="hljs-number">23</span> - nsub1)) &amp; get_frac;
  } <span class="hljs-keyword">else</span> {
    frac = (fix_x &gt;&gt; (nsub1 - <span class="hljs-number">23</span>)) &amp; get_frac;
    frac_cut = (fix_x &lt;&lt; (<span class="hljs-number">31</span> - nsub1)) &amp; get_frac_cut;
    <span class="hljs-keyword">if</span> ((frac_cut &gt; <span class="hljs-number">0x80</span>) || (frac_cut == <span class="hljs-number">0x80</span> &amp;&amp; (frac &amp; <span class="hljs-number">1</span>))) frac++; <span class="hljs-comment">// carry</span>
  }

  <span class="hljs-keyword">return</span> sign + exp + frac;
}
<span class="hljs-comment">/* 
 * float_twice - Return bit-level equivalent of expression 2*f for
 *   floating point argument f.
 *   Both the argument and result are passed as unsigned int&#x27;s, but
 *   they are to be interpreted as the bit-level representation of
 *   single-precision floating point values.
 *   When argument is NaN, return argument
 *   Legal ops: Any integer/unsigned operations incl. ||, &amp;&amp;. also if, while
 *   Max ops: 30
 *   Rating: 4
 */</span>
<span class="hljs-function"><span class="hljs-type">unsigned</span> <span class="hljs-title">float_twice</span><span class="hljs-params">(<span class="hljs-type">unsigned</span> uf)</span> </span>{
  <span class="hljs-type">unsigned</span> neg_inf = <span class="hljs-number">0xff800000</span>;
  <span class="hljs-type">unsigned</span> pos_inf = <span class="hljs-number">0x7f800000</span>;
  <span class="hljs-type">unsigned</span> get_exp = <span class="hljs-number">0x7f800000</span>;
  <span class="hljs-type">unsigned</span> get_frac = <span class="hljs-number">0x007fffff</span>;
  <span class="hljs-type">unsigned</span> exp = (uf &amp; get_exp) &gt;&gt; <span class="hljs-number">23</span>;
  <span class="hljs-type">unsigned</span> frac = uf &amp; get_frac;
  <span class="hljs-type">unsigned</span> ret = uf;
  <span class="hljs-keyword">if</span> (exp == <span class="hljs-number">0xff</span>) <span class="hljs-keyword">return</span> uf;
  <span class="hljs-keyword">if</span> (exp == <span class="hljs-number">0</span>){ <span class="hljs-comment">// denomolized</span>
    <span class="hljs-keyword">if</span> (frac &amp; (<span class="hljs-number">1</span>&lt;&lt;<span class="hljs-number">23</span>)){ <span class="hljs-comment">// de -&gt; no</span>
      ret = ret | (<span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">23</span>);
      <span class="hljs-keyword">return</span> ret;
    } <span class="hljs-keyword">else</span> {
      ret = ret - frac;
      frac = frac &lt;&lt; <span class="hljs-number">1</span>;
      ret = ret + frac;
      <span class="hljs-keyword">return</span> ret;
    }
  } <span class="hljs-keyword">else</span> { <span class="hljs-comment">// nomolized</span>
    ret = ret - (exp &lt;&lt; <span class="hljs-number">23</span>);
    exp++;
    <span class="hljs-keyword">if</span> (exp &gt; <span class="hljs-number">0xff</span>) { <span class="hljs-comment">// no -&gt; inf</span>
      <span class="hljs-keyword">if</span> (uf &amp; (<span class="hljs-number">1</span>&lt;&lt;<span class="hljs-number">31</span>)) <span class="hljs-keyword">return</span> neg_inf;
      <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> pos_inf;
    }
    ret = ret + (exp &lt;&lt; <span class="hljs-number">23</span>);
    <span class="hljs-keyword">return</span> ret;
  }
}
</code></pre>
 </article> <hr class="my-8" data-astro-cid-4sn4zg3r> <style>astro-island,astro-slot,astro-static-slot{display:contents}</style><script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).load=e;window.dispatchEvent(new Event("astro:load"));})();;(()=>{var A=Object.defineProperty;var g=(a,o,i)=>o in a?A(a,o,{enumerable:!0,configurable:!0,writable:!0,value:i}):a[o]=i;var d=(a,o,i)=>(g(a,typeof o!="symbol"?o+"":o,i),i);{let a={0:t=>m(t),1:t=>i(t),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(i(t)),5:t=>new Set(i(t)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(t),9:t=>new Uint16Array(t),10:t=>new Uint32Array(t)},o=t=>{let[l,e]=t;return l in a?a[l](e):void 0},i=t=>t.map(o),m=t=>typeof t!="object"||t===null?t:Object.fromEntries(Object.entries(t).map(([l,e])=>[l,o(e)]));class y extends HTMLElement{constructor(){super(...arguments);d(this,"Component");d(this,"hydrator");d(this,"hydrate",async()=>{var b;if(!this.hydrator||!this.isConnected)return;let e=(b=this.parentElement)==null?void 0:b.closest("astro-island[ssr]");if(e){e.addEventListener("astro:hydrate",this.hydrate,{once:!0});return}let c=this.querySelectorAll("astro-slot"),n={},h=this.querySelectorAll("template[data-astro-template]");for(let r of h){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("data-astro-template")||"default"]=r.innerHTML,r.remove())}for(let r of c){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("name")||"default"]=r.innerHTML)}let p;try{p=this.hasAttribute("props")?m(JSON.parse(this.getAttribute("props"))):{}}catch(r){let s=this.getAttribute("component-url")||"<unknown>",v=this.getAttribute("component-export");throw v&&(s+=` (export ${v})`),console.error(`[hydrate] Error parsing props for component ${s}`,this.getAttribute("props"),r),r}let u;await this.hydrator(this)(this.Component,p,n,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),this.dispatchEvent(new CustomEvent("astro:hydrate"))});d(this,"unmount",()=>{this.isConnected||this.dispatchEvent(new CustomEvent("astro:unmount"))})}disconnectedCallback(){document.removeEventListener("astro:after-swap",this.unmount),document.addEventListener("astro:after-swap",this.unmount,{once:!0})}connectedCallback(){if(!this.hasAttribute("await-children")||document.readyState==="interactive"||document.readyState==="complete")this.childrenConnectedCallback();else{let e=()=>{document.removeEventListener("DOMContentLoaded",e),c.disconnect(),this.childrenConnectedCallback()},c=new MutationObserver(()=>{var n;((n=this.lastChild)==null?void 0:n.nodeType)===Node.COMMENT_NODE&&this.lastChild.nodeValue==="astro:end"&&(this.lastChild.remove(),e())});c.observe(this,{childList:!0}),document.addEventListener("DOMContentLoaded",e)}}async childrenConnectedCallback(){let e=this.getAttribute("before-hydration-url");e&&await import(e),this.start()}async start(){let e=JSON.parse(this.getAttribute("opts")),c=this.getAttribute("client");if(Astro[c]===void 0){window.addEventListener(`astro:${c}`,()=>this.start(),{once:!0});return}try{await Astro[c](async()=>{let n=this.getAttribute("renderer-url"),[h,{default:p}]=await Promise.all([import(this.getAttribute("component-url")),n?import(n):()=>()=>{}]),u=this.getAttribute("component-export")||"default";if(!u.includes("."))this.Component=h[u];else{this.Component=h;for(let f of u.split("."))this.Component=this.Component[f]}return this.hydrator=p,this.hydrate},e,this)}catch(n){console.error(`[astro-island] Error hydrating ${this.getAttribute("component-url")}`,n)}}attributeChangedCallback(){this.hydrate()}}d(y,"observedAttributes",["props"]),customElements.get("astro-island")||customElements.define("astro-island",y)}})();</script><astro-island uid="1idUor" prefix="r0" component-url="/_astro/Comments.DAE8LkK5.js" component-export="default" renderer-url="/_astro/client.DbokQZWz.js" props="{&quot;slug&quot;:[0,&quot;csapp-2e-datalab&quot;],&quot;data-astro-cid-4sn4zg3r&quot;:[0,true]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;Comments&quot;,&quot;value&quot;:true}" await-children=""><h2><i class="ri-discuss-line"></i> æš‚æ— è¯„è®º</h2><hr class="my-8"/><h2><i class="ri-discuss-line"></i> å‘è¡¨æ–°çš„è¯„è®º</h2><p class="mt-4 card card--in-content"><b>æ‰€æœ‰è¯„è®ºéƒ½å°†ç»è¿‡åšä¸»å®¡æ ¸ã€‚</b>è¯·å‹¿å¡«å†™æ— æ„ä¹‰é‚®ç®±æˆ–å‘è¡¨æ— å…³è¯„è®ºã€å¹¿å‘Šç­‰ï¼Œå¦åˆ™ä¼šè¢«è§†ä¸ºåƒåœ¾è¯„è®ºã€‚</p><form class="mt-4 form"><input placeholder="ä½ çš„åå­—" type="text" class="form__input" required="" value=""/><input placeholder="é‚®ç®±" type="email" class="form__input" required="" value=""/><input placeholder="ç½‘å€" type="url" class="form__input" value=""/><textarea rows="8" class="sm:col-span-3 form__input" placeholder="è¯´ç‚¹ä»€ä¹ˆå§â€¦â€¦" required=""></textarea><button type="submit" class="sm:col-span-3 form__button">æäº¤</button></form><p class="mt-4 text-secondary text-sm leading-normal">æäº¤è¯„è®ºå³è¡¨æ˜ä½ åŒæ„æœ¬ç½‘ç«™ä½¿ç”¨ Cookieï¼Œå¹¶å…è®¸æœ¬ç«™åœ¨åå°è®°å½•ä½ çš„é‚®ç®±ã€IP åœ°å€ç­‰å¿…è¦ä¿¡æ¯ã€‚<br/>ï¼ˆæäº¤ä¸€æ¬¡è¯„è®ºåï¼Œæœ¬æç¤ºå°†ä¸å†å±•ç¤ºï¼‰</p><!--astro:end--></astro-island> </section> </main>  <footer class="mt-16 py-8 text-secondary"> <div class="container container--wide text-sm"> <div class="flex justify-between flex-wrap"> <div class="m-2"> <a href="/" class="link">SkyWT</a> <span>
/
<a href="/blog" class="link"> åšå®¢ </a> </span><span>
/
CSAPP 2e Datalab é¢˜è§£ </span> </div> <div class="m-2"> <ul data-astro-cid-tfcnbjmv> <li data-astro-cid-tfcnbjmv> <a class="link" href="/" data-astro-cid-tfcnbjmv> 
ä¸»é¡µ
</a> </li> <li data-astro-cid-tfcnbjmv> <a class="link" href="/blog" data-astro-cid-tfcnbjmv>  åšå®¢ </a> </li><li data-astro-cid-tfcnbjmv> <a class="link" href="/lab" data-astro-cid-tfcnbjmv>  å®éªŒå®¤ </a> </li><li data-astro-cid-tfcnbjmv> <a class="link" href="/friends" data-astro-cid-tfcnbjmv>  å‹äºº </a> </li><li data-astro-cid-tfcnbjmv> <a class="link" href="/about" data-astro-cid-tfcnbjmv>  å…³äº </a> </li> </ul>  </div> </div> <hr class="my-4"> <div class="flex justify-between flex-wrap"> <p class="m-2">
&#169; 2017-2024 <a href="/" class="link">SkyWT</a>
|
<a href="/sitemap-index.xml" class="link">ç«™ç‚¹åœ°å›¾</a>
|
<a href="/friends" class="link">å‹æƒ…é“¾æ¥</a>
|
<a href="https://foreverblog.cn/go.html" class="link">è™«æ´</a> <!-- |
        <a href="https://github.com/Skywt2003/Daydreamer" class="link"
          >Daydreamer</a
        > --> </p> <div class="m-2"> <a href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank" class="inline-block mx-1" data-astro-cid-h3ykra2n> <img class="icon" src="/cc/cc.svg" data-astro-cid-h3ykra2n> <img class="icon" src="/cc/by.svg" data-astro-cid-h3ykra2n> <img class="icon" src="/cc/nc.svg" data-astro-cid-h3ykra2n>   </a>  <a href="https://notbyai.fyi" target="_blank" class="inline-block mx-1" data-astro-cid-hwbnc4sm> <img src="/not-by-ai-light.svg" alt="Not By AI Badge" class="badge inline-block dark:hidden" data-astro-cid-hwbnc4sm> <img src="/not-by-ai-dark.svg" alt="Not By AI Badge" class="badge hidden dark:inline-block" data-astro-cid-hwbnc4sm> </a>  <a href="https://www.foreverblog.cn/" target="_blank" class="inline-block mx-1"> <img src="https://img.foreverblog.cn/logo_en_default.png" alt="Forever Blog Badage" class="inline-block h-4 grayscale"> </a> </div> </div> <div class="flex justify-between flex-wrap"> <p class="m-2"> <a href="https://beian.miit.gov.cn/" target="_blank" class="link">
æµ™ ICP å¤‡ 2021019606 å· - 1</a>
|
<a href="https://www.beian.gov.cn/portal/registerSystemInfo?recordcode=33080202000472" target="_blank" class="link before:content-[url('/mps.png')] before:align-middle">
æµ™å…¬ç½‘å®‰å¤‡ 33080202000472 å·</a> </p> <p class="m-2"> <!-- <span class="align-middle">ç”±</span>
        <a
          href="https://www.upyun.com/?utm_source=lianmeng&utm_medium=referral"
          class="inline-block align-middle"
        >
          <img src="/upyun.png" class="h-6" />
        </a>
        <span class="align-middle">æä¾› CDN åŠ é€Ÿã€äº‘å­˜å‚¨æœåŠ¡</span> --> </p> </div> </div> </footer> </body></html>  